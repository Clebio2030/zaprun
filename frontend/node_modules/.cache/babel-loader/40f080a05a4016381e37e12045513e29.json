{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import*as Yup from\"yup\";import{Formik,Form,Field}from\"formik\";import{toast}from\"react-toastify\";import{isNil}from\"lodash\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import{makeStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import moment from\"moment\";import{Dialog,DialogContent,DialogTitle,Button,DialogActions,CircularProgress,FormControl,InputLabel,MenuItem,Select,TextField,Switch,FormControlLabel,Grid,Divider,Tab,Tabs,Paper,Box}from\"@material-ui/core\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import QueueSelect from\"../QueueSelect\";import TabPanel from\"../TabPanel\";import{Autorenew,FileCopy}from\"@material-ui/icons\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import SchedulesForm from\"../SchedulesForm\";const useStyles=makeStyles(theme=>({root:{display:\"flex\",flexWrap:\"wrap\",gap:4},multFieldLine:{marginTop:12,display:\"flex\",\"& > *:not(:last-child)\":{marginRight:theme.spacing(1)}},btnWrapper:{position:\"relative\"},importMessage:{marginTop:12,marginBottom:12,paddingBottom:20,paddingTop:3,padding:12,border:\"solid grey 2px\",borderRadius:4,display:\"flex\",\"& > *:not(:last-child)\":{marginRight:theme.spacing(1)}},buttonProgress:{color:green[500],position:\"absolute\",top:\"50%\",left:\"50%\",marginTop:-12,marginLeft:-12},textField:{marginRight:theme.spacing(1),flex:1},tokenRefresh:{minWidth:\"auto\",display:\"flex\",// Torna o botão flexível para alinhar o conteúdo\nalignItems:\"center\",// Alinha verticalmente ao centro\njustifyContent:\"center\"// Alinha horizontalmente ao centro\n}}));const SessionSchema=Yup.object().shape({name:Yup.string().min(2,\"Too Short!\").max(50,\"Too Long!\").required(\"Required\")});const WhatsAppModal=_ref=>{let{open,onClose,whatsAppId}=_ref;const classes=useStyles();const[autoToken,setAutoToken]=useState(\"\");const inputFileRef=useRef(null);const[attachment,setAttachment]=useState(null);const[attachmentName,setAttachmentName]=useState('');const initialState={name:\"\",greetingMessage:\"\",complationMessage:\"\",outOfHoursMessage:\"\",ratingMessage:\"\",isDefault:false,token:\"\",maxUseBotQueues:3,provider:\"beta\",expiresTicket:0,allowGroup:false,groupAsTicket:\"disabled\",timeUseBotQueues:'0',timeSendQueue:'0',sendIdQueue:0,expiresTicketNPS:'0',expiresInactiveMessage:\"\",timeInactiveMessage:\"\",inactiveMessage:\"\",maxUseBotQueuesNPS:3,whenExpiresTicket:0,timeCreateNewTicket:0,greetingMediaAttachment:\"\",importRecentMessages:\"\",importOldMessages:\"\",importOldMessagesGroups:\"\",integrationId:\"\"};const[whatsApp,setWhatsApp]=useState(initialState);const[selectedQueueIds,setSelectedQueueIds]=useState([]);const[queues,setQueues]=useState([]);const[tab,setTab]=useState(\"general\");const[enableImportMessage,setEnableImportMessage]=useState(false);const[importOldMessagesGroups,setImportOldMessagesGroups]=useState(false);const[closedTicketsPostImported,setClosedTicketsPostImported]=useState(false);const[importOldMessages,setImportOldMessages]=useState(moment().add(-1,\"days\").format(\"YYYY-MM-DDTHH:mm\"));const[importRecentMessages,setImportRecentMessages]=useState(moment().add(-1,\"minutes\").format(\"YYYY-MM-DDTHH:mm\"));const[copied,setCopied]=useState(false);const[integrations,setIntegrations]=useState([]);const[schedulesEnabled,setSchedulesEnabled]=useState(false);const[schedules,setSchedules]=useState([{weekday:i18n.t(\"queueModal.serviceHours.monday\"),weekdayEn:\"monday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.tuesday\"),weekdayEn:\"tuesday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.wednesday\"),weekdayEn:\"wednesday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.thursday\"),weekdayEn:\"thursday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:i18n.t(\"queueModal.serviceHours.friday\"),weekdayEn:\"friday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:\"Sábado\",weekdayEn:\"saturday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"},{weekday:\"Domingo\",weekdayEn:\"sunday\",startTimeA:\"08:00\",endTimeA:\"12:00\",startTimeB:\"13:00\",endTimeB:\"18:00\"}]);const{get:getSetting}=useCompanySettings();const[selectedPrompt,setSelectedPrompt]=useState(null);const[prompts,setPrompts]=useState([]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/prompt\");setPrompts(data.prompts);}catch(err){toastError(err);}})();},[whatsAppId]);useEffect(()=>{const fetchData=async()=>{const setting=await getSetting({\"column\":\"scheduleType\"});setSchedulesEnabled(setting.scheduleType===\"connection\");};fetchData();},[]);const handleEnableImportMessage=async e=>{setEnableImportMessage(e.target.checked);};useEffect(()=>{const fetchSession=async()=>{if(!whatsAppId)return;try{var _data$queues;const{data}=await api.get(\"whatsapp-admin/\".concat(whatsAppId,\"?session=0\"));setWhatsApp(data);setAttachmentName(data.greetingMediaAttachment);setAutoToken(data.token);data.promptId?setSelectedPrompt(data.promptId):setSelectedPrompt(null);const whatsQueueIds=(_data$queues=data.queues)===null||_data$queues===void 0?void 0:_data$queues.map(queue=>queue.id);setSelectedQueueIds(whatsQueueIds);setSchedules(data.schedules);if(data===null||data===void 0?void 0:data.importOldMessages){setEnableImportMessage(true);setImportOldMessages(data===null||data===void 0?void 0:data.importOldMessages);setImportRecentMessages(data===null||data===void 0?void 0:data.importRecentMessages);setClosedTicketsPostImported(data===null||data===void 0?void 0:data.closedTicketsPostImported);setImportOldMessagesGroups(data===null||data===void 0?void 0:data.importOldMessagesGroups);}}catch(err){toastError(err);}};fetchSession();},[whatsAppId]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/queue\");setQueues(data);}catch(err){toastError(err);}})();},[]);useEffect(()=>{(async()=>{try{const{data}=await api.get(\"/queueIntegration\");setIntegrations(data.queueIntegrations);}catch(err){toastError(err);}})();},[]);const handleChangeQueue=e=>{setSelectedQueueIds(e);setSelectedPrompt(null);};const handleChangePrompt=e=>{setSelectedPrompt(e.target.value);setSelectedQueueIds([]);};const handleSaveWhatsApp=async values=>{if(!whatsAppId)setAutoToken(generateRandomCode(30));if(!isNil(values.ratingMessage)&&values.ratingMessage!==''&&(values.expiresTicketNPS==='0'||values.expiresTicketNPS===''||values.expiresTicketNPS===0)){toastError(i18n.t(\"whatsappModal.errorExpiresNPS\"));return;}if(!isNil(values.ratingMessage)&&(values.expiresTicketNPS==='0'||values.expiresTicketNPS==='')){toastError(i18n.t(\"whatsappModal.errorExpiresNPS\"));return;}if(values.timeSendQueue==='')values.timeSendQueue='0';if((values.sendIdQueue===0||values.sendIdQueue===''||isNil(values.sendIdQueue))&&values.timeSendQueue!==0&&values.timeSendQueue!=='0'){toastError(i18n.t(\"whatsappModal.errorSendQueue\"));return;}const whatsappData={...values,queueIds:selectedQueueIds,importOldMessages:enableImportMessage?importOldMessages:null,importRecentMessages:enableImportMessage?importRecentMessages:null,importOldMessagesGroups:importOldMessagesGroups?importOldMessagesGroups:null,closedTicketsPostImported:closedTicketsPostImported?closedTicketsPostImported:null,token:autoToken?autoToken:null,schedules,promptId:selectedPrompt?selectedPrompt:null};delete whatsappData[\"queues\"];delete whatsappData[\"session\"];try{if(whatsAppId){if(whatsAppId&&enableImportMessage&&(whatsApp===null||whatsApp===void 0?void 0:whatsApp.status)===\"CONNECTED\"){toast.warning(i18n.t(\"userModal.warning.updateImage\"),{autoClose:false});try{setWhatsApp({...whatsApp,status:\"qrcode\"});await api.delete(\"/whatsappsession/\".concat(whatsApp.id));}catch(err){toastError(err);}}await api.put(\"/whatsapp/\".concat(whatsAppId),whatsappData);if(attachment!=null){const formData=new FormData();formData.append(\"file\",attachment);await api.post(\"/whatsapp/\".concat(whatsAppId,\"/media-upload\"),formData);}if(!attachmentName&&whatsApp.greetingMediaAttachment!==null){await api.delete(\"/whatsapp/\".concat(whatsAppId,\"/media-upload\"));}}else{const{data}=await api.post(\"/whatsapp\",whatsappData);if(attachment!=null){const formData=new FormData();formData.append(\"file\",attachment);await api.post(\"/whatsapp/\".concat(data.id,\"/media-upload\"),formData);}}toast.success(i18n.t(\"whatsappModal.success\"));handleClose();}catch(err){toastError(err);}};function generateRandomCode(length){const charset=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyvz0123456789\";let code=\"\";for(let i=0;i<length;i++){const randomIndex=Math.floor(Math.random()*charset.length);code+=charset.charAt(randomIndex);}return code;}const handleRefreshToken=()=>{setAutoToken(generateRandomCode(30));};const handleCopyToken=()=>{navigator.clipboard.writeText(autoToken);// Copia o token para a área de transferência    \nsetCopied(true);// Define o estado de cópia como verdadeiro\n};const handleSaveSchedules=async values=>{toast.success(\"Clique em salvar para registar as alterações\");setSchedules(values);};const handleClose=()=>{onClose();setWhatsApp(initialState);// inputFileRef.current.value = null\nsetAttachment(null);setAttachmentName(\"\");setCopied(false);};const handleTabChange=(event,newValue)=>{setTab(newValue);};const handleFileUpload=()=>{const file=inputFileRef.current.files[0];setAttachment(file);setAttachmentName(file.name);inputFileRef.current.value=null;};const handleDeleFile=()=>{setAttachment(null);setAttachmentName(null);};return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:handleClose,maxWidth:\"xl\",fullWidth:true,scroll:\"paper\"},/*#__PURE__*/React.createElement(DialogTitle,null,whatsAppId?i18n.t(\"whatsappModal.title.edit\"):i18n.t(\"whatsappModal.title.add\")),/*#__PURE__*/React.createElement(Formik,{initialValues:whatsApp,enableReinitialize:true,validationSchema:SessionSchema,onSubmit:(values,actions)=>{setTimeout(()=>{handleSaveWhatsApp(values);actions.setSubmitting(false);},400);}},_ref2=>{let{values,touched,errors,isSubmitting}=_ref2;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,elevation:1},/*#__PURE__*/React.createElement(Tabs,{value:tab,indicatorColor:\"primary\",textColor:\"primary\",scrollButtons:\"on\",variant:\"scrollable\",onChange:handleTabChange,className:classes.tab},/*#__PURE__*/React.createElement(Tab,{label:i18n.t(\"whatsappModal.tabs.general\"),value:\"general\"}),/*#__PURE__*/React.createElement(Tab,{label:i18n.t(\"whatsappModal.tabs.integrations\"),value:\"integrations\"}),/*#__PURE__*/React.createElement(Tab,{label:i18n.t(\"whatsappModal.tabs.messages\"),value:\"messages\"}),/*#__PURE__*/React.createElement(Tab,{label:\"Chatbot\",value:\"chatbot\"}),/*#__PURE__*/React.createElement(Tab,{label:i18n.t(\"whatsappModal.tabs.assessments\"),value:\"nps\"}),schedulesEnabled&&/*#__PURE__*/React.createElement(Tab,{label:i18n.t(\"whatsappModal.tabs.schedules\"),value:\"schedules\"}))),/*#__PURE__*/React.createElement(Paper,{className:classes.paper,elevation:0},/*#__PURE__*/React.createElement(TabPanel,{className:classes.container,value:tab,name:\"general\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true},attachmentName&&/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',flexDirection:'row-reverse'}},/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",endIcon:/*#__PURE__*/React.createElement(DeleteOutlineIcon,null),onClick:handleDeleFile},attachmentName)),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',flexDirection:\"column-reverse\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"video/*,image/*\",ref:inputFileRef,style:{display:'none'},onChange:handleFileUpload}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:()=>inputFileRef.current.click()},i18n.t(\"userModal.buttons.addImage\"))),/*#__PURE__*/React.createElement(\"div\",{className:classes.multFieldLine},/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.name\"),autoFocus:true,name:\"name\",error:touched.name&&Boolean(errors.name),helperText:touched.name&&errors.name,variant:\"outlined\",margin:\"dense\",className:classes.textField})),/*#__PURE__*/React.createElement(Grid,{style:{paddingTop:15},item:true},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Field,{as:Switch,color:\"primary\",name:\"isDefault\",checked:values.isDefault}),label:i18n.t(\"whatsappModal.form.default\")}),/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Field,{as:Switch,color:\"primary\",name:\"allowGroup\",checked:values.allowGroup}),label:i18n.t(\"whatsappModal.form.group\")})),/*#__PURE__*/React.createElement(Grid,{xs:6,md:4,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"groupAsTicket-selection-label\"},i18n.t(\"whatsappModal.form.groupAsTicket\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"whatsappModal.form.groupAsTicket\"),placeholder:i18n.t(\"whatsappModal.form.groupAsTicket\"),labelId:\"groupAsTicket-selection-label\",id:\"groupAsTicket\",name:\"groupAsTicket\"},/*#__PURE__*/React.createElement(MenuItem,{value:\"disabled\"},i18n.t(\"whatsappModal.menuItem.disabled\")),/*#__PURE__*/React.createElement(MenuItem,{value:\"enabled\"},i18n.t(\"whatsappModal.menuItem.enabled\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:classes.importMessage},/*#__PURE__*/React.createElement(\"div\",{className:classes.multFieldLine},/*#__PURE__*/React.createElement(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.importOldMessagesEnable\"),labelPlacement:\"end\",control:/*#__PURE__*/React.createElement(Switch,{size:\"medium\",checked:enableImportMessage,onChange:handleEnableImportMessage,name:\"importOldMessagesEnable\",color:\"primary\"})}),enableImportMessage?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.importOldMessagesGroups\"),labelPlacement:\"end\",control:/*#__PURE__*/React.createElement(Switch,{size:\"medium\",checked:importOldMessagesGroups,onChange:e=>setImportOldMessagesGroups(e.target.checked),name:\"importOldMessagesGroups\",color:\"primary\"})}),/*#__PURE__*/React.createElement(FormControlLabel,{style:{marginRight:7,color:\"gray\"},label:i18n.t(\"whatsappModal.form.closedTicketsPostImported\"),labelPlacement:\"end\",control:/*#__PURE__*/React.createElement(Switch,{size:\"medium\",checked:closedTicketsPostImported,onChange:e=>setClosedTicketsPostImported(e.target.checked),name:\"closedTicketsPostImported\",color:\"primary\"})})):/*#__PURE__*/React.createElement(React.Fragment,null)),enableImportMessage?/*#__PURE__*/React.createElement(Grid,{style:{marginTop:18},container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.importOldMessages\"),type:\"datetime-local\",name:\"importOldMessages\",inputProps:{max:moment().add(0,\"minutes\").format(\"YYYY-MM-DDTHH:mm\"),min:moment().add(-2,\"years\").format(\"YYYY-MM-DDTHH:mm\")}//min=\"2022-11-06T22:22:55\"\n,InputLabelProps:{shrink:true},error:touched.importOldMessages&&Boolean(errors.importOldMessages),helperText:touched.importOldMessages&&errors.importOldMessages,variant:\"outlined\",value:moment(importOldMessages).format(\"YYYY-MM-DDTHH:mm\"),onChange:e=>{setImportOldMessages(e.target.value);}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Field,{fullWidth:true,as:TextField,label:i18n.t(\"whatsappModal.form.importRecentMessages\"),type:\"datetime-local\",name:\"importRecentMessages\",inputProps:{max:moment().add(0,\"minutes\").format(\"YYYY-MM-DDTHH:mm\"),min:moment(importOldMessages).format(\"YYYY-MM-DDTHH:mm\")}//min=\"2022-11-06T22:22:55\"\n,InputLabelProps:{shrink:true},error:touched.importRecentMessages&&Boolean(errors.importRecentMessages),helperText:touched.importRecentMessages&&errors.importRecentMessages,variant:\"outlined\",value:moment(importRecentMessages).format(\"YYYY-MM-DDTHH:mm\"),onChange:e=>{setImportRecentMessages(e.target.value);}}))):null),enableImportMessage&&/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},i18n.t(\"whatsappModal.form.importAlert\")),/*#__PURE__*/React.createElement(Box,{display:\"flex\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Grid,{xs:6,md:12,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.token\"),type:\"token\",fullWidth:true// name=\"token\"\n,value:autoToken,variant:\"outlined\",margin:\"dense\",disabled:true})),/*#__PURE__*/React.createElement(Button,{onClick:handleRefreshToken,disabled:isSubmitting,className:classes.tokenRefresh,variant:\"text\",startIcon:/*#__PURE__*/React.createElement(Autorenew,{style:{marginLeft:5,color:\"green\"}})}),/*#__PURE__*/React.createElement(Button,{onClick:handleCopyToken,className:classes.tokenRefresh,variant:\"text\",startIcon:/*#__PURE__*/React.createElement(FileCopy,{style:{color:copied?\"blue\":\"inherit\"}})})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,i18n.t(\"whatsappModal.form.queueRedirection\")),/*#__PURE__*/React.createElement(\"p\",null,i18n.t(\"whatsappModal.form.queueRedirectionDesc\")),/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:6,md:6,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true},/*#__PURE__*/React.createElement(InputLabel,{id:\"sendIdQueue-selection-label\"},i18n.t(\"whatsappModal.form.sendIdQueue\")),/*#__PURE__*/React.createElement(Field,{as:Select,name:\"sendIdQueue\",id:\"sendIdQueue\",value:values.sendIdQueue||'0',label:i18n.t(\"whatsappModal.form.sendIdQueue\"),placeholder:i18n.t(\"whatsappModal.form.sendIdQueue\"),labelId:\"sendIdQueue-selection-label\"},/*#__PURE__*/React.createElement(MenuItem,{value:0},\"\\xA0\"),queues.map(queue=>/*#__PURE__*/React.createElement(MenuItem,{key:queue.id,value:queue.id},queue.name))))),/*#__PURE__*/React.createElement(Grid,{xs:6,md:6,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeSendQueue\"),fullWidth:true,name:\"timeSendQueue\",variant:\"outlined\",margin:\"dense\",error:touched.timeSendQueue&&Boolean(errors.timeSendQueue),helperText:touched.timeSendQueue&&errors.timeSendQueue})))))),/*#__PURE__*/React.createElement(TabPanel,{className:classes.container,value:tab,name:\"integrations\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(QueueSelect,{selectedQueueIds:selectedQueueIds,onChange:selectedIds=>handleChangeQueue(selectedIds)}),/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",className:classes.FormControl,fullWidth:true},/*#__PURE__*/React.createElement(InputLabel,{id:\"integrationId-selection-label\"},i18n.t(\"queueModal.form.integrationId\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"queueModal.form.integrationId\"),name:\"integrationId\",id:\"integrationId\",variant:\"outlined\",margin:\"dense\",placeholder:i18n.t(\"queueModal.form.integrationId\"),labelId:\"integrationId-selection-label\"},/*#__PURE__*/React.createElement(MenuItem,{value:null},\"Desabilitado\"),integrations.map(integration=>/*#__PURE__*/React.createElement(MenuItem,{key:integration.id,value:integration.id},integration.name)))),/*#__PURE__*/React.createElement(FormControl,{margin:\"dense\",variant:\"outlined\",fullWidth:true},/*#__PURE__*/React.createElement(InputLabel,null,i18n.t(\"whatsappModal.form.prompt\")),/*#__PURE__*/React.createElement(Select,{labelId:\"dialog-select-prompt-label\",id:\"dialog-select-prompt\",name:\"promptId\",value:selectedPrompt||\"\",onChange:handleChangePrompt,label:i18n.t(\"whatsappModal.form.prompt\"),fullWidth:true,MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null}},prompts.map(prompt=>/*#__PURE__*/React.createElement(MenuItem,{key:prompt.id,value:prompt.id},prompt.name)))))),/*#__PURE__*/React.createElement(TabPanel,{className:classes.container,value:tab,name:\"messages\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.greetingMessage\"),type:\"greetingMessage\",multiline:true,rows:4,fullWidth:true,name:\"greetingMessage\",error:touched.greetingMessage&&Boolean(errors.greetingMessage),helperText:touched.greetingMessage&&errors.greetingMessage,variant:\"outlined\",margin:\"dense\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.complationMessage\"),multiline:true,rows:4,fullWidth:true,name:\"complationMessage\",error:touched.complationMessage&&Boolean(errors.complationMessage),helperText:touched.complationMessage&&errors.complationMessage,variant:\"outlined\",margin:\"dense\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.outOfHoursMessage\"),multiline:true,rows:4,fullWidth:true,name:\"outOfHoursMessage\",error:touched.outOfHoursMessage&&Boolean(errors.outOfHoursMessage),helperText:touched.outOfHoursMessage&&errors.outOfHoursMessage,variant:\"outlined\",margin:\"dense\"})))),/*#__PURE__*/React.createElement(TabPanel,{className:classes.container,value:tab,name:\"chatbot\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:6,md:4,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeCreateNewTicket\"),fullWidth:true,name:\"timeCreateNewTicket\",variant:\"outlined\",margin:\"dense\",error:touched.timeCreateNewTicket&&Boolean(errors.timeCreateNewTicket),helperText:touched.timeCreateNewTicket&&errors.timeCreateNewTicket})),/*#__PURE__*/React.createElement(Grid,{xs:6,md:4,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.maxUseBotQueues\"),fullWidth:true,name:\"maxUseBotQueues\",variant:\"outlined\",margin:\"dense\",error:touched.maxUseBotQueues&&Boolean(errors.maxUseBotQueues),helperText:touched.maxUseBotQueues&&errors.maxUseBotQueues})),/*#__PURE__*/React.createElement(Grid,{xs:6,md:4,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeUseBotQueues\"),fullWidth:true,name:\"timeUseBotQueues\",variant:\"outlined\",margin:\"dense\",error:touched.timeUseBotQueues&&Boolean(errors.timeUseBotQueues),helperText:touched.timeUseBotQueues&&errors.timeUseBotQueues}))),/*#__PURE__*/React.createElement(Grid,{spacing:2,container:true},/*#__PURE__*/React.createElement(Grid,{xs:6,md:6,item:true},/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.expiresTicket\"),fullWidth:true,name:\"expiresTicket\",variant:\"outlined\",margin:\"dense\",error:touched.expiresTicket&&Boolean(errors.expiresTicket),helperText:touched.expiresTicket&&errors.expiresTicket})),/*#__PURE__*/React.createElement(Grid,{xs:6,md:6,item:true},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",margin:\"dense\",fullWidth:true,className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"whenExpiresTicket-selection-label\"},i18n.t(\"whatsappModal.form.whenExpiresTicket\")),/*#__PURE__*/React.createElement(Field,{as:Select,label:i18n.t(\"whatsappModal.form.whenExpiresTicket\"),placeholder:i18n.t(\"whatsappModal.form.whenExpiresTicket\"),labelId:\"whenExpiresTicket-selection-label\",id:\"whenExpiresTicket\",name:\"whenExpiresTicket\"},/*#__PURE__*/React.createElement(MenuItem,{value:\"0\"},i18n.t(\"whatsappModal.form.closeLastMessageOptions1\")),/*#__PURE__*/React.createElement(MenuItem,{value:\"1\"},i18n.t(\"whatsappModal.form.closeLastMessageOptions2\")))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.expiresInactiveMessage\"),multiline:true,rows:4,fullWidth:true,name:\"expiresInactiveMessage\",error:touched.expiresInactiveMessage&&Boolean(errors.expiresInactiveMessage),helperText:touched.expiresInactiveMessage&&errors.expiresInactiveMessage,variant:\"outlined\",margin:\"dense\"})),/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.timeInactiveMessage\"),fullWidth:true,name:\"timeInactiveMessage\",variant:\"outlined\",margin:\"dense\",error:touched.timeInactiveMessage&&Boolean(errors.timeInactiveMessage),helperText:touched.timeInactiveMessage&&errors.timeInactiveMessage}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.inactiveMessage\"),multiline:true,rows:4,fullWidth:true,name:\"inactiveMessage\",error:touched.inactiveMessage&&Boolean(errors.inactiveMessage),helperText:touched.inactiveMessage&&errors.inactiveMessage,variant:\"outlined\",margin:\"dense\"})))),/*#__PURE__*/React.createElement(TabPanel,{className:classes.container,value:tab,name:\"nps\"},/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.ratingMessage\"),multiline:true,rows:4,fullWidth:true,name:\"ratingMessage\",error:touched.ratingMessage&&Boolean(errors.ratingMessage),helperText:touched.ratingMessage&&errors.ratingMessage,variant:\"outlined\",margin:\"dense\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.maxUseBotQueuesNPS\"),fullWidth:true,name:\"maxUseBotQueuesNPS\",variant:\"outlined\",margin:\"dense\",error:touched.maxUseBotQueuesNPS&&Boolean(errors.maxUseBotQueuesNPS),helperText:touched.maxUseBotQueuesNPS&&errors.maxUseBotQueuesNPS})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Field,{as:TextField,label:i18n.t(\"whatsappModal.form.expiresTicketNPS\"),fullWidth:true,name:\"expiresTicketNPS\",variant:\"outlined\",margin:\"dense\",error:touched.expiresTicketNPS&&Boolean(errors.expiresTicketNPS),helperText:touched.expiresTicketNPS&&errors.expiresTicketNPS})))),/*#__PURE__*/React.createElement(TabPanel,{className:classes.container,value:tab,name:\"schedules\"},tab===\"schedules\"&&/*#__PURE__*/React.createElement(Paper,{style:{padding:20}},/*#__PURE__*/React.createElement(SchedulesForm,{loading:false,onSubmit:handleSaveSchedules,initialValues:schedules,labelSaveButton:i18n.t(\"whatsappModal.buttons.okAdd\")})))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"secondary\",disabled:isSubmitting,variant:\"outlined\"},i18n.t(\"whatsappModal.buttons.cancel\")),/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"primary\",disabled:isSubmitting,variant:\"contained\",className:classes.btnWrapper},whatsAppId?i18n.t(\"whatsappModal.buttons.okEdit\"):i18n.t(\"whatsappModal.buttons.okAdd\"),isSubmitting&&/*#__PURE__*/React.createElement(CircularProgress,{size:24,className:classes.buttonProgress}))));})));};export default React.memo(WhatsAppModal);","map":{"version":3,"names":["React","useState","useEffect","useRef","Yup","Formik","Form","Field","toast","isNil","DeleteOutlineIcon","makeStyles","green","moment","Dialog","DialogContent","DialogTitle","Button","DialogActions","CircularProgress","FormControl","InputLabel","MenuItem","Select","TextField","Switch","FormControlLabel","Grid","Divider","Tab","Tabs","Paper","Box","api","i18n","toastError","QueueSelect","TabPanel","Autorenew","FileCopy","useCompanySettings","SchedulesForm","useStyles","theme","root","display","flexWrap","gap","multFieldLine","marginTop","marginRight","spacing","btnWrapper","position","importMessage","marginBottom","paddingBottom","paddingTop","padding","border","borderRadius","buttonProgress","color","top","left","marginLeft","textField","flex","tokenRefresh","minWidth","alignItems","justifyContent","SessionSchema","object","shape","name","string","min","max","required","WhatsAppModal","_ref","open","onClose","whatsAppId","classes","autoToken","setAutoToken","inputFileRef","attachment","setAttachment","attachmentName","setAttachmentName","initialState","greetingMessage","complationMessage","outOfHoursMessage","ratingMessage","isDefault","token","maxUseBotQueues","provider","expiresTicket","allowGroup","groupAsTicket","timeUseBotQueues","timeSendQueue","sendIdQueue","expiresTicketNPS","expiresInactiveMessage","timeInactiveMessage","inactiveMessage","maxUseBotQueuesNPS","whenExpiresTicket","timeCreateNewTicket","greetingMediaAttachment","importRecentMessages","importOldMessages","importOldMessagesGroups","integrationId","whatsApp","setWhatsApp","selectedQueueIds","setSelectedQueueIds","queues","setQueues","tab","setTab","enableImportMessage","setEnableImportMessage","setImportOldMessagesGroups","closedTicketsPostImported","setClosedTicketsPostImported","setImportOldMessages","add","format","setImportRecentMessages","copied","setCopied","integrations","setIntegrations","schedulesEnabled","setSchedulesEnabled","schedules","setSchedules","weekday","t","weekdayEn","startTimeA","endTimeA","startTimeB","endTimeB","get","getSetting","selectedPrompt","setSelectedPrompt","prompts","setPrompts","data","err","fetchData","setting","scheduleType","handleEnableImportMessage","e","target","checked","fetchSession","_data$queues","concat","promptId","whatsQueueIds","map","queue","id","queueIntegrations","handleChangeQueue","handleChangePrompt","value","handleSaveWhatsApp","values","generateRandomCode","whatsappData","queueIds","status","warning","autoClose","delete","put","formData","FormData","append","post","success","handleClose","length","charset","code","i","randomIndex","Math","floor","random","charAt","handleRefreshToken","handleCopyToken","navigator","clipboard","writeText","handleSaveSchedules","handleTabChange","event","newValue","handleFileUpload","file","current","files","handleDeleFile","createElement","className","maxWidth","fullWidth","scroll","initialValues","enableReinitialize","validationSchema","onSubmit","actions","setTimeout","setSubmitting","_ref2","touched","errors","isSubmitting","mainPaper","elevation","indicatorColor","textColor","scrollButtons","variant","onChange","label","paper","container","dividers","style","flexDirection","endIcon","onClick","type","accept","ref","click","item","as","autoFocus","error","Boolean","helperText","margin","control","xs","md","formControl","placeholder","labelId","labelPlacement","size","Fragment","inputProps","InputLabelProps","shrink","disabled","startIcon","key","selectedIds","integration","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","prompt","multiline","rows","loading","labelSaveButton","memo"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/WhatsAppModalAdmin/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { toast } from \"react-toastify\";\r\nimport { isNil } from \"lodash\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport moment from \"moment\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Button,\r\n  DialogActions,\r\n  CircularProgress,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Switch,\r\n  FormControlLabel,\r\n  Grid,\r\n  Divider,\r\n  Tab,\r\n  Tabs,\r\n  Paper,\r\n  Box\r\n} from \"@material-ui/core\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport QueueSelect from \"../QueueSelect\";\r\nimport TabPanel from \"../TabPanel\";\r\nimport { Autorenew, FileCopy } from \"@material-ui/icons\";\r\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\r\nimport SchedulesForm from \"../SchedulesForm\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    gap: 4\r\n  },\r\n\r\n  multFieldLine: {\r\n    marginTop: 12,\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  btnWrapper: {\r\n    position: \"relative\",\r\n  },\r\n  importMessage: {\r\n    marginTop: 12,\r\n    marginBottom: 12,\r\n    paddingBottom: 20,\r\n    paddingTop: 3,\r\n    padding: 12,\r\n    border: \"solid grey 2px\",\r\n    borderRadius: 4,\r\n    display: \"flex\",\r\n    \"& > *:not(:last-child)\": {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n  },\r\n\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    marginTop: -12,\r\n    marginLeft: -12,\r\n  },\r\n\r\n  textField: {\r\n    marginRight: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n  tokenRefresh: {\r\n    minWidth: \"auto\",\r\n    display: \"flex\", // Torna o botão flexível para alinhar o conteúdo\r\n    alignItems: \"center\", // Alinha verticalmente ao centro\r\n    justifyContent: \"center\", // Alinha horizontalmente ao centro\r\n  },\r\n}));\r\n\r\nconst SessionSchema = Yup.object().shape({\r\n  name: Yup.string()\r\n    .min(2, \"Too Short!\")\r\n    .max(50, \"Too Long!\")\r\n    .required(\"Required\"),\r\n});\r\n\r\nconst WhatsAppModal = ({ open, onClose, whatsAppId }) => {\r\n  const classes = useStyles();\r\n  const [autoToken, setAutoToken] = useState(\"\");\r\n\r\n  const inputFileRef = useRef(null);\r\n\r\n  const [attachment, setAttachment] = useState(null)\r\n  const [attachmentName, setAttachmentName] = useState('')\r\n\r\n  const initialState = {\r\n    name: \"\",\r\n    greetingMessage: \"\",\r\n    complationMessage: \"\",\r\n    outOfHoursMessage: \"\",\r\n    ratingMessage: \"\",\r\n    isDefault: false,\r\n    token: \"\",\r\n    maxUseBotQueues: 3,\r\n    provider: \"beta\",\r\n    expiresTicket: 0,\r\n    allowGroup: false,\r\n    groupAsTicket: \"disabled\",\r\n    timeUseBotQueues: '0',\r\n    timeSendQueue: '0',\r\n    sendIdQueue: 0,\r\n    expiresTicketNPS: '0',\r\n    expiresInactiveMessage: \"\",\r\n    timeInactiveMessage: \"\",\r\n    inactiveMessage: \"\",\r\n    maxUseBotQueuesNPS: 3,\r\n    whenExpiresTicket: 0,\r\n    timeCreateNewTicket: 0,\r\n    greetingMediaAttachment: \"\",\r\n    importRecentMessages: \"\",\r\n    importOldMessages: \"\",\r\n    importOldMessagesGroups: \"\",\r\n    integrationId: \"\",\r\n  };\r\n  const [whatsApp, setWhatsApp] = useState(initialState);\r\n  const [selectedQueueIds, setSelectedQueueIds] = useState([]);\r\n  const [queues, setQueues] = useState([]);\r\n  const [tab, setTab] = useState(\"general\");\r\n  const [enableImportMessage, setEnableImportMessage] = useState(false);\r\n  const [importOldMessagesGroups, setImportOldMessagesGroups] = useState(false);\r\n  const [closedTicketsPostImported, setClosedTicketsPostImported] = useState(false);\r\n  const [importOldMessages, setImportOldMessages] = useState(moment().add(-1, \"days\").format(\"YYYY-MM-DDTHH:mm\"));\r\n  const [importRecentMessages, setImportRecentMessages] = useState(moment().add(-1, \"minutes\").format(\"YYYY-MM-DDTHH:mm\"));\r\n  const [copied, setCopied] = useState(false);\r\n  const [integrations, setIntegrations] = useState([]);\r\n  const [schedulesEnabled, setSchedulesEnabled] = useState(false);\r\n\r\n\r\n  const [schedules, setSchedules] = useState([\r\n    { weekday: i18n.t(\"queueModal.serviceHours.monday\"), weekdayEn: \"monday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n    { weekday: i18n.t(\"queueModal.serviceHours.tuesday\"), weekdayEn: \"tuesday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n    { weekday: i18n.t(\"queueModal.serviceHours.wednesday\"), weekdayEn: \"wednesday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n    { weekday: i18n.t(\"queueModal.serviceHours.thursday\"), weekdayEn: \"thursday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n    { weekday: i18n.t(\"queueModal.serviceHours.friday\"), weekdayEn: \"friday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n    { weekday: \"Sábado\", weekdayEn: \"saturday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n    { weekday: \"Domingo\", weekdayEn: \"sunday\", startTimeA: \"08:00\", endTimeA: \"12:00\", startTimeB: \"13:00\", endTimeB: \"18:00\", },\r\n  ]);\r\n\r\n  const { get: getSetting } = useCompanySettings();\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [prompts, setPrompts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        setPrompts(data.prompts);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n\r\n    const fetchData = async () => {\r\n\r\n      const setting = await getSetting({\r\n        \"column\": \"scheduleType\"\r\n      });\r\n      setSchedulesEnabled(setting.scheduleType === \"connection\");\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleEnableImportMessage = async (e) => {\r\n    setEnableImportMessage(e.target.checked);\r\n\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchSession = async () => {\r\n      if (!whatsAppId) return;\r\n\r\n      try {\r\n        const { data } = await api.get(`whatsapp-admin/${whatsAppId}?session=0`);\r\n        setWhatsApp(data);\r\n        setAttachmentName(data.greetingMediaAttachment);\r\n        setAutoToken(data.token);\r\n        data.promptId ? setSelectedPrompt(data.promptId) : setSelectedPrompt(null);\r\n        const whatsQueueIds = data.queues?.map((queue) => queue.id);\r\n        setSelectedQueueIds(whatsQueueIds);\r\n        setSchedules(data.schedules)\r\n        if (data?.importOldMessages) {\r\n          setEnableImportMessage(true);\r\n          setImportOldMessages(data?.importOldMessages);\r\n          setImportRecentMessages(data?.importRecentMessages);\r\n          setClosedTicketsPostImported(data?.closedTicketsPostImported);\r\n          setImportOldMessagesGroups(data?.importOldMessagesGroups);\r\n        }\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, [whatsAppId]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/queue\");\r\n        setQueues(data);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const { data } = await api.get(\"/queueIntegration\");\r\n\r\n        setIntegrations(data.queueIntegrations);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleChangeQueue = (e) => {\r\n    setSelectedQueueIds(e);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleChangePrompt = (e) => {\r\n    setSelectedPrompt(e.target.value);\r\n    setSelectedQueueIds([]);\r\n  };\r\n\r\n  const handleSaveWhatsApp = async (values) => {\r\n    if (!whatsAppId) setAutoToken(generateRandomCode(30));\r\n   \r\n    if ((!isNil(values.ratingMessage) && values.ratingMessage !== '') && (values.expiresTicketNPS === '0' || values.expiresTicketNPS === '' || values.expiresTicketNPS === 0)) {\r\n      toastError(i18n.t(\"whatsappModal.errorExpiresNPS\"));\r\n      return;\r\n    }\r\n\r\n    if (!isNil(values.ratingMessage) && (values.expiresTicketNPS === '0' || values.expiresTicketNPS === '')) {\r\n      toastError(i18n.t(\"whatsappModal.errorExpiresNPS\"));\r\n      return;\r\n    }\r\n    if (values.timeSendQueue === '') values.timeSendQueue = '0'\r\n    \r\n    if  ((values.sendIdQueue === 0 || values.sendIdQueue === '' || isNil(values.sendIdQueue)) &&  (values.timeSendQueue !== 0 && values.timeSendQueue !== '0')) {\r\n      toastError(i18n.t(\"whatsappModal.errorSendQueue\"));\r\n      return;\r\n    }\r\n\r\n    const whatsappData = {\r\n      ...values, queueIds: selectedQueueIds,\r\n      importOldMessages: enableImportMessage ? importOldMessages : null,\r\n      importRecentMessages: enableImportMessage ? importRecentMessages : null,\r\n      importOldMessagesGroups: importOldMessagesGroups ? importOldMessagesGroups : null,\r\n      closedTicketsPostImported: closedTicketsPostImported ? closedTicketsPostImported : null,\r\n      token: autoToken ? autoToken : null, schedules,\r\n      promptId: selectedPrompt ? selectedPrompt : null\r\n    };\r\n    delete whatsappData[\"queues\"];\r\n    delete whatsappData[\"session\"];\r\n\r\n    try {\r\n      if (whatsAppId) {\r\n        if (whatsAppId && enableImportMessage && whatsApp?.status === \"CONNECTED\") {\r\n          toast.warning(\r\n            i18n.t(\"userModal.warning.updateImage\"),\r\n            { autoClose: false }\r\n          );\r\n          try {\r\n            setWhatsApp({ ...whatsApp, status: \"qrcode\" });\r\n            await api.delete(`/whatsappsession/${whatsApp.id}`);\r\n          } catch (err) {\r\n            toastError(err);\r\n          }\r\n        }\r\n\r\n        await api.put(`/whatsapp/${whatsAppId}`, whatsappData);\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/whatsapp/${whatsAppId}/media-upload`, formData);\r\n        }\r\n        if (!attachmentName && (whatsApp.greetingMediaAttachment !== null)) {\r\n          await api.delete(`/whatsapp/${whatsAppId}/media-upload`);\r\n        }\r\n      } else {\r\n        const { data } = await api.post(\"/whatsapp\", whatsappData);\r\n        if (attachment != null) {\r\n          const formData = new FormData();\r\n          formData.append(\"file\", attachment);\r\n          await api.post(`/whatsapp/${data.id}/media-upload`, formData);\r\n        }\r\n      }\r\n      toast.success(i18n.t(\"whatsappModal.success\"));\r\n\r\n      handleClose();\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  function generateRandomCode(length) {\r\n    const charset = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyvz0123456789\";\r\n    let code = \"\";\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      const randomIndex = Math.floor(Math.random() * charset.length);\r\n      code += charset.charAt(randomIndex);\r\n    }\r\n    return code;\r\n  }\r\n\r\n  const handleRefreshToken = () => {\r\n    setAutoToken(generateRandomCode(30));\r\n  }\r\n\r\n  const handleCopyToken = () => {\r\n    navigator.clipboard.writeText(autoToken); // Copia o token para a área de transferência    \r\n    setCopied(true); // Define o estado de cópia como verdadeiro\r\n  };\r\n\r\n  const handleSaveSchedules = async (values) => {\r\n    toast.success(\"Clique em salvar para registar as alterações\");\r\n    setSchedules(values);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n    setWhatsApp(initialState);\r\n    // inputFileRef.current.value = null\r\n    setAttachment(null)\r\n    setAttachmentName(\"\")\r\n    setCopied(false);\r\n  };\r\n\r\n  const handleTabChange = (event, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const handleFileUpload = () => {\r\n    const file = inputFileRef.current.files[0];\r\n    setAttachment(file)\r\n    setAttachmentName(file.name)\r\n    inputFileRef.current.value = null\r\n  };\r\n\r\n  const handleDeleFile = () => {\r\n    setAttachment(null)\r\n    setAttachmentName(null)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"xl\"\r\n        fullWidth\r\n        scroll=\"paper\"\r\n      >\r\n        <DialogTitle>\r\n          {whatsAppId\r\n            ? i18n.t(\"whatsappModal.title.edit\")\r\n            : i18n.t(\"whatsappModal.title.add\")}\r\n        </DialogTitle>\r\n        <Formik\r\n          initialValues={whatsApp}\r\n          enableReinitialize={true}\r\n          validationSchema={SessionSchema}\r\n          onSubmit={(values, actions) => {\r\n            setTimeout(() => {\r\n              handleSaveWhatsApp(values);\r\n              actions.setSubmitting(false);\r\n            }, 400);\r\n          }}\r\n        >\r\n          {({ values, touched, errors, isSubmitting }) => (\r\n            <Form>\r\n              <Paper className={classes.mainPaper} elevation={1}>\r\n                <Tabs\r\n                  value={tab}\r\n                  indicatorColor=\"primary\"\r\n                  textColor=\"primary\"\r\n                  scrollButtons=\"on\"\r\n                  variant=\"scrollable\"\r\n                  onChange={handleTabChange}\r\n                  className={classes.tab}\r\n                >\r\n                  <Tab label={i18n.t(\"whatsappModal.tabs.general\")} value={\"general\"} />\r\n                  <Tab label={i18n.t(\"whatsappModal.tabs.integrations\")} value={\"integrations\"} />\r\n                  <Tab label={i18n.t(\"whatsappModal.tabs.messages\")} value={\"messages\"} />\r\n                  <Tab label=\"Chatbot\" value={\"chatbot\"} />\r\n                  <Tab label={i18n.t(\"whatsappModal.tabs.assessments\")} value={\"nps\"} />\r\n                  {schedulesEnabled && <Tab label={i18n.t(\"whatsappModal.tabs.schedules\")} value={\"schedules\"} />}\r\n                </Tabs>\r\n              </Paper>\r\n              <Paper className={classes.paper} elevation={0}>\r\n                <TabPanel\r\n                  className={classes.container}\r\n                  value={tab}\r\n                  name={\"general\"}\r\n                >\r\n                  <DialogContent dividers>\r\n                    {attachmentName && (\r\n                      <div\r\n                        style={{ display: 'flex', flexDirection: 'row-reverse' }}\r\n                      >\r\n                        <Button\r\n                          variant='outlined'\r\n                          color=\"primary\"\r\n                          endIcon={<DeleteOutlineIcon />}\r\n                          onClick={handleDeleFile}\r\n                        >\r\n                          {attachmentName}\r\n                        </Button>\r\n                      </div>\r\n                    )}\r\n                    <div\r\n                      style={{ display: 'flex', flexDirection: \"column-reverse\" }}\r\n                    >\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"video/*,image/*\"\r\n                        ref={inputFileRef}\r\n                        style={{ display: 'none' }}\r\n                        onChange={handleFileUpload}\r\n                      />\r\n                      <Button variant=\"contained\" color=\"primary\" onClick={() => inputFileRef.current.click()}>\r\n                        {i18n.t(\"userModal.buttons.addImage\")}\r\n                      </Button>\r\n                    </div>\r\n                    {/* NOME E PADRAO */}\r\n                    <div className={classes.multFieldLine}>\r\n                      <Grid spacing={2} container>\r\n                        <Grid item>\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"whatsappModal.form.name\")}\r\n                            autoFocus\r\n                            name=\"name\"\r\n                            error={touched.name && Boolean(errors.name)}\r\n                            helperText={touched.name && errors.name}\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            className={classes.textField}\r\n                          />\r\n                        </Grid>\r\n                        <Grid style={{ paddingTop: 15 }} item>\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Field\r\n                                as={Switch}\r\n                                color=\"primary\"\r\n                                name=\"isDefault\"\r\n                                checked={values.isDefault}\r\n                              />\r\n                            }\r\n                            label={i18n.t(\"whatsappModal.form.default\")}\r\n                          />\r\n                          <FormControlLabel\r\n                            control={\r\n                              <Field\r\n                                as={Switch}\r\n                                color=\"primary\"\r\n                                name=\"allowGroup\"\r\n                                checked={values.allowGroup}\r\n                              />\r\n                            }\r\n                            label={i18n.t(\"whatsappModal.form.group\")}\r\n                          />\r\n                        </Grid>\r\n                        <Grid xs={6} md={4} item>\r\n                          <FormControl\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            fullWidth\r\n                            className={classes.formControl}\r\n                          >\r\n                            <InputLabel id=\"groupAsTicket-selection-label\">{i18n.t(\"whatsappModal.form.groupAsTicket\")}</InputLabel>\r\n                            <Field\r\n                              as={Select}\r\n                              label={i18n.t(\"whatsappModal.form.groupAsTicket\")}\r\n                              placeholder={i18n.t(\"whatsappModal.form.groupAsTicket\")}\r\n                              labelId=\"groupAsTicket-selection-label\"\r\n                              id=\"groupAsTicket\"\r\n                              name=\"groupAsTicket\"\r\n                            >\r\n                              <MenuItem value={\"disabled\"}>{i18n.t(\"whatsappModal.menuItem.disabled\")}</MenuItem>\r\n                              <MenuItem value={\"enabled\"}>{i18n.t(\"whatsappModal.menuItem.enabled\")}</MenuItem>\r\n                            </Field>\r\n                          </FormControl>\r\n                        </Grid>\r\n                      </Grid>\r\n                    </div>\r\n\r\n\r\n                    <div className={classes.importMessage}>\r\n                      <div className={classes.multFieldLine}>\r\n                        <FormControlLabel\r\n                          style={{ marginRight: 7, color: \"gray\" }}\r\n                          label={i18n.t(\"whatsappModal.form.importOldMessagesEnable\")}\r\n                          labelPlacement=\"end\"\r\n                          control={\r\n                            <Switch\r\n                              size=\"medium\"\r\n                              checked={enableImportMessage}\r\n                              onChange={handleEnableImportMessage}\r\n                              name=\"importOldMessagesEnable\"\r\n                              color=\"primary\"\r\n                            />\r\n                          }\r\n                        />\r\n\r\n                        {enableImportMessage ? (\r\n                          <>\r\n                            <FormControlLabel\r\n                              style={{ marginRight: 7, color: \"gray\" }}\r\n                              label={i18n.t(\r\n                                \"whatsappModal.form.importOldMessagesGroups\"\r\n                              )}\r\n                              labelPlacement=\"end\"\r\n                              control={\r\n                                <Switch\r\n                                  size=\"medium\"\r\n                                  checked={importOldMessagesGroups}\r\n                                  onChange={(e) =>\r\n                                    setImportOldMessagesGroups(e.target.checked)\r\n                                  }\r\n                                  name=\"importOldMessagesGroups\"\r\n                                  color=\"primary\"\r\n                                />\r\n                              }\r\n                            />\r\n\r\n                            <FormControlLabel\r\n                              style={{ marginRight: 7, color: \"gray\" }}\r\n                              label={i18n.t(\r\n                                \"whatsappModal.form.closedTicketsPostImported\"\r\n                              )}\r\n                              labelPlacement=\"end\"\r\n                              control={\r\n                                <Switch\r\n                                  size=\"medium\"\r\n                                  checked={closedTicketsPostImported}\r\n                                  onChange={(e) =>\r\n                                    setClosedTicketsPostImported(e.target.checked)\r\n                                  }\r\n                                  name=\"closedTicketsPostImported\"\r\n                                  color=\"primary\"\r\n                                />\r\n                              }\r\n                            />\r\n                          </>) : <></>}\r\n                      </div>\r\n\r\n                      {enableImportMessage ? (\r\n                        <Grid style={{ marginTop: 18 }} container spacing={3}>\r\n                          <Grid item xs={6}>\r\n                            <Field\r\n                              fullWidth\r\n                              as={TextField}\r\n                              label={i18n.t(\"whatsappModal.form.importOldMessages\")}\r\n                              type=\"datetime-local\"\r\n                              name=\"importOldMessages\"\r\n                              inputProps={{\r\n                                max: moment()\r\n                                  .add(0, \"minutes\")\r\n                                  .format(\"YYYY-MM-DDTHH:mm\"),\r\n                                min: moment()\r\n                                  .add(-2, \"years\")\r\n                                  .format(\"YYYY-MM-DDTHH:mm\"),\r\n                              }}\r\n                              //min=\"2022-11-06T22:22:55\"\r\n                              InputLabelProps={{\r\n                                shrink: true,\r\n                              }}\r\n                              error={\r\n                                touched.importOldMessages &&\r\n                                Boolean(errors.importOldMessages)\r\n                              }\r\n                              helperText={\r\n                                touched.importOldMessages && errors.importOldMessages\r\n                              }\r\n                              variant=\"outlined\"\r\n                              value={moment(importOldMessages).format(\r\n                                \"YYYY-MM-DDTHH:mm\"\r\n                              )}\r\n                              onChange={(e) => {\r\n                                setImportOldMessages(e.target.value);\r\n                              }}\r\n                            />\r\n                          </Grid>\r\n                          <Grid item xs={6}>\r\n                            <Field\r\n                              fullWidth\r\n                              as={TextField}\r\n                              label={i18n.t(\"whatsappModal.form.importRecentMessages\")}\r\n                              type=\"datetime-local\"\r\n                              name=\"importRecentMessages\"\r\n                              inputProps={{\r\n                                max: moment()\r\n                                  .add(0, \"minutes\")\r\n                                  .format(\"YYYY-MM-DDTHH:mm\"),\r\n                                min: moment(importOldMessages).format(\r\n                                  \"YYYY-MM-DDTHH:mm\"\r\n                                )\r\n                              }}\r\n                              //min=\"2022-11-06T22:22:55\"\r\n                              InputLabelProps={{\r\n                                shrink: true,\r\n                              }}\r\n                              error={\r\n                                touched.importRecentMessages &&\r\n                                Boolean(errors.importRecentMessages)\r\n                              }\r\n                              helperText={\r\n                                touched.importRecentMessages && errors.importRecentMessages\r\n                              }\r\n                              variant=\"outlined\"\r\n                              value={moment(importRecentMessages).format(\r\n                                \"YYYY-MM-DDTHH:mm\"\r\n                              )}\r\n                              onChange={(e) => {\r\n                                setImportRecentMessages(e.target.value);\r\n                              }}\r\n                            />\r\n                          </Grid>\r\n                        </Grid>\r\n\r\n                      ) : null}\r\n                    </div>\r\n                    {enableImportMessage && (\r\n                      <span style={{ color: \"red\" }}>\r\n                        {i18n.t(\"whatsappModal.form.importAlert\")}\r\n                      </span>\r\n                    )}\r\n\r\n\r\n                    {/* TOKEN */}\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Grid xs={6} md={12} item>\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"whatsappModal.form.token\")}\r\n                          type=\"token\"\r\n                          fullWidth\r\n                          // name=\"token\"\r\n                          value={autoToken}\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                          disabled\r\n                        />\r\n                      </Grid>\r\n                      <Button\r\n                        onClick={handleRefreshToken}\r\n                        disabled={isSubmitting}\r\n                        className={classes.tokenRefresh}\r\n                        variant=\"text\"\r\n                        startIcon={<Autorenew style={{ marginLeft: 5, color: \"green\" }} />}\r\n                      />\r\n                      <Button\r\n                        onClick={handleCopyToken}\r\n                        className={classes.tokenRefresh}\r\n                        variant=\"text\"\r\n                        startIcon={<FileCopy style={{ color: copied ? \"blue\" : \"inherit\" }} />}\r\n                      />\r\n                    </Box>\r\n\r\n                    <div>\r\n                      <h3>{i18n.t(\"whatsappModal.form.queueRedirection\")}</h3>\r\n                      <p>{i18n.t(\"whatsappModal.form.queueRedirectionDesc\")}</p>\r\n                      <Grid spacing={2} container>\r\n\r\n                        <Grid xs={6} md={6} item>\r\n                          <FormControl\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            className={classes.FormControl}\r\n                            fullWidth\r\n                          >\r\n                            <InputLabel id=\"sendIdQueue-selection-label\">\r\n                              {i18n.t(\"whatsappModal.form.sendIdQueue\")}\r\n                            </InputLabel>\r\n                            <Field\r\n                              as={Select}\r\n                              name=\"sendIdQueue\"\r\n                              id=\"sendIdQueue\"\r\n                              value={values.sendIdQueue || '0'}\r\n                              label={i18n.t(\"whatsappModal.form.sendIdQueue\")}\r\n                              placeholder={i18n.t(\"whatsappModal.form.sendIdQueue\")}\r\n                              labelId=\"sendIdQueue-selection-label\"\r\n                            >\r\n                              <MenuItem value={0}>&nbsp;</MenuItem>\r\n                              {queues.map(queue => (\r\n                                <MenuItem key={queue.id} value={queue.id}>\r\n                                  {queue.name}\r\n                                </MenuItem>\r\n                              ))}\r\n                            </Field>\r\n                          </FormControl>\r\n\r\n                        </Grid>\r\n\r\n                        <Grid xs={6} md={6} item>\r\n                          <Field\r\n                            as={TextField}\r\n                            label={i18n.t(\"whatsappModal.form.timeSendQueue\")}\r\n                            fullWidth\r\n                            name=\"timeSendQueue\"\r\n                            variant=\"outlined\"\r\n                            margin=\"dense\"\r\n                            error={touched.timeSendQueue && Boolean(errors.timeSendQueue)}\r\n                            helperText={touched.timeSendQueue && errors.timeSendQueue}\r\n                          />\r\n                        </Grid>\r\n\r\n                      </Grid>\r\n                    </div>\r\n                  </DialogContent>\r\n                </TabPanel>\r\n                <TabPanel\r\n                  className={classes.container}\r\n                  value={tab}\r\n                  name={\"integrations\"}\r\n                >\r\n                  <DialogContent dividers>\r\n                    {/* FILAS */}\r\n                    <QueueSelect\r\n                      selectedQueueIds={selectedQueueIds}\r\n                      onChange={(selectedIds) => handleChangeQueue(selectedIds)}\r\n                    />\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      className={classes.FormControl}\r\n                      fullWidth\r\n                    >\r\n                      <InputLabel id=\"integrationId-selection-label\">\r\n                        {i18n.t(\"queueModal.form.integrationId\")}\r\n                      </InputLabel>\r\n                      <Field\r\n                        as={Select}\r\n                        label={i18n.t(\"queueModal.form.integrationId\")}\r\n                        name=\"integrationId\"\r\n                        id=\"integrationId\"\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        placeholder={i18n.t(\"queueModal.form.integrationId\")}\r\n                        labelId=\"integrationId-selection-label\"                        >\r\n                        <MenuItem value={null} >{\"Desabilitado\"}</MenuItem>\r\n                        {integrations.map((integration) => (\r\n                          <MenuItem key={integration.id} value={integration.id}>\r\n                            {integration.name}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </Field>\r\n                    </FormControl>\r\n                    <FormControl\r\n                      margin=\"dense\"\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                    >\r\n                      <InputLabel>\r\n                        {i18n.t(\"whatsappModal.form.prompt\")}\r\n                      </InputLabel>\r\n                      <Select\r\n                        labelId=\"dialog-select-prompt-label\"\r\n                        id=\"dialog-select-prompt\"\r\n                        name=\"promptId\"\r\n                        value={selectedPrompt || \"\"}\r\n                        onChange={handleChangePrompt}\r\n                        label={i18n.t(\"whatsappModal.form.prompt\")}\r\n                        fullWidth\r\n                        MenuProps={{\r\n                          anchorOrigin: {\r\n                            vertical: \"bottom\",\r\n                            horizontal: \"left\",\r\n                          },\r\n                          transformOrigin: {\r\n                            vertical: \"top\",\r\n                            horizontal: \"left\",\r\n                          },\r\n                          getContentAnchorEl: null,\r\n                        }}\r\n                      >\r\n                        {prompts.map((prompt) => (\r\n                          <MenuItem\r\n                            key={prompt.id}\r\n                            value={prompt.id}\r\n                          >\r\n                            {prompt.name}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </Select>\r\n                    </FormControl>\r\n                  </DialogContent>\r\n                </TabPanel>\r\n                <TabPanel\r\n                  className={classes.container}\r\n                  value={tab}\r\n                  name={\"messages\"}\r\n                >\r\n                  <DialogContent dividers>\r\n                    {/* MENSAGEM DE SAUDAÇÃO */}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.greetingMessage\")}\r\n                        type=\"greetingMessage\"\r\n                        multiline\r\n                        rows={4}\r\n                        fullWidth\r\n                        name=\"greetingMessage\"\r\n                        error={\r\n                          touched.greetingMessage && Boolean(errors.greetingMessage)\r\n                        }\r\n                        helperText={\r\n                          touched.greetingMessage && errors.greetingMessage\r\n                        }\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* MENSAGEM DE CONCLUSÃO */}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.complationMessage\")}\r\n                        multiline\r\n                        rows={4}\r\n                        fullWidth\r\n                        name=\"complationMessage\"\r\n                        error={\r\n                          touched.complationMessage &&\r\n                          Boolean(errors.complationMessage)\r\n                        }\r\n                        helperText={\r\n                          touched.complationMessage && errors.complationMessage\r\n                        }\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* MENSAGEM DE FORA DE EXPEDIENTE */}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.outOfHoursMessage\")}\r\n                        multiline\r\n                        rows={4}\r\n                        fullWidth\r\n                        name=\"outOfHoursMessage\"\r\n                        error={touched.outOfHoursMessage && Boolean(errors.outOfHoursMessage)}\r\n                        helperText={touched.outOfHoursMessage && errors.outOfHoursMessage}\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                    </div>\r\n                  </DialogContent>\r\n                </TabPanel>\r\n\r\n                <TabPanel\r\n                  className={classes.container}\r\n                  value={tab}\r\n                  name={\"chatbot\"}\r\n                >\r\n                  <DialogContent dividers>\r\n                    <Grid spacing={2} container>\r\n                      {/* TEMPO PARA CRIAR NOVO TICKET */}\r\n                      <Grid xs={6} md={4} item>\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"whatsappModal.form.timeCreateNewTicket\")}\r\n                          fullWidth\r\n                          name=\"timeCreateNewTicket\"\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                          error={touched.timeCreateNewTicket && Boolean(errors.timeCreateNewTicket)}\r\n                          helperText={touched.timeCreateNewTicket && errors.timeCreateNewTicket}\r\n                        />\r\n                      </Grid>\r\n\r\n                      {/* QUANTIDADE MÁXIMA DE VEZES QUE O CHATBOT VAI SER ENVIADO */}\r\n                      <Grid xs={6} md={4} item>\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"whatsappModal.form.maxUseBotQueues\")}\r\n                          fullWidth\r\n                          name=\"maxUseBotQueues\"\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                          error={touched.maxUseBotQueues && Boolean(errors.maxUseBotQueues)}\r\n                          helperText={touched.maxUseBotQueues && errors.maxUseBotQueues}\r\n                        />\r\n                      </Grid>\r\n                      {/* TEMPO PARA ENVIO DO CHATBOT */}\r\n                      <Grid xs={6} md={4} item>\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"whatsappModal.form.timeUseBotQueues\")}\r\n                          fullWidth\r\n                          name=\"timeUseBotQueues\"\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                          error={touched.timeUseBotQueues && Boolean(errors.timeUseBotQueues)}\r\n                          helperText={touched.timeUseBotQueues && errors.timeUseBotQueues}\r\n                        />\r\n                      </Grid>\r\n                    </Grid>\r\n                    <Grid spacing={2} container>\r\n                      {/* ENCERRAR CHATS ABERTOS APÓS X HORAS */}\r\n                      <Grid xs={6} md={6} item>\r\n                        <Field\r\n                          as={TextField}\r\n                          label={i18n.t(\"whatsappModal.form.expiresTicket\")}\r\n                          fullWidth\r\n                          name=\"expiresTicket\"\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                          error={touched.expiresTicket && Boolean(errors.expiresTicket)}\r\n                          helperText={touched.expiresTicket && errors.expiresTicket}\r\n                        />\r\n                      </Grid>\r\n                      {/* TEMPO PARA ENVIO DO CHATBOT */}\r\n                      <Grid xs={6} md={6} item>\r\n                        <FormControl\r\n                          variant=\"outlined\"\r\n                          margin=\"dense\"\r\n                          fullWidth\r\n                          className={classes.formControl}\r\n                        >\r\n                          <InputLabel id=\"whenExpiresTicket-selection-label\">\r\n                            {i18n.t(\"whatsappModal.form.whenExpiresTicket\")}\r\n                          </InputLabel>\r\n                          <Field\r\n                            as={Select}\r\n                            label={i18n.t(\"whatsappModal.form.whenExpiresTicket\")}\r\n                            placeholder={i18n.t(\r\n                              \"whatsappModal.form.whenExpiresTicket\"\r\n                            )}\r\n                            labelId=\"whenExpiresTicket-selection-label\"\r\n                            id=\"whenExpiresTicket\"\r\n                            name=\"whenExpiresTicket\"\r\n                          >\r\n                            <MenuItem value={\"0\"}>{i18n.t(\"whatsappModal.form.closeLastMessageOptions1\")}</MenuItem>\r\n                            <MenuItem value={\"1\"}>{i18n.t(\"whatsappModal.form.closeLastMessageOptions2\")}</MenuItem>\r\n                          </Field>\r\n                        </FormControl>\r\n                      </Grid>\r\n                    </Grid>\r\n                    {/* MENSAGEM POR INATIVIDADE*/}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.expiresInactiveMessage\")}\r\n                        multiline\r\n                        rows={4}\r\n                        fullWidth\r\n                        name=\"expiresInactiveMessage\"\r\n                        error={touched.expiresInactiveMessage && Boolean(errors.expiresInactiveMessage)}\r\n                        helperText={touched.expiresInactiveMessage && errors.expiresInactiveMessage}\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* TEMPO PARA ENVIO DE MENSAGEM POR INATIVIDADE */}\r\n                    <Field\r\n                      as={TextField}\r\n                      label={i18n.t(\"whatsappModal.form.timeInactiveMessage\")}\r\n                      fullWidth\r\n                      name=\"timeInactiveMessage\"\r\n                      variant=\"outlined\"\r\n                      margin=\"dense\"\r\n                      error={touched.timeInactiveMessage && Boolean(errors.timeInactiveMessage)}\r\n                      helperText={touched.timeInactiveMessage && errors.timeInactiveMessage}\r\n                    />\r\n                    {/* MENSAGEM POR INATIVIDADE*/}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.inactiveMessage\")}\r\n                        multiline\r\n                        rows={4}\r\n                        fullWidth\r\n                        name=\"inactiveMessage\"\r\n                        error={touched.inactiveMessage && Boolean(errors.inactiveMessage)}\r\n                        helperText={touched.inactiveMessage && errors.inactiveMessage}\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                    </div>\r\n                  </DialogContent>\r\n                </TabPanel>\r\n                <TabPanel\r\n                  className={classes.container}\r\n                  value={tab}\r\n                  name={\"nps\"}\r\n                >\r\n                  <DialogContent dividers>\r\n                    {/* MENSAGEM DE AVALIAÇAO*/}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.ratingMessage\")}\r\n                        multiline\r\n                        rows={4}\r\n                        fullWidth\r\n                        name=\"ratingMessage\"\r\n                        error={touched.ratingMessage && Boolean(errors.ratingMessage)}\r\n                        helperText={touched.ratingMessage && errors.ratingMessage}\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                      />\r\n                    </div>\r\n                    {/* QUANTIDADE MÁXIMA DE VEZES QUE O NPS VAI SER ENVIADO */}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.maxUseBotQueuesNPS\")}\r\n                        fullWidth\r\n                        name=\"maxUseBotQueuesNPS\"\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        error={touched.maxUseBotQueuesNPS && Boolean(errors.maxUseBotQueuesNPS)}\r\n                        helperText={touched.maxUseBotQueuesNPS && errors.maxUseBotQueuesNPS}\r\n                      />\r\n                    </div>\r\n                    {/* ENCERRAR CHATS NPS APÓS X Minutos */}\r\n                    <div>\r\n                      <Field\r\n                        as={TextField}\r\n                        label={i18n.t(\"whatsappModal.form.expiresTicketNPS\")}\r\n                        fullWidth\r\n                        name=\"expiresTicketNPS\"\r\n                        variant=\"outlined\"\r\n                        margin=\"dense\"\r\n                        error={touched.expiresTicketNPS && Boolean(errors.expiresTicketNPS)}\r\n                        helperText={touched.expiresTicketNPS && errors.expiresTicketNPS}\r\n                      />\r\n                    </div>\r\n                  </DialogContent>\r\n                </TabPanel>\r\n                <TabPanel\r\n                  className={classes.container}\r\n                  value={tab}\r\n                  name={\"schedules\"}\r\n                >\r\n                  {tab === \"schedules\" && (\r\n                    <Paper style={{ padding: 20 }}>\r\n                      <SchedulesForm\r\n                        loading={false}\r\n                        onSubmit={handleSaveSchedules}\r\n                        initialValues={schedules}\r\n                        labelSaveButton={i18n.t(\"whatsappModal.buttons.okAdd\")}\r\n                      />\r\n                    </Paper>\r\n                  )}\r\n\r\n                </TabPanel>\r\n              </Paper>\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={handleClose}\r\n                  color=\"secondary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"outlined\"\r\n                >\r\n                  {i18n.t(\"whatsappModal.buttons.cancel\")}\r\n                </Button>\r\n                <Button\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                  disabled={isSubmitting}\r\n                  variant=\"contained\"\r\n                  className={classes.btnWrapper}\r\n                >\r\n                  {whatsAppId\r\n                    ? i18n.t(\"whatsappModal.buttons.okEdit\")\r\n                    : i18n.t(\"whatsappModal.buttons.okAdd\")}\r\n                  {isSubmitting && (\r\n                    <CircularProgress\r\n                      size={24}\r\n                      className={classes.buttonProgress}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </DialogActions>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(WhatsAppModal);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}