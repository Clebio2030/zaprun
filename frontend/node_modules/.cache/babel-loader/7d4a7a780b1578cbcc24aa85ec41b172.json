{"ast":null,"code":"import React,{useContext,useEffect,useReducer,useState}from\"react\";import openSocket from\"socket.io-client\";import{Button,IconButton,Paper,Table,TableBody,TableCell,TableHead,TableRow}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import Title from\"../../components/Title\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import{DeleteOutline,Edit}from\"@material-ui/icons\";import PromptModal from\"../../components/PromptModal\";import{toast}from\"react-toastify\";import ConfirmationModal from\"../../components/ConfirmationModal\";import{AuthContext}from\"../../context/Auth/AuthContext\";import usePlans from\"../../hooks/usePlans\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";import ForbiddenPage from\"../../components/ForbiddenPage\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nconst useStyles=makeStyles(theme=>({mainPaper:{flex:1,padding:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles},customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"}}));const reducer=(state,action)=>{if(action.type===\"LOAD_PROMPTS\"){const prompts=action.payload;const newPrompts=[];prompts.forEach(prompt=>{const promptIndex=state.findIndex(p=>p.id===prompt.id);if(promptIndex!==-1){state[promptIndex]=prompt;}else{newPrompts.push(prompt);}});return[...state,...newPrompts];}if(action.type===\"UPDATE_PROMPTS\"){const prompt=action.payload;const promptIndex=state.findIndex(p=>p.id===prompt.id);if(promptIndex!==-1){state[promptIndex]=prompt;return[...state];}else{return[prompt,...state];}}if(action.type===\"DELETE_PROMPT\"){const promptId=action.payload;const promptIndex=state.findIndex(p=>p.id===promptId);if(promptIndex!==-1){state.splice(promptIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};const Prompts=()=>{const classes=useStyles();const[prompts,dispatch]=useReducer(reducer,[]);const[loading,setLoading]=useState(false);const[promptModalOpen,setPromptModalOpen]=useState(false);const[selectedPrompt,setSelectedPrompt]=useState(null);const[confirmModalOpen,setConfirmModalOpen]=useState(false);//   const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);const{getPlanCompany}=usePlans();const history=useHistory();const companyId=user.companyId;useEffect(()=>{async function fetchData(){const planConfigs=await getPlanCompany(undefined,companyId);if(!planConfigs.plan.useOpenAi){toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");setTimeout(()=>{history.push(\"/\");},1000);}}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{(async()=>{setLoading(true);try{const{data}=await api.get(\"/prompt\");dispatch({type:\"LOAD_PROMPTS\",payload:data.prompts});setLoading(false);}catch(err){toastError(err);setLoading(false);}})();},[]);useEffect(()=>{// const socket = socketManager.GetSocket();\nconst onPromptEvent=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_PROMPTS\",payload:data.prompt});}if(data.action===\"delete\"){dispatch({type:\"DELETE_PROMPT\",payload:data.promptId});}};socket.on(\"company-\".concat(companyId,\"-prompt\"),onPromptEvent);return()=>{socket.off(\"company-\".concat(companyId,\"-prompt\"),onPromptEvent);};},[socket]);const handleOpenPromptModal=()=>{setPromptModalOpen(true);setSelectedPrompt(null);};const handleClosePromptModal=()=>{setPromptModalOpen(false);setSelectedPrompt(null);};const handleEditPrompt=prompt=>{setSelectedPrompt(prompt);setPromptModalOpen(true);};const handleCloseConfirmationModal=()=>{setConfirmModalOpen(false);setSelectedPrompt(null);};const handleDeletePrompt=async promptId=>{try{const{data}=await api.delete(\"/prompt/\".concat(promptId));toast.info(i18n.t(data.message));}catch(err){toastError(err);}setSelectedPrompt(null);};return/*#__PURE__*/React.createElement(MainContainer,null,/*#__PURE__*/React.createElement(ConfirmationModal,{title:selectedPrompt&&\"\".concat(i18n.t(\"prompts.confirmationModal.deleteTitle\"),\" \").concat(selectedPrompt.name,\"?\"),open:confirmModalOpen,onClose:handleCloseConfirmationModal,onConfirm:()=>handleDeletePrompt(selectedPrompt.id)},i18n.t(\"prompts.confirmationModal.deleteMessage\")),/*#__PURE__*/React.createElement(PromptModal,{open:promptModalOpen,onClose:handleClosePromptModal,promptId:selectedPrompt===null||selectedPrompt===void 0?void 0:selectedPrompt.id}),user.profile===\"user\"?/*#__PURE__*/React.createElement(ForbiddenPage,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,i18n.t(\"prompts.title\")),/*#__PURE__*/React.createElement(MainHeaderButtonsWrapper,null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenPromptModal},i18n.t(\"prompts.buttons.add\")))),/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,variant:\"outlined\"},/*#__PURE__*/React.createElement(Table,{size:\"small\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"prompts.table.name\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"prompts.table.queue\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"prompts.table.max_tokens\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"prompts.table.actions\")))),/*#__PURE__*/React.createElement(TableBody,null,/*#__PURE__*/React.createElement(React.Fragment,null,prompts.map(prompt=>/*#__PURE__*/React.createElement(TableRow,{key:prompt.id},/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},prompt.name),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},prompt.queue.name),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},prompt.maxTokens),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:()=>handleEditPrompt(prompt)},/*#__PURE__*/React.createElement(Edit,null)),/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:()=>{setSelectedPrompt(prompt);setConfirmModalOpen(true);}},/*#__PURE__*/React.createElement(DeleteOutline,null))))),loading&&/*#__PURE__*/React.createElement(TableRowSkeleton,{columns:4})))))));};export default Prompts;","map":{"version":3,"names":["React","useContext","useEffect","useReducer","useState","openSocket","Button","IconButton","Paper","Table","TableBody","TableCell","TableHead","TableRow","makeStyles","MainContainer","MainHeader","MainHeaderButtonsWrapper","TableRowSkeleton","Title","i18n","toastError","api","DeleteOutline","Edit","PromptModal","toast","ConfirmationModal","AuthContext","usePlans","useHistory","ForbiddenPage","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","customTableCell","display","alignItems","justifyContent","reducer","state","action","type","prompts","payload","newPrompts","forEach","prompt","promptIndex","findIndex","p","id","push","promptId","splice","Prompts","classes","dispatch","loading","setLoading","promptModalOpen","setPromptModalOpen","selectedPrompt","setSelectedPrompt","confirmModalOpen","setConfirmModalOpen","user","socket","getPlanCompany","history","companyId","fetchData","planConfigs","undefined","plan","useOpenAi","error","setTimeout","data","get","err","onPromptEvent","on","concat","off","handleOpenPromptModal","handleClosePromptModal","handleEditPrompt","handleCloseConfirmationModal","handleDeletePrompt","delete","info","t","message","createElement","title","name","open","onClose","onConfirm","profile","Fragment","variant","color","onClick","className","size","align","map","key","queue","maxTokens","columns"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/Prompts/index.js"],"sourcesContent":["import React, { useContext, useEffect, useReducer, useState } from \"react\";\r\n\r\nimport openSocket from \"socket.io-client\";\r\n\r\nimport {\r\n  Button,\r\n  IconButton,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableRow\r\n} from \"@material-ui/core\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport Title from \"../../components/Title\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { DeleteOutline, Edit } from \"@material-ui/icons\";\r\nimport PromptModal from \"../../components/PromptModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport usePlans from \"../../hooks/usePlans\";\r\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\r\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\r\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_PROMPTS\") {\r\n    const prompts = action.payload;\r\n    const newPrompts = [];\r\n\r\n    prompts.forEach((prompt) => {\r\n      const promptIndex = state.findIndex((p) => p.id === prompt.id);\r\n      if (promptIndex !== -1) {\r\n        state[promptIndex] = prompt;\r\n      } else {\r\n        newPrompts.push(prompt);\r\n      }\r\n    });\r\n\r\n    return [...state, ...newPrompts];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_PROMPTS\") {\r\n    const prompt = action.payload;\r\n    const promptIndex = state.findIndex((p) => p.id === prompt.id);\r\n\r\n    if (promptIndex !== -1) {\r\n      state[promptIndex] = prompt;\r\n      return [...state];\r\n    } else {\r\n      return [prompt, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_PROMPT\") {\r\n    const promptId = action.payload;\r\n    const promptIndex = state.findIndex((p) => p.id === promptId);\r\n    if (promptIndex !== -1) {\r\n      state.splice(promptIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst Prompts = () => {\r\n  const classes = useStyles();\r\n\r\n  const [prompts, dispatch] = useReducer(reducer, []);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [promptModalOpen, setPromptModalOpen] = useState(false);\r\n  const [selectedPrompt, setSelectedPrompt] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  //   const socketManager = useContext(SocketContext);\r\n  const { user, socket } = useContext(AuthContext);\r\n\r\n  const { getPlanCompany } = usePlans();\r\n  const history = useHistory();\r\n  const companyId = user.companyId;\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const planConfigs = await getPlanCompany(undefined, companyId);\r\n      if (!planConfigs.plan.useOpenAi) {\r\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\r\n        setTimeout(() => {\r\n          history.push(`/`)\r\n        }, 1000);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      try {\r\n        const { data } = await api.get(\"/prompt\");\r\n        dispatch({ type: \"LOAD_PROMPTS\", payload: data.prompts });\r\n\r\n        setLoading(false);\r\n      } catch (err) {\r\n        toastError(err);\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // const socket = socketManager.GetSocket();\r\n\r\n    const onPromptEvent = (data) => {\r\n      if (data.action === \"update\" || data.action === \"create\") {\r\n        dispatch({ type: \"UPDATE_PROMPTS\", payload: data.prompt });\r\n      }\r\n\r\n      if (data.action === \"delete\") {\r\n        dispatch({ type: \"DELETE_PROMPT\", payload: data.promptId });\r\n      }\r\n    };\r\n\r\n    socket.on(`company-${companyId}-prompt`, onPromptEvent);\r\n    return () => {\r\n      socket.off(`company-${companyId}-prompt`, onPromptEvent);\r\n    };\r\n  }, [socket]);\r\n\r\n  const handleOpenPromptModal = () => {\r\n    setPromptModalOpen(true);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleClosePromptModal = () => {\r\n    setPromptModalOpen(false);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleEditPrompt = (prompt) => {\r\n    setSelectedPrompt(prompt);\r\n    setPromptModalOpen(true);\r\n  };\r\n\r\n  const handleCloseConfirmationModal = () => {\r\n    setConfirmModalOpen(false);\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  const handleDeletePrompt = async (promptId) => {\r\n    try {\r\n      const { data } = await api.delete(`/prompt/${promptId}`);\r\n      toast.info(i18n.t(data.message));\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n    setSelectedPrompt(null);\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={\r\n          selectedPrompt &&\r\n          `${i18n.t(\"prompts.confirmationModal.deleteTitle\")} ${selectedPrompt.name\r\n          }?`\r\n        }\r\n        open={confirmModalOpen}\r\n        onClose={handleCloseConfirmationModal}\r\n        onConfirm={() => handleDeletePrompt(selectedPrompt.id)}\r\n      >\r\n        {i18n.t(\"prompts.confirmationModal.deleteMessage\")}\r\n      </ConfirmationModal>\r\n      <PromptModal\r\n        open={promptModalOpen}\r\n        onClose={handleClosePromptModal}\r\n        promptId={selectedPrompt?.id}\r\n      />\r\n      {user.profile === \"user\" ?\r\n        <ForbiddenPage />\r\n        :\r\n        <>\r\n          <MainHeader>\r\n            <Title>{i18n.t(\"prompts.title\")}</Title>\r\n            <MainHeaderButtonsWrapper>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleOpenPromptModal}\r\n              >\r\n                {i18n.t(\"prompts.buttons.add\")}\r\n              </Button>\r\n            </MainHeaderButtonsWrapper>\r\n          </MainHeader>\r\n          <Paper className={classes.mainPaper} variant=\"outlined\">\r\n            <Table size=\"small\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell align=\"left\">\r\n                    {i18n.t(\"prompts.table.name\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {i18n.t(\"prompts.table.queue\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {i18n.t(\"prompts.table.max_tokens\")}\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    {i18n.t(\"prompts.table.actions\")}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <>\r\n                  {prompts.map((prompt) => (\r\n                    <TableRow key={prompt.id}>\r\n                      <TableCell align=\"left\">{prompt.name}</TableCell>\r\n                      <TableCell align=\"left\">{prompt.queue.name}</TableCell>\r\n                      <TableCell align=\"left\">{prompt.maxTokens}</TableCell>\r\n                      <TableCell align=\"center\">\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => handleEditPrompt(prompt)}\r\n                        >\r\n                          <Edit />\r\n                        </IconButton>\r\n\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            setSelectedPrompt(prompt);\r\n                            setConfirmModalOpen(true);\r\n                          }}\r\n                        >\r\n                          <DeleteOutline />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                  {loading && <TableRowSkeleton columns={4} />}\r\n                </>\r\n              </TableBody>\r\n            </Table>\r\n          </Paper>\r\n        </>}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Prompts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}