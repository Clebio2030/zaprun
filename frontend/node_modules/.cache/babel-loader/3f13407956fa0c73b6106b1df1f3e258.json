{"ast":null,"code":"import{Button}from\"@material-ui/core\";import React,{useRef,useEffect,useState}from\"react\";const LS_NAME='audioMessageRate';const AudioModal=_ref=>{let{url}=_ref;const audioRef=useRef(null);const[audioRate,setAudioRate]=useState(parseFloat(localStorage.getItem(LS_NAME)||\"1\"));const[showButtonRate,setShowButtonRate]=useState(false);const isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;useEffect(()=>{audioRef.current.playbackRate=audioRate;localStorage.setItem(LS_NAME,audioRate);},[audioRate]);useEffect(()=>{audioRef.current.onplaying=()=>{setShowButtonRate(true);};audioRef.current.onpause=()=>{setShowButtonRate(false);};audioRef.current.onended=()=>{setShowButtonRate(false);};},[]);const toggleRate=()=>{let newRate=null;switch(audioRate){case 0.5:newRate=1;break;case 1:newRate=1.5;break;case 1.5:newRate=2;break;case 2:newRate=0.5;break;default:newRate=1;break;}setAudioRate(newRate);};const getAudioSource=()=>{let sourceUrl=url;if(isIOS){sourceUrl=sourceUrl.replace(\".ogg\",\".mp3\");}return/*#__PURE__*/React.createElement(\"source\",{src:sourceUrl,type:isIOS?\"audio/mp3\":\"audio/ogg\"});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"audio\",{ref:audioRef,controls:true},getAudioSource()),showButtonRate&&/*#__PURE__*/React.createElement(Button,{style:{marginLeft:\"5px\",marginTop:\"-45px\"},onClick:toggleRate},audioRate,\"x\"));};export default AudioModal;","map":{"version":3,"names":["Button","React","useRef","useEffect","useState","LS_NAME","AudioModal","_ref","url","audioRef","audioRate","setAudioRate","parseFloat","localStorage","getItem","showButtonRate","setShowButtonRate","isIOS","test","navigator","userAgent","window","MSStream","current","playbackRate","setItem","onplaying","onpause","onended","toggleRate","newRate","getAudioSource","sourceUrl","replace","createElement","src","type","Fragment","ref","controls","style","marginLeft","marginTop","onClick"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/AudioModal/index.js"],"sourcesContent":["import { Button } from \"@material-ui/core\";\r\nimport React, { useRef, useEffect, useState } from \"react\";\r\n\r\nconst LS_NAME = 'audioMessageRate';\r\n\r\nconst AudioModal = ({url}) => {\r\n    const audioRef = useRef(null);\r\n    const [audioRate, setAudioRate] = useState(parseFloat(localStorage.getItem(LS_NAME) || \"1\"));\r\n    const [showButtonRate, setShowButtonRate] = useState(false);\r\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n  \r\n    useEffect(() => {\r\n      audioRef.current.playbackRate = audioRate;\r\n      localStorage.setItem(LS_NAME, audioRate);\r\n    }, [audioRate]);\r\n  \r\n    useEffect(() => {\r\n      audioRef.current.onplaying = () => {\r\n        setShowButtonRate(true);\r\n      };\r\n      audioRef.current.onpause = () => {\r\n        setShowButtonRate(false);\r\n      };\r\n      audioRef.current.onended = () => {\r\n        setShowButtonRate(false);\r\n      };\r\n    }, []);\r\n  \r\n    const toggleRate = () => {\r\n      let newRate = null;\r\n  \r\n      switch (audioRate) {\r\n        case 0.5:\r\n          newRate = 1;\r\n          break;\r\n        case 1:\r\n          newRate = 1.5;\r\n          break;\r\n        case 1.5:\r\n          newRate = 2;\r\n          break;\r\n        case 2:\r\n          newRate = 0.5;\r\n          break;\r\n        default:\r\n          newRate = 1;\r\n          break;\r\n      }\r\n  \r\n      setAudioRate(newRate);\r\n    };\r\n  \r\n    const getAudioSource = () => {\r\n      let sourceUrl = url;\r\n  \r\n      if (isIOS) {\r\n        sourceUrl = sourceUrl.replace(\".ogg\", \".mp3\");\r\n      }\r\n  \r\n      return (\r\n        <source src={sourceUrl} type={isIOS ? \"audio/mp3\" : \"audio/ogg\"} />\r\n      );\r\n    };\r\n  \r\n    return (\r\n      <>\r\n        <audio ref={audioRef} controls>\r\n          {getAudioSource()}\r\n        </audio>\r\n        {showButtonRate && (\r\n          <Button\r\n            style={{ marginLeft: \"5px\", marginTop: \"-45px\" }}\r\n            onClick={toggleRate}\r\n          >\r\n            {audioRate}x\r\n          </Button>\r\n        )}\r\n      </>\r\n    );\r\n}\r\n\r\nexport default AudioModal;"],"mappings":"AAAA,OAASA,MAAM,KAAQ,mBAAmB,CAC1C,MAAO,CAAAC,KAAK,EAAIC,MAAM,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAE1D,KAAM,CAAAC,OAAO,CAAG,kBAAkB,CAElC,KAAM,CAAAC,UAAU,CAAGC,IAAA,EAAW,IAAV,CAACC,GAAG,CAAC,CAAAD,IAAA,CACrB,KAAM,CAAAE,QAAQ,CAAGP,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAACQ,SAAS,CAAEC,YAAY,CAAC,CAAGP,QAAQ,CAACQ,UAAU,CAACC,YAAY,CAACC,OAAO,CAACT,OAAO,CAAC,EAAI,GAAG,CAAC,CAAC,CAC5F,KAAM,CAACU,cAAc,CAAEC,iBAAiB,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAAAa,KAAK,CAAG,kBAAkB,CAACC,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,EAAI,CAACC,MAAM,CAACC,QAAQ,CAE9EnB,SAAS,CAAC,IAAM,CACdM,QAAQ,CAACc,OAAO,CAACC,YAAY,CAAGd,SAAS,CACzCG,YAAY,CAACY,OAAO,CAACpB,OAAO,CAAEK,SAAS,CAAC,CAC1C,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEfP,SAAS,CAAC,IAAM,CACdM,QAAQ,CAACc,OAAO,CAACG,SAAS,CAAG,IAAM,CACjCV,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAC,CACDP,QAAQ,CAACc,OAAO,CAACI,OAAO,CAAG,IAAM,CAC/BX,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CACDP,QAAQ,CAACc,OAAO,CAACK,OAAO,CAAG,IAAM,CAC/BZ,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAa,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI,CAAAC,OAAO,CAAG,IAAI,CAElB,OAAQpB,SAAS,EACf,IAAK,IAAG,CACNoB,OAAO,CAAG,CAAC,CACX,MACF,IAAK,EAAC,CACJA,OAAO,CAAG,GAAG,CACb,MACF,IAAK,IAAG,CACNA,OAAO,CAAG,CAAC,CACX,MACF,IAAK,EAAC,CACJA,OAAO,CAAG,GAAG,CACb,MACF,QACEA,OAAO,CAAG,CAAC,CACX,MACJ,CAEAnB,YAAY,CAACmB,OAAO,CAAC,CACvB,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAAAC,SAAS,CAAGxB,GAAG,CAEnB,GAAIS,KAAK,CAAE,CACTe,SAAS,CAAGA,SAAS,CAACC,OAAO,CAAC,MAAM,CAAE,MAAM,CAAC,CAC/C,CAEA,mBACEhC,KAAA,CAAAiC,aAAA,WAAQC,GAAG,CAAEH,SAAU,CAACI,IAAI,CAAEnB,KAAK,CAAG,WAAW,CAAG,WAAY,CAAE,CAAC,CAEvE,CAAC,CAED,mBACEhB,KAAA,CAAAiC,aAAA,CAAAjC,KAAA,CAAAoC,QAAA,mBACEpC,KAAA,CAAAiC,aAAA,UAAOI,GAAG,CAAE7B,QAAS,CAAC8B,QAAQ,OAC3BR,cAAc,CAAC,CACX,CAAC,CACPhB,cAAc,eACbd,KAAA,CAAAiC,aAAA,CAAClC,MAAM,EACLwC,KAAK,CAAE,CAAEC,UAAU,CAAE,KAAK,CAAEC,SAAS,CAAE,OAAQ,CAAE,CACjDC,OAAO,CAAEd,UAAW,EAEnBnB,SAAS,CAAC,GACL,CAEV,CAAC,CAET,CAAC,CAED,cAAe,CAAAJ,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}