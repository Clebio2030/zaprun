{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Dialog,DialogTitle,DialogContent,DialogContentText,DialogActions,Button}from'@mui/material';import{i18n}from'../../translate/i18n';import{Stepper,Step,StepLabel,Typography,Paper,Grid}from'@material-ui/core';import{format,parseISO}from'date-fns';import api from'../../services/api';import toastError from\"../../errors/toastError\";const ShowTicketLogModal=_ref=>{let{isOpen,handleClose,ticketId}=_ref;const[activeStep,setActiveStep]=useState(0);const[loading,setLoading]=useState(false);const[logs,setLogs]=useState([]);const typeDescriptions={create:i18n.t(\"showTicketLogModal.options.create\"),chatBot:i18n.t(\"showTicketLogModal.options.chatBot\"),queue:i18n.t(\"showTicketLogModal.options.queue\"),open:i18n.t(\"showTicketLogModal.options.open\"),access:i18n.t(\"showTicketLogModal.options.access\"),transfered:i18n.t(\"showTicketLogModal.options.transfered\"),receivedTransfer:i18n.t(\"showTicketLogModal.options.receivedTransfer\"),pending:i18n.t(\"showTicketLogModal.options.pending\"),closed:i18n.t(\"showTicketLogModal.options.closed\"),reopen:i18n.t(\"showTicketLogModal.options.reopen\"),redirect:i18n.t(\"showTicketLogModal.options.redirect\")// Adicione outros mapeamentos conforme necessário\n};useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchLogs=async()=>{try{const{data}=await api.get(\"/tickets-log/\".concat(ticketId));setLogs(data);setLoading(false);}catch(err){setLoading(false);toastError(err);}};fetchLogs();},500);return()=>clearTimeout(delayDebounceFn);},[ticketId]);return/*#__PURE__*/React.createElement(Dialog,{open:isOpen,onClose:handleClose},/*#__PURE__*/React.createElement(DialogTitle,null,i18n.t('showTicketLogModal.title.header')),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(Paper,null,/*#__PURE__*/React.createElement(DialogContentText,null,/*#__PURE__*/React.createElement(Stepper,{activeStep:activeStep,orientation:\"vertical\"},logs.map((log,index)=>{var _log$user,_log$queue,_log$queue2,_log$user2;return/*#__PURE__*/React.createElement(Step,{key:index},/*#__PURE__*/React.createElement(StepLabel,null,\"\".concat(log.type==='access'||log.type==='transfered'||log.type==='open'||log.type==='pending'||log.type===\"closed\"||log.type===\"reopen\"?log===null||log===void 0?void 0:(_log$user=log.user)===null||_log$user===void 0?void 0:_log$user.name:(log===null||log===void 0?void 0:log.type)==='queue'||(log===null||log===void 0?void 0:log.type)==='redirect'?log===null||log===void 0?void 0:(_log$queue=log.queue)===null||_log$queue===void 0?void 0:_log$queue.name:log.type==='receivedTransfer'?(log===null||log===void 0?void 0:(_log$queue2=log.queue)===null||_log$queue2===void 0?void 0:_log$queue2.name)+' - '+(log===null||log===void 0?void 0:(_log$user2=log.user)===null||_log$user2===void 0?void 0:_log$user2.name):'',\" \\n                    \").concat(typeDescriptions[log.type],\" - \").concat(format(parseISO(log===null||log===void 0?void 0:log.createdAt),'dd/MM/yyyy HH:mm'))));}))))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"Fechar\")));};export default ShowTicketLogModal;","map":{"version":3,"names":["React","useState","useEffect","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","i18n","Stepper","Step","StepLabel","Typography","Paper","Grid","format","parseISO","api","toastError","ShowTicketLogModal","_ref","isOpen","handleClose","ticketId","activeStep","setActiveStep","loading","setLoading","logs","setLogs","typeDescriptions","create","t","chatBot","queue","open","access","transfered","receivedTransfer","pending","closed","reopen","redirect","delayDebounceFn","setTimeout","fetchLogs","data","get","concat","err","clearTimeout","createElement","onClose","orientation","map","log","index","_log$user","_log$queue","_log$queue2","_log$user2","key","type","user","name","createdAt","onClick","color"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/ShowTicketLogModal/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@mui/material';\r\nimport { i18n } from '../../translate/i18n';\r\nimport { Stepper, Step, StepLabel, Typography, Paper, Grid } from '@material-ui/core';\r\nimport { format, parseISO } from 'date-fns';\r\nimport api from '../../services/api';\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nconst ShowTicketLogModal = ({ isOpen, handleClose, ticketId }) => {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [logs, setLogs] = useState([]);\r\n\r\n  const typeDescriptions = {\r\n    create: i18n.t(\"showTicketLogModal.options.create\"),\r\n    chatBot: i18n.t(\"showTicketLogModal.options.chatBot\"),\r\n    queue: i18n.t(\"showTicketLogModal.options.queue\"),\r\n    open: i18n.t(\"showTicketLogModal.options.open\"),\r\n    access: i18n.t(\"showTicketLogModal.options.access\"),\r\n    transfered: i18n.t(\"showTicketLogModal.options.transfered\"),\r\n    receivedTransfer: i18n.t(\"showTicketLogModal.options.receivedTransfer\"),\r\n    pending: i18n.t(\"showTicketLogModal.options.pending\"),\r\n    closed: i18n.t(\"showTicketLogModal.options.closed\"),\r\n    reopen: i18n.t(\"showTicketLogModal.options.reopen\"),\r\n    redirect: i18n.t(\"showTicketLogModal.options.redirect\")\r\n    // Adicione outros mapeamentos conforme necessário\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchLogs = async () => {\r\n        try {\r\n          const { data } = await api.get(`/tickets-log/${ticketId}`);\r\n          setLogs(data);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchLogs();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [ticketId]);\r\n\r\n  return (\r\n    <Dialog open={isOpen} onClose={handleClose}>\r\n      <DialogTitle>{i18n.t('showTicketLogModal.title.header')}</DialogTitle>\r\n      <DialogContent>\r\n        <Paper>\r\n          <DialogContentText>\r\n            <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n              {logs.map((log, index) => (\r\n                <Step key={index}>\r\n                  <StepLabel>\r\n                    {`${log.type === 'access' ||\r\n                      log.type === 'transfered' ||\r\n                      log.type === 'open' || log.type === 'pending' || log.type === \"closed\" || log.type === \"reopen\"\r\n                      ? log?.user?.name\r\n                      : log?.type === 'queue' || log?.type === 'redirect'\r\n                        ? log?.queue?.name\r\n                        : log.type === 'receivedTransfer'\r\n                          ? log?.queue?.name + ' - ' + log?.user?.name\r\n                          : ''} \r\n                    ${typeDescriptions[log.type]} - ${format(\r\n                            parseISO(log?.createdAt),\r\n                            'dd/MM/yyyy HH:mm'\r\n                          )}`}\r\n                  </StepLabel>\r\n                </Step>\r\n              ))}\r\n            </Stepper>\r\n          </DialogContentText>\r\n        </Paper>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ShowTicketLogModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}