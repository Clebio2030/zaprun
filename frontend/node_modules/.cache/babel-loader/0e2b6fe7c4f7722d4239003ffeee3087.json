{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Grid from'@material-ui/core/Grid';import TextField from'@material-ui/core/TextField';import SubscriptionModal from\"../../components/SubscriptionModal\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainContainer from\"../../components/MainContainer\";import moment from\"moment\";import{useDate}from\"../../hooks/useDate\";import{AuthContext}from\"../../context/Auth/AuthContext\";const useStyles=makeStyles(theme=>({mainPaper:{flex:1,padding:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles}}));const Contacts=()=>{var _user$company,_user$company2;const classes=useStyles();const{user,socket}=useContext(AuthContext);const[loading]=useState(false);const[,setPageNumber]=useState(1);const[selectedContactId,setSelectedContactId]=useState(null);const[contactModalOpen,setContactModalOpen]=useState(false);const[hasMore]=useState(false);const[dueDate,setDueDate]=useState(\"\");const{returnDays}=useDate();const handleOpenContactModal=()=>{setSelectedContactId(null);setContactModalOpen(true);};const handleCloseContactModal=()=>{setSelectedContactId(null);setContactModalOpen(false);};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};useEffect(()=>{const currentDueDate=localStorage.getItem(\"dueDate\");if(currentDueDate!==\"\"&&currentDueDate!==\"null\"){setDueDate(moment(currentDueDate).format(\"DD/MM/YYYY\"));}},[]);return/*#__PURE__*/React.createElement(MainContainer,{className:classes.mainContainer},/*#__PURE__*/React.createElement(SubscriptionModal,{open:contactModalOpen,onClose:handleCloseContactModal,\"aria-labelledby\":\"form-dialog-title\",contactId:selectedContactId}),/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,\"Assinatura\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:4},/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextField,{id:\"outlined-full-width\",label:\"Per\\xEDodo de Licen\\xE7a\"// defaultValue={`Sua licença vence em ${returnDays(user?.company?.dueDate)} dias!`}\n,defaultValue:returnDays(user===null||user===void 0?void 0:(_user$company=user.company)===null||_user$company===void 0?void 0:_user$company.dueDate)===0?\"Sua licen\\xE7a vence em hoje!\":\"Sua licen\\xE7a vence em \".concat(returnDays(user===null||user===void 0?void 0:(_user$company2=user.company)===null||_user$company2===void 0?void 0:_user$company2.dueDate),\" dias!\"),fullWidth:true,margin:\"normal\",InputLabelProps:{shrink:true},InputProps:{readOnly:true},variant:\"outlined\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextField,{id:\"outlined-full-width\",label:\"Email de cobran\\xE7a\",defaultValue:user===null||user===void 0?void 0:user.email,fullWidth:true,margin:\"normal\",InputLabelProps:{shrink:true},InputProps:{readOnly:true},variant:\"outlined\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenContactModal,fullWidth:true},\"Assine Agora!\")))));};export default Contacts;","map":{"version":3,"names":["React","useState","useContext","useEffect","makeStyles","Paper","Button","Grid","TextField","SubscriptionModal","MainHeader","Title","MainContainer","moment","useDate","AuthContext","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","Contacts","_user$company","_user$company2","classes","user","socket","loading","setPageNumber","selectedContactId","setSelectedContactId","contactModalOpen","setContactModalOpen","hasMore","dueDate","setDueDate","returnDays","handleOpenContactModal","handleCloseContactModal","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","currentDueDate","localStorage","getItem","format","createElement","className","mainContainer","open","onClose","contactId","item","xs","sm","variant","onScroll","id","label","defaultValue","company","concat","fullWidth","margin","InputLabelProps","shrink","InputProps","readOnly","email","color","onClick"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/Subscription/index.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\n\nimport SubscriptionModal from \"../../components/SubscriptionModal\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport MainContainer from \"../../components/MainContainer\";\nimport moment from \"moment\";\nimport { useDate } from \"../../hooks/useDate\";\n\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nconst Contacts = () => {\n  const classes = useStyles();\n  const { user, socket } = useContext(AuthContext);\n\n  const [loading,] = useState(false);\n  const [, setPageNumber] = useState(1);\n  const [selectedContactId, setSelectedContactId] = useState(null);\n  const [contactModalOpen, setContactModalOpen] = useState(false);\n  const [hasMore,] = useState(false);\n  const [dueDate, setDueDate] = useState(\"\");\n  const { returnDays } = useDate();\n\n  const handleOpenContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(true);\n  };\n\n  const handleCloseContactModal = () => {\n    setSelectedContactId(null);\n    setContactModalOpen(false);\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  useEffect(() => {\n    const currentDueDate = localStorage.getItem(\"dueDate\");\n    if (currentDueDate !== \"\" && currentDueDate !== \"null\") {\n      setDueDate(moment(currentDueDate).format(\"DD/MM/YYYY\"));\n    }\n  }, []);\n\n  return (\n    <MainContainer className={classes.mainContainer}>\n      <SubscriptionModal\n        open={contactModalOpen}\n        onClose={handleCloseContactModal}\n        aria-labelledby=\"form-dialog-title\"\n        contactId={selectedContactId}\n      ></SubscriptionModal>\n\n      <MainHeader>\n        <Title>Assinatura</Title>\n      </MainHeader>\n      <Grid item xs={12} sm={4}>\n        <Paper\n          className={classes.mainPaper}\n          variant=\"outlined\"\n          onScroll={handleScroll}\n        >\n\n          <div>\n            <TextField\n              id=\"outlined-full-width\"\n              label=\"Período de Licença\"\n              // defaultValue={`Sua licença vence em ${returnDays(user?.company?.dueDate)} dias!`}\n              defaultValue={returnDays(user?.company?.dueDate) === 0 ? `Sua licença vence em hoje!` : `Sua licença vence em ${returnDays(user?.company?.dueDate)} dias!`}\n              fullWidth\n              margin=\"normal\"\n              InputLabelProps={{ shrink: true, }}\n              InputProps={{ readOnly: true, }}\n              variant=\"outlined\"\n            />\n\n          </div>\n\n          <div>\n            <TextField\n              id=\"outlined-full-width\"\n              label=\"Email de cobrança\"\n              defaultValue={user?.email}\n              fullWidth\n              margin=\"normal\"\n              InputLabelProps={{\n                shrink: true,\n              }}\n              InputProps={{\n                readOnly: true,\n              }}\n              variant=\"outlined\"\n            />\n\n          </div>\n\n          <div>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleOpenContactModal}\n              fullWidth\n            >\n              Assine Agora!\n            </Button>\n          </div>\n\n        </Paper>\n      </Grid>\n    </MainContainer>\n  );\n};\n\nexport default Contacts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}