{"ast":null,"code":"import React,{useEffect,useReducer,useState,useContext}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import toastError from\"../../errors/toastError\";import Popover from\"@material-ui/core/Popover\";import AnnouncementIcon from\"@material-ui/icons/Announcement\";import{i18n}from\"../../translate/i18n\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Avatar,Badge,IconButton,List,ListItem,ListItemAvatar,ListItemText,Dialog,Paper,Typography,DialogTitle,DialogContent,DialogActions,Button,DialogContentText}from\"@material-ui/core\";import api from\"../../services/api\";import{isArray}from\"lodash\";import moment from\"moment\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nconst useStyles=makeStyles(theme=>({mainPaper:{flex:1,maxHeight:300,maxWidth:500,padding:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles}}));function AnnouncementDialog(_ref){let{announcement,open,handleClose}=_ref;// const getMediaPath = (filename) => {\n//   return path.join(`${process.env.REACT_APP_BACKEND_URL}`,\"public\", \"announcements\",`${filename}`);\n// };\nreturn/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:()=>handleClose(),\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"alert-dialog-title\"},announcement.title),/*#__PURE__*/React.createElement(DialogContent,null,announcement.mediaPath&&/*#__PURE__*/React.createElement(\"div\",{style:{border:\"1px solid #f1f1f1\",margin:\"0 auto 20px\",textAlign:\"center\",width:\"95%\",height:300,backgroundRepeat:\"no-repeat\",backgroundSize:\"cover\",backgroundPosition:\"center\"}},/*#__PURE__*/React.createElement(\"img\",{alt:\"announcement image\",src:announcement.mediaPath,style:{width:\"95%\",height:\"100%\"}})),/*#__PURE__*/React.createElement(DialogContentText,{id:\"alert-dialog-description\",style:{whiteSpace:\"pre-line\"}},announcement.text)),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:()=>handleClose(),color:\"primary\",autoFocus:true},\"Fechar\")));}const reducer=(state,action)=>{if(action.type===\"LOAD_ANNOUNCEMENTS\"){const announcements=action.payload;const newAnnouncements=[];if(isArray(announcements)){announcements.forEach(announcement=>{const announcementIndex=state.findIndex(u=>u.id===announcement.id);if(announcementIndex!==-1){state[announcementIndex]=announcement;}else{newAnnouncements.push(announcement);}});}return[...state,...newAnnouncements];}if(action.type===\"UPDATE_ANNOUNCEMENTS\"){const announcement=action.payload;const announcementIndex=state.findIndex(u=>u.id===announcement.id);if(announcementIndex!==-1){state[announcementIndex]=announcement;return[...state];}else{return[announcement,...state];}}if(action.type===\"DELETE_ANNOUNCEMENT\"){const announcementId=action.payload;const announcementIndex=state.findIndex(u=>u.id===announcementId);if(announcementIndex!==-1){state.splice(announcementIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};export default function AnnouncementsPopover(){const classes=useStyles();const[loading,setLoading]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[searchParam]=useState(\"\");const[announcements,dispatch]=useReducer(reducer,[]);const[invisible,setInvisible]=useState(false);const[announcement,setAnnouncement]=useState({});const[showAnnouncementDialog,setShowAnnouncementDialog]=useState(false);//   const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{fetchAnnouncements();},500);return()=>clearTimeout(delayDebounceFn);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[searchParam,pageNumber]);useEffect(()=>{if(user.companyId){const companyId=user.companyId;//    const socket = socketManager.GetSocket();\nconst onCompanyAnnouncement=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_ANNOUNCEMENTS\",payload:data.record});setInvisible(false);}if(data.action===\"delete\"){dispatch({type:\"DELETE_ANNOUNCEMENT\",payload:+data.id});}};socket.on(\"company-announcement\",onCompanyAnnouncement);return()=>{socket.off(\"company-announcement\",onCompanyAnnouncement);};}},[user]);const fetchAnnouncements=async()=>{try{const{data}=await api.get(\"/announcements/\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_ANNOUNCEMENTS\",payload:data.records});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};const handleClick=event=>{setAnchorEl(event.currentTarget);setInvisible(true);};const handleClose=()=>{setAnchorEl(null);};const borderPriority=priority=>{if(priority===1){return\"4px solid #b81111\";}if(priority===2){return\"4px solid orange\";}if(priority===3){return\"4px solid grey\";}};const handleShowAnnouncementDialog=record=>{setAnnouncement(record);setShowAnnouncementDialog(true);setAnchorEl(null);};const open=Boolean(anchorEl);const id=open?\"simple-popover\":undefined;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AnnouncementDialog,{announcement:announcement,open:showAnnouncementDialog,handleClose:()=>setShowAnnouncementDialog(false)}),/*#__PURE__*/React.createElement(IconButton,{variant:\"contained\",\"aria-describedby\":id,onClick:handleClick,style:{color:\"white\"}},/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",variant:\"dot\",invisible:invisible||announcements.length<1},/*#__PURE__*/React.createElement(AnnouncementIcon,null))),/*#__PURE__*/React.createElement(Popover,{id:id,open:open,anchorEl:anchorEl,onClose:handleClose,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"}},/*#__PURE__*/React.createElement(Paper,{variant:\"outlined\",onScroll:handleScroll,className:classes.mainPaper},/*#__PURE__*/React.createElement(List,{component:\"nav\",\"aria-label\":\"main mailbox folders\",style:{minWidth:300}},isArray(announcements)&&announcements.map((item,key)=>/*#__PURE__*/React.createElement(ListItem,{key:key,style:{background:key%2===0?\"primary\":\"secondary\",border:\"1px solid #eee\",borderLeft:borderPriority(item.priority),cursor:\"pointer\"},onClick:()=>handleShowAnnouncementDialog(item)},item.mediaPath&&/*#__PURE__*/React.createElement(ListItemAvatar,null,/*#__PURE__*/React.createElement(Avatar,{src:item.mediaPath})),/*#__PURE__*/React.createElement(ListItemText,{primary:item.title,secondary:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{component:\"span\",style:{fontSize:12}},moment(item.createdAt).format(\"DD/MM/YYYY\")),/*#__PURE__*/React.createElement(\"span\",{style:{marginTop:5,display:\"block\"}}),/*#__PURE__*/React.createElement(Typography,{component:\"span\",variant:\"body2\"},item.text))}))),isArray(announcements)&&announcements.length===0&&/*#__PURE__*/React.createElement(ListItemText,{primary:i18n.t(\"mainDrawer.appBar.notRegister\")})))));}","map":{"version":3,"names":["React","useEffect","useReducer","useState","useContext","makeStyles","toastError","Popover","AnnouncementIcon","i18n","AuthContext","Avatar","Badge","IconButton","List","ListItem","ListItemAvatar","ListItemText","Dialog","Paper","Typography","DialogTitle","DialogContent","DialogActions","Button","DialogContentText","api","isArray","moment","useStyles","theme","mainPaper","flex","maxHeight","maxWidth","padding","spacing","overflowY","scrollbarStyles","AnnouncementDialog","_ref","announcement","open","handleClose","createElement","onClose","id","title","mediaPath","style","border","margin","textAlign","width","height","backgroundRepeat","backgroundSize","backgroundPosition","alt","src","whiteSpace","text","onClick","color","autoFocus","reducer","state","action","type","announcements","payload","newAnnouncements","forEach","announcementIndex","findIndex","u","push","announcementId","splice","AnnouncementsPopover","classes","loading","setLoading","anchorEl","setAnchorEl","pageNumber","setPageNumber","hasMore","setHasMore","searchParam","dispatch","invisible","setInvisible","setAnnouncement","showAnnouncementDialog","setShowAnnouncementDialog","user","socket","delayDebounceFn","setTimeout","fetchAnnouncements","clearTimeout","companyId","onCompanyAnnouncement","data","record","on","off","get","params","records","err","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","handleClick","event","borderPriority","priority","handleShowAnnouncementDialog","Boolean","undefined","variant","length","anchorOrigin","vertical","horizontal","transformOrigin","onScroll","className","component","minWidth","map","item","key","background","borderLeft","cursor","primary","secondary","Fragment","fontSize","createdAt","format","marginTop","display","t"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/AnnouncementsPopover/index.js"],"sourcesContent":["import React, { useEffect, useReducer, useState, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport toastError from \"../../errors/toastError\";\nimport Popover from \"@material-ui/core/Popover\";\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\n\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\n\nimport {\n  Avatar,\n  Badge,\n  IconButton,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Dialog,\n  Paper,\n  Typography,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  DialogContentText,\n} from \"@material-ui/core\";\nimport api from \"../../services/api\";\nimport { isArray } from \"lodash\";\nimport moment from \"moment\";\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    maxHeight: 300,\n    maxWidth: 500,\n    padding: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n}));\n\nfunction AnnouncementDialog({ announcement, open, handleClose }) {\n  // const getMediaPath = (filename) => {\n  //   return path.join(`${process.env.REACT_APP_BACKEND_URL}`,\"public\", \"announcements\",`${filename}`);\n  // };\n  return (\n    <Dialog\n      open={open}\n      onClose={() => handleClose()}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">{announcement.title}</DialogTitle>\n      <DialogContent>\n        {announcement.mediaPath && (\n          <div\n            style={{\n              border: \"1px solid #f1f1f1\",\n              margin: \"0 auto 20px\",\n              textAlign: \"center\",\n              width: \"95%\",\n              height: 300,\n              backgroundRepeat: \"no-repeat\",\n              backgroundSize: \"cover\",\n              backgroundPosition: \"center\",\n            }}\n          >\n            <img\n              alt={`announcement image`}\n              src={announcement.mediaPath}\n              style={{\n                width: \"95%\",\n                height: \"100%\",\n              }}\n            />\n          </div>\n        )}\n        <DialogContentText id=\"alert-dialog-description\" style={{ whiteSpace: \"pre-line\" }}>\n          {announcement.text}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => handleClose()} color=\"primary\" autoFocus>\n          Fechar\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\n    const announcements = action.payload;\n    const newAnnouncements = [];\n\n    if (isArray(announcements)) {\n      announcements.forEach((announcement) => {\n        const announcementIndex = state.findIndex(\n          (u) => u.id === announcement.id\n        );\n        if (announcementIndex !== -1) {\n          state[announcementIndex] = announcement;\n        } else {\n          newAnnouncements.push(announcement);\n        }\n      });\n    }\n\n    return [...state, ...newAnnouncements];\n  }\n\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\n    const announcement = action.payload;\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\n\n    if (announcementIndex !== -1) {\n      state[announcementIndex] = announcement;\n      return [...state];\n    } else {\n      return [announcement, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\n    const announcementId = action.payload;\n\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\n    if (announcementIndex !== -1) {\n      state.splice(announcementIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nexport default function AnnouncementsPopover() {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [searchParam] = useState(\"\");\n  const [announcements, dispatch] = useReducer(reducer, []);\n  const [invisible, setInvisible] = useState(false);\n  const [announcement, setAnnouncement] = useState({});\n  const [showAnnouncementDialog, setShowAnnouncementDialog] = useState(false);\n//   const socketManager = useContext(SocketContext);\n  const { user, socket } = useContext(AuthContext);\n\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      fetchAnnouncements();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    if (user.companyId) {\n      const companyId = user.companyId;\n//    const socket = socketManager.GetSocket();\n\n      const onCompanyAnnouncement = (data) => {\n        if (data.action === \"update\" || data.action === \"create\") {\n          dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\n          setInvisible(false);\n        }\n        if (data.action === \"delete\") {\n          dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\n        }\n      };\n      socket.on(`company-announcement`, onCompanyAnnouncement);\n\n      return () => {\n        socket.off(`company-announcement`, onCompanyAnnouncement);\n      };\n    }\n  }, [user]);\n\n  const fetchAnnouncements = async () => {\n    try {\n      const { data } = await api.get(\"/announcements/\", {\n        params: { searchParam, pageNumber },\n      });\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\n      setHasMore(data.hasMore);\n      setLoading(false);\n    } catch (err) {\n      toastError(err);\n    }\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n    setInvisible(true);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const borderPriority = (priority) => {\n    if (priority === 1) {\n      return \"4px solid #b81111\";\n    }\n    if (priority === 2) {\n      return \"4px solid orange\";\n    }\n    if (priority === 3) {\n      return \"4px solid grey\";\n    }\n  };\n\n\n  const handleShowAnnouncementDialog = (record) => {\n    setAnnouncement(record);\n    setShowAnnouncementDialog(true);\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <div>\n      <AnnouncementDialog\n        announcement={announcement}\n        open={showAnnouncementDialog}\n        handleClose={() => setShowAnnouncementDialog(false)}\n      />\n      <IconButton\n        variant=\"contained\"\n        aria-describedby={id}\n        onClick={handleClick}\n        style={{ color: \"white\" }}\n      >\n        <Badge\n          color=\"secondary\"\n          variant=\"dot\"\n          invisible={invisible || announcements.length < 1}\n        >\n          <AnnouncementIcon />\n        </Badge>\n      </IconButton>\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Paper\n          variant=\"outlined\"\n          onScroll={handleScroll}\n          className={classes.mainPaper}\n        >\n          <List\n            component=\"nav\"\n            aria-label=\"main mailbox folders\"\n            style={{ minWidth: 300 }}\n          >\n            {isArray(announcements) &&\n              announcements.map((item, key) => (\n                <ListItem\n                  key={key}\n                  style={{\n                    background: key % 2 === 0 ? \"primary\" : \"secondary\",\n                    border: \"1px solid #eee\",\n                    borderLeft: borderPriority(item.priority),\n                    cursor: \"pointer\",\n                  }}\n                  onClick={() => handleShowAnnouncementDialog(item)}\n                >\n                  {item.mediaPath && (\n                    <ListItemAvatar>\n                      <Avatar\n                        src={item.mediaPath}\n                      />\n                    </ListItemAvatar>\n                  )}\n                  <ListItemText\n                    primary={item.title}\n                    secondary={\n                      <>\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\n                          {moment(item.createdAt).format(\"DD/MM/YYYY\")}\n                        </Typography>\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\n                        <Typography component=\"span\" variant=\"body2\">\n                          {item.text}\n                        </Typography>\n                      </>\n                    }\n                  />\n                </ListItem>\n              ))}\n            {isArray(announcements) && announcements.length === 0 && (\n              <ListItemText primary={i18n.t(\"mainDrawer.appBar.notRegister\")} />\n            )}\n          </List>\n        </Paper>\n      </Popover>\n    </div>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC1E,OAASC,UAAU,KAAQ,0BAA0B,CACrD,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,MAAO,CAAAC,OAAO,KAAM,2BAA2B,CAC/C,MAAO,CAAAC,gBAAgB,KAAM,iCAAiC,CAE9D,OAASC,IAAI,KAAQ,sBAAsB,CAC3C,OAASC,WAAW,KAAQ,gCAAgC,CAE5D,OACEC,MAAM,CACNC,KAAK,CACLC,UAAU,CACVC,IAAI,CACJC,QAAQ,CACRC,cAAc,CACdC,YAAY,CACZC,MAAM,CACNC,KAAK,CACLC,UAAU,CACVC,WAAW,CACXC,aAAa,CACbC,aAAa,CACbC,MAAM,CACNC,iBAAiB,KACZ,mBAAmB,CAC1B,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,OAASC,OAAO,KAAQ,QAAQ,CAChC,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B;AAEA,KAAM,CAAAC,SAAS,CAAGxB,UAAU,CAAEyB,KAAK,GAAM,CACvCC,SAAS,CAAE,CACTC,IAAI,CAAE,CAAC,CACPC,SAAS,CAAE,GAAG,CACdC,QAAQ,CAAE,GAAG,CACbC,OAAO,CAAEL,KAAK,CAACM,OAAO,CAAC,CAAC,CAAC,CACzBC,SAAS,CAAE,QAAQ,CACnB,GAAGP,KAAK,CAACQ,eACX,CACF,CAAC,CAAC,CAAC,CAEH,QAAS,CAAAC,kBAAkBA,CAAAC,IAAA,CAAsC,IAArC,CAAEC,YAAY,CAAEC,IAAI,CAAEC,WAAY,CAAC,CAAAH,IAAA,CAC7D;AACA;AACA;AACA,mBACExC,KAAA,CAAA4C,aAAA,CAAC1B,MAAM,EACLwB,IAAI,CAAEA,IAAK,CACXG,OAAO,CAAEA,CAAA,GAAMF,WAAW,CAAC,CAAE,CAC7B,kBAAgB,oBAAoB,CACpC,mBAAiB,0BAA0B,eAE3C3C,KAAA,CAAA4C,aAAA,CAACvB,WAAW,EAACyB,EAAE,CAAC,oBAAoB,EAAEL,YAAY,CAACM,KAAmB,CAAC,cACvE/C,KAAA,CAAA4C,aAAA,CAACtB,aAAa,MACXmB,YAAY,CAACO,SAAS,eACrBhD,KAAA,CAAA4C,aAAA,QACEK,KAAK,CAAE,CACLC,MAAM,CAAE,mBAAmB,CAC3BC,MAAM,CAAE,aAAa,CACrBC,SAAS,CAAE,QAAQ,CACnBC,KAAK,CAAE,KAAK,CACZC,MAAM,CAAE,GAAG,CACXC,gBAAgB,CAAE,WAAW,CAC7BC,cAAc,CAAE,OAAO,CACvBC,kBAAkB,CAAE,QACtB,CAAE,eAEFzD,KAAA,CAAA4C,aAAA,QACEc,GAAG,qBAAuB,CAC1BC,GAAG,CAAElB,YAAY,CAACO,SAAU,CAC5BC,KAAK,CAAE,CACLI,KAAK,CAAE,KAAK,CACZC,MAAM,CAAE,MACV,CAAE,CACH,CACE,CACN,cACDtD,KAAA,CAAA4C,aAAA,CAACnB,iBAAiB,EAACqB,EAAE,CAAC,0BAA0B,CAACG,KAAK,CAAE,CAAEW,UAAU,CAAE,UAAW,CAAE,EAChFnB,YAAY,CAACoB,IACG,CACN,CAAC,cAChB7D,KAAA,CAAA4C,aAAA,CAACrB,aAAa,mBACZvB,KAAA,CAAA4C,aAAA,CAACpB,MAAM,EAACsC,OAAO,CAAEA,CAAA,GAAMnB,WAAW,CAAC,CAAE,CAACoB,KAAK,CAAC,SAAS,CAACC,SAAS,OAAC,QAExD,CACK,CACT,CAAC,CAEb,CAEA,KAAM,CAAAC,OAAO,CAAGA,CAACC,KAAK,CAAEC,MAAM,GAAK,CACjC,GAAIA,MAAM,CAACC,IAAI,GAAK,oBAAoB,CAAE,CACxC,KAAM,CAAAC,aAAa,CAAGF,MAAM,CAACG,OAAO,CACpC,KAAM,CAAAC,gBAAgB,CAAG,EAAE,CAE3B,GAAI5C,OAAO,CAAC0C,aAAa,CAAC,CAAE,CAC1BA,aAAa,CAACG,OAAO,CAAE/B,YAAY,EAAK,CACtC,KAAM,CAAAgC,iBAAiB,CAAGP,KAAK,CAACQ,SAAS,CACtCC,CAAC,EAAKA,CAAC,CAAC7B,EAAE,GAAKL,YAAY,CAACK,EAC/B,CAAC,CACD,GAAI2B,iBAAiB,GAAK,CAAC,CAAC,CAAE,CAC5BP,KAAK,CAACO,iBAAiB,CAAC,CAAGhC,YAAY,CACzC,CAAC,IAAM,CACL8B,gBAAgB,CAACK,IAAI,CAACnC,YAAY,CAAC,CACrC,CACF,CAAC,CAAC,CACJ,CAEA,MAAO,CAAC,GAAGyB,KAAK,CAAE,GAAGK,gBAAgB,CAAC,CACxC,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,sBAAsB,CAAE,CAC1C,KAAM,CAAA3B,YAAY,CAAG0B,MAAM,CAACG,OAAO,CACnC,KAAM,CAAAG,iBAAiB,CAAGP,KAAK,CAACQ,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAAC7B,EAAE,GAAKL,YAAY,CAACK,EAAE,CAAC,CAE1E,GAAI2B,iBAAiB,GAAK,CAAC,CAAC,CAAE,CAC5BP,KAAK,CAACO,iBAAiB,CAAC,CAAGhC,YAAY,CACvC,MAAO,CAAC,GAAGyB,KAAK,CAAC,CACnB,CAAC,IAAM,CACL,MAAO,CAACzB,YAAY,CAAE,GAAGyB,KAAK,CAAC,CACjC,CACF,CAEA,GAAIC,MAAM,CAACC,IAAI,GAAK,qBAAqB,CAAE,CACzC,KAAM,CAAAS,cAAc,CAAGV,MAAM,CAACG,OAAO,CAErC,KAAM,CAAAG,iBAAiB,CAAGP,KAAK,CAACQ,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAAC7B,EAAE,GAAK+B,cAAc,CAAC,CACzE,GAAIJ,iBAAiB,GAAK,CAAC,CAAC,CAAE,CAC5BP,KAAK,CAACY,MAAM,CAACL,iBAAiB,CAAE,CAAC,CAAC,CACpC,CACA,MAAO,CAAC,GAAGP,KAAK,CAAC,CACnB,CAEA,GAAIC,MAAM,CAACC,IAAI,GAAK,OAAO,CAAE,CAC3B,MAAO,EAAE,CACX,CACF,CAAC,CAED,cAAe,SAAS,CAAAW,oBAAoBA,CAAA,CAAG,CAC7C,KAAM,CAAAC,OAAO,CAAGnD,SAAS,CAAC,CAAC,CAE3B,KAAM,CAACoD,OAAO,CAAEC,UAAU,CAAC,CAAG/E,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACgF,QAAQ,CAAEC,WAAW,CAAC,CAAGjF,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACkF,UAAU,CAAEC,aAAa,CAAC,CAAGnF,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAACoF,OAAO,CAAEC,UAAU,CAAC,CAAGrF,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACsF,WAAW,CAAC,CAAGtF,QAAQ,CAAC,EAAE,CAAC,CAClC,KAAM,CAACkE,aAAa,CAAEqB,QAAQ,CAAC,CAAGxF,UAAU,CAAC+D,OAAO,CAAE,EAAE,CAAC,CACzD,KAAM,CAAC0B,SAAS,CAAEC,YAAY,CAAC,CAAGzF,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACsC,YAAY,CAAEoD,eAAe,CAAC,CAAG1F,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpD,KAAM,CAAC2F,sBAAsB,CAAEC,yBAAyB,CAAC,CAAG5F,QAAQ,CAAC,KAAK,CAAC,CAC7E;AACE,KAAM,CAAE6F,IAAI,CAAEC,MAAO,CAAC,CAAG7F,UAAU,CAACM,WAAW,CAAC,CAGhDT,SAAS,CAAC,IAAM,CACdyF,QAAQ,CAAC,CAAEtB,IAAI,CAAE,OAAQ,CAAC,CAAC,CAC3BkB,aAAa,CAAC,CAAC,CAAC,CAClB,CAAC,CAAE,CAACG,WAAW,CAAC,CAAC,CAEjBxF,SAAS,CAAC,IAAM,CACdiF,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAgB,eAAe,CAAGC,UAAU,CAAC,IAAM,CACvCC,kBAAkB,CAAC,CAAC,CACtB,CAAC,CAAE,GAAG,CAAC,CACP,MAAO,IAAMC,YAAY,CAACH,eAAe,CAAC,CAC1C;AACF,CAAC,CAAE,CAACT,WAAW,CAAEJ,UAAU,CAAC,CAAC,CAE7BpF,SAAS,CAAC,IAAM,CACd,GAAI+F,IAAI,CAACM,SAAS,CAAE,CAClB,KAAM,CAAAA,SAAS,CAAGN,IAAI,CAACM,SAAS,CACtC;AAEM,KAAM,CAAAC,qBAAqB,CAAIC,IAAI,EAAK,CACtC,GAAIA,IAAI,CAACrC,MAAM,GAAK,QAAQ,EAAIqC,IAAI,CAACrC,MAAM,GAAK,QAAQ,CAAE,CACxDuB,QAAQ,CAAC,CAAEtB,IAAI,CAAE,sBAAsB,CAAEE,OAAO,CAAEkC,IAAI,CAACC,MAAO,CAAC,CAAC,CAChEb,YAAY,CAAC,KAAK,CAAC,CACrB,CACA,GAAIY,IAAI,CAACrC,MAAM,GAAK,QAAQ,CAAE,CAC5BuB,QAAQ,CAAC,CAAEtB,IAAI,CAAE,qBAAqB,CAAEE,OAAO,CAAE,CAACkC,IAAI,CAAC1D,EAAG,CAAC,CAAC,CAC9D,CACF,CAAC,CACDmD,MAAM,CAACS,EAAE,wBAAyBH,qBAAqB,CAAC,CAExD,MAAO,IAAM,CACXN,MAAM,CAACU,GAAG,wBAAyBJ,qBAAqB,CAAC,CAC3D,CAAC,CACH,CACF,CAAC,CAAE,CAACP,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAI,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACF,KAAM,CAAEI,IAAK,CAAC,CAAG,KAAM,CAAA9E,GAAG,CAACkF,GAAG,CAAC,iBAAiB,CAAE,CAChDC,MAAM,CAAE,CAAEpB,WAAW,CAAEJ,UAAW,CACpC,CAAC,CAAC,CACFK,QAAQ,CAAC,CAAEtB,IAAI,CAAE,oBAAoB,CAAEE,OAAO,CAAEkC,IAAI,CAACM,OAAQ,CAAC,CAAC,CAC/DtB,UAAU,CAACgB,IAAI,CAACjB,OAAO,CAAC,CACxBL,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAO6B,GAAG,CAAE,CACZzG,UAAU,CAACyG,GAAG,CAAC,CACjB,CACF,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB1B,aAAa,CAAE2B,SAAS,EAAKA,SAAS,CAAG,CAAC,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CAC1B,GAAI,CAAC5B,OAAO,EAAIN,OAAO,CAAE,OACzB,KAAM,CAAEmC,SAAS,CAAEC,YAAY,CAAEC,YAAa,CAAC,CAAGH,CAAC,CAACI,aAAa,CACjE,GAAIF,YAAY,EAAID,SAAS,CAAG,GAAG,CAAC,CAAGE,YAAY,CAAE,CACnDN,QAAQ,CAAC,CAAC,CACZ,CACF,CAAC,CAED,KAAM,CAAAQ,WAAW,CAAIC,KAAK,EAAK,CAC7BrC,WAAW,CAACqC,KAAK,CAACF,aAAa,CAAC,CAChC3B,YAAY,CAAC,IAAI,CAAC,CACpB,CAAC,CAED,KAAM,CAAAjD,WAAW,CAAGA,CAAA,GAAM,CACxByC,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED,KAAM,CAAAsC,cAAc,CAAIC,QAAQ,EAAK,CACnC,GAAIA,QAAQ,GAAK,CAAC,CAAE,CAClB,MAAO,mBAAmB,CAC5B,CACA,GAAIA,QAAQ,GAAK,CAAC,CAAE,CAClB,MAAO,kBAAkB,CAC3B,CACA,GAAIA,QAAQ,GAAK,CAAC,CAAE,CAClB,MAAO,gBAAgB,CACzB,CACF,CAAC,CAGD,KAAM,CAAAC,4BAA4B,CAAInB,MAAM,EAAK,CAC/CZ,eAAe,CAACY,MAAM,CAAC,CACvBV,yBAAyB,CAAC,IAAI,CAAC,CAC/BX,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAED,KAAM,CAAA1C,IAAI,CAAGmF,OAAO,CAAC1C,QAAQ,CAAC,CAC9B,KAAM,CAAArC,EAAE,CAAGJ,IAAI,CAAG,gBAAgB,CAAGoF,SAAS,CAE9C,mBACE9H,KAAA,CAAA4C,aAAA,yBACE5C,KAAA,CAAA4C,aAAA,CAACL,kBAAkB,EACjBE,YAAY,CAAEA,YAAa,CAC3BC,IAAI,CAAEoD,sBAAuB,CAC7BnD,WAAW,CAAEA,CAAA,GAAMoD,yBAAyB,CAAC,KAAK,CAAE,CACrD,CAAC,cACF/F,KAAA,CAAA4C,aAAA,CAAC/B,UAAU,EACTkH,OAAO,CAAC,WAAW,CACnB,mBAAkBjF,EAAG,CACrBgB,OAAO,CAAE0D,WAAY,CACrBvE,KAAK,CAAE,CAAEc,KAAK,CAAE,OAAQ,CAAE,eAE1B/D,KAAA,CAAA4C,aAAA,CAAChC,KAAK,EACJmD,KAAK,CAAC,WAAW,CACjBgE,OAAO,CAAC,KAAK,CACbpC,SAAS,CAAEA,SAAS,EAAItB,aAAa,CAAC2D,MAAM,CAAG,CAAE,eAEjDhI,KAAA,CAAA4C,aAAA,CAACpC,gBAAgB,KAAE,CACd,CACG,CAAC,cACbR,KAAA,CAAA4C,aAAA,CAACrC,OAAO,EACNuC,EAAE,CAAEA,EAAG,CACPJ,IAAI,CAAEA,IAAK,CACXyC,QAAQ,CAAEA,QAAS,CACnBtC,OAAO,CAAEF,WAAY,CACrBsF,YAAY,CAAE,CACZC,QAAQ,CAAE,QAAQ,CAClBC,UAAU,CAAE,QACd,CAAE,CACFC,eAAe,CAAE,CACfF,QAAQ,CAAE,KAAK,CACfC,UAAU,CAAE,QACd,CAAE,eAEFnI,KAAA,CAAA4C,aAAA,CAACzB,KAAK,EACJ4G,OAAO,CAAC,UAAU,CAClBM,QAAQ,CAAEnB,YAAa,CACvBoB,SAAS,CAAEtD,OAAO,CAACjD,SAAU,eAE7B/B,KAAA,CAAA4C,aAAA,CAAC9B,IAAI,EACHyH,SAAS,CAAC,KAAK,CACf,aAAW,sBAAsB,CACjCtF,KAAK,CAAE,CAAEuF,QAAQ,CAAE,GAAI,CAAE,EAExB7G,OAAO,CAAC0C,aAAa,CAAC,EACrBA,aAAa,CAACoE,GAAG,CAAC,CAACC,IAAI,CAAEC,GAAG,gBAC1B3I,KAAA,CAAA4C,aAAA,CAAC7B,QAAQ,EACP4H,GAAG,CAAEA,GAAI,CACT1F,KAAK,CAAE,CACL2F,UAAU,CAAED,GAAG,CAAG,CAAC,GAAK,CAAC,CAAG,SAAS,CAAG,WAAW,CACnDzF,MAAM,CAAE,gBAAgB,CACxB2F,UAAU,CAAEnB,cAAc,CAACgB,IAAI,CAACf,QAAQ,CAAC,CACzCmB,MAAM,CAAE,SACV,CAAE,CACFhF,OAAO,CAAEA,CAAA,GAAM8D,4BAA4B,CAACc,IAAI,CAAE,EAEjDA,IAAI,CAAC1F,SAAS,eACbhD,KAAA,CAAA4C,aAAA,CAAC5B,cAAc,mBACbhB,KAAA,CAAA4C,aAAA,CAACjC,MAAM,EACLgD,GAAG,CAAE+E,IAAI,CAAC1F,SAAU,CACrB,CACa,CACjB,cACDhD,KAAA,CAAA4C,aAAA,CAAC3B,YAAY,EACX8H,OAAO,CAAEL,IAAI,CAAC3F,KAAM,CACpBiG,SAAS,cACPhJ,KAAA,CAAA4C,aAAA,CAAA5C,KAAA,CAAAiJ,QAAA,mBACEjJ,KAAA,CAAA4C,aAAA,CAACxB,UAAU,EAACmH,SAAS,CAAC,MAAM,CAACtF,KAAK,CAAE,CAAEiG,QAAQ,CAAE,EAAG,CAAE,EAClDtH,MAAM,CAAC8G,IAAI,CAACS,SAAS,CAAC,CAACC,MAAM,CAAC,YAAY,CACjC,CAAC,cACbpJ,KAAA,CAAA4C,aAAA,SAAMK,KAAK,CAAE,CAAEoG,SAAS,CAAE,CAAC,CAAEC,OAAO,CAAE,OAAQ,CAAE,CAAO,CAAC,cACxDtJ,KAAA,CAAA4C,aAAA,CAACxB,UAAU,EAACmH,SAAS,CAAC,MAAM,CAACR,OAAO,CAAC,OAAO,EACzCW,IAAI,CAAC7E,IACI,CACZ,CACH,CACF,CACO,CACX,CAAC,CACHlC,OAAO,CAAC0C,aAAa,CAAC,EAAIA,aAAa,CAAC2D,MAAM,GAAK,CAAC,eACnDhI,KAAA,CAAA4C,aAAA,CAAC3B,YAAY,EAAC8H,OAAO,CAAEtI,IAAI,CAAC8I,CAAC,CAAC,+BAA+B,CAAE,CAAE,CAE/D,CACD,CACA,CACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module"}