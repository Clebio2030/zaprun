{"ast":null,"code":"import React,{useState,useCallback,useContext,useEffect}from\"react\";import{toast}from\"react-toastify\";import{format,parseISO,set}from\"date-fns\";import Menu from\"@material-ui/core/Menu\";import MenuItem from\"@material-ui/core/MenuItem\";import PopupState,{bindTrigger,bindMenu}from\"material-ui-popup-state\";import{Stack}from\"@mui/material\";import{makeStyles}from\"@material-ui/core/styles\";import{useHistory}from\"react-router-dom\";import{green}from\"@material-ui/core/colors\";import{Button,TableBody,TableRow,TableCell,IconButton,Table,TableHead,Paper,Tooltip,Typography,CircularProgress,Divider}from\"@material-ui/core\";import{Edit,CheckCircle,SignalCellularConnectedNoInternet2Bar,SignalCellularConnectedNoInternet0Bar,SignalCellular4Bar,CropFree,DeleteOutline,Facebook,Instagram,WhatsApp}from\"@material-ui/icons\";import FacebookLogin from\"react-facebook-login/dist/facebook-login-render-props\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import{AuthContext}from\"../../context/Auth/AuthContext\";import useCompanies from\"../../hooks/useCompanies\";import api from\"../../services/api\";import WhatsAppModal from\"../../components/WhatsAppModal\";import WhatsAppModalCompany from\"../../components/CompanyWhatsapps\";import ConfirmationModal from\"../../components/ConfirmationModal\";import QrcodeModal from\"../../components/QrcodeModal\";import{i18n}from\"../../translate/i18n\";import{WhatsAppsContext}from\"../../context/WhatsApp/WhatsAppsContext\";import toastError from\"../../errors/toastError\";import ForbiddenPage from\"../../components/ForbiddenPage\";const useStyles=makeStyles(theme=>({mainPaper:{flex:1,padding:theme.spacing(1),overflowY:\"scroll\",borderRadius:\"10px\",boxShadow:\"rgba(0, 0, 0, 0.1) 0px 4px 12px\",...theme.scrollbarStyles},customTableCell:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},tooltip:{backgroundColor:\"#f5f5f9\",color:\"rgba(0, 0, 0, 0.87)\",fontSize:theme.typography.pxToRem(14),border:\"1px solid #dadde9\",maxWidth:450},tooltipPopper:{textAlign:\"center\"},buttonProgress:{color:green[500]},TableHead:{backgroundColor:theme.palette.barraSuperior,//\"#3d3d3d\",\ncolor:\"textSecondary\",borderRadius:\"5px\"}}));const CustomToolTip=_ref=>{let{title,content,children}=_ref;const classes=useStyles();return/*#__PURE__*/React.createElement(Tooltip,{arrow:true,classes:{tooltip:classes.tooltip,popper:classes.tooltipPopper},title:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,color:\"inherit\"},title),content&&/*#__PURE__*/React.createElement(Typography,null,content))},children);};const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/React.createElement(Facebook,null);case\"instagram\":return/*#__PURE__*/React.createElement(Instagram,null);case\"whatsapp\":return/*#__PURE__*/React.createElement(WhatsApp,null);default:return\"error\";}};const AllConnections=()=>{const classes=useStyles();const{user,socket}=useContext(AuthContext);const{list}=useCompanies();const[loadingWhatsapp,setLoadingWhatsapp]=useState(true);const[loadingComp,setLoadingComp]=useState(false);const[whats,setWhats]=useState([]);const[whatsAppModalOpen,setWhatsAppModalOpen]=useState(false);const[companies,setCompanies]=useState([]);const[qrModalOpen,setQrModalOpen]=useState(false);const[selectedWhatsApp,setSelectedWhatsApp]=useState(null);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const[filterConnections,setFilterConnections]=useState([]);const[companyWhatsApps,setCompanyWhatsApps]=useState(null);const confirmationModalInitialState={action:\"\",title:\"\",message:\"\",whatsAppId:\"\",open:false};const[confirmModalInfo,setConfirmModalInfo]=useState(confirmationModalInitialState);const history=useHistory();if(!user.super){history.push(\"/tickets\");}useEffect(()=>{setLoadingWhatsapp(true);const fetchSession=async()=>{try{const{data}=await api.get(\"/whatsapp/all/?session=0\");setWhats(data);setLoadingWhatsapp(false);}catch(err){setLoadingWhatsapp(false);toastError(err);}};fetchSession();},[]);const responseFacebook=response=>{if(response.status!==\"unknown\"){const{accessToken,id}=response;api.post(\"/facebook\",{facebookUserId:id,facebookUserToken:accessToken}).then(response=>{toast.success(i18n.t(\"connections.facebook.success\"));}).catch(error=>{toastError(error);});}};useEffect(()=>{loadCompanies();},[]);const loadCompanies=async()=>{setLoadingComp(true);try{const companyList=await list();setCompanies(companyList);}catch(e){toast.error(\"Não foi possível carregar a lista de registros\");}setLoadingComp(false);};const responseInstagram=response=>{if(response.status!==\"unknown\"){const{accessToken,id}=response;api.post(\"/facebook\",{addInstagram:true,facebookUserId:id,facebookUserToken:accessToken}).then(response=>{toast.success(i18n.t(\"connections.facebook.success\"));}).catch(error=>{toastError(error);});}};const handleStartWhatsAppSession=async whatsAppId=>{try{await api.post(\"/whatsappsession/\".concat(whatsAppId));}catch(err){toastError(err);}};const handleRequestNewQrCode=async whatsAppId=>{try{await api.put(\"/whatsappsession/\".concat(whatsAppId));}catch(err){toastError(err);}};const handleOpenWhatsAppModal=(whatsappsFilter,comp)=>{setSelectedWhatsApp(null);setWhatsAppModalOpen(true);if((whatsappsFilter===null||whatsappsFilter===void 0?void 0:whatsappsFilter.length)>0){setFilterConnections(whatsappsFilter);setCompanyWhatsApps(comp);}};const handleCloseWhatsAppModal=useCallback(()=>{setWhatsAppModalOpen(false);setSelectedWhatsApp(null);setFilterConnections([]);setCompanyWhatsApps(null);},[setSelectedWhatsApp,setWhatsAppModalOpen]);const handleOpenQrModal=whatsApp=>{setSelectedWhatsApp(whatsApp);setQrModalOpen(true);};const handleCloseQrModal=useCallback(()=>{setSelectedWhatsApp(null);setQrModalOpen(false);},[setQrModalOpen,setSelectedWhatsApp]);const handleEditWhatsApp=whatsApp=>{setSelectedWhatsApp(whatsApp);setWhatsAppModalOpen(true);};const handleOpenConfirmationModal=(action,whatsAppId)=>{if(action===\"disconnect\"){setConfirmModalInfo({action:action,title:i18n.t(\"connections.confirmationModal.disconnectTitle\"),message:i18n.t(\"connections.confirmationModal.disconnectMessage\"),whatsAppId:whatsAppId});}if(action===\"delete\"){setConfirmModalInfo({action:action,title:i18n.t(\"connections.confirmationModal.deleteTitle\"),message:i18n.t(\"connections.confirmationModal.deleteMessage\"),whatsAppId:whatsAppId});}setConfirmModalOpen(true);};const handleSubmitConfirmationModal=async()=>{if(confirmModalInfo.action===\"disconnect\"){try{await api.delete(\"/whatsappsession/\".concat(confirmModalInfo.whatsAppId));}catch(err){toastError(err);}}if(confirmModalInfo.action===\"delete\"){try{await api.delete(\"/whatsapp/\".concat(confirmModalInfo.whatsAppId));toast.success(i18n.t(\"connections.toasts.deleted\"));}catch(err){toastError(err);}}setConfirmModalInfo(confirmationModalInitialState);};const renderActionButtons=whatsApp=>{return/*#__PURE__*/React.createElement(React.Fragment,null,whatsApp.status===\"qrcode\"&&/*#__PURE__*/React.createElement(Button,{size:\"small\",variant:\"contained\",color:\"primary\",onClick:()=>handleOpenQrModal(whatsApp)},i18n.t(\"connections.buttons.qrcode\")),whatsApp.status===\"DISCONNECTED\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{size:\"small\",variant:\"outlined\",color:\"primary\",onClick:()=>handleStartWhatsAppSession(whatsApp.id)},i18n.t(\"connections.buttons.tryAgain\")),\" \",/*#__PURE__*/React.createElement(Button,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>handleRequestNewQrCode(whatsApp.id)},i18n.t(\"connections.buttons.newQr\"))),(whatsApp.status===\"CONNECTED\"||whatsApp.status===\"PAIRING\"||whatsApp.status===\"TIMEOUT\")&&/*#__PURE__*/React.createElement(Button,{size:\"small\",variant:\"outlined\",color:\"secondary\",onClick:()=>{handleOpenConfirmationModal(\"disconnect\",whatsApp.id);}},i18n.t(\"connections.buttons.disconnect\")),whatsApp.status===\"OPENING\"&&/*#__PURE__*/React.createElement(Button,{size:\"small\",variant:\"outlined\",disabled:true,color:\"default\"},i18n.t(\"connections.buttons.connecting\")));};const renderStatusToolTips=whatsApp=>{return/*#__PURE__*/React.createElement(\"div\",{className:classes.customTableCell},whatsApp.status===\"DISCONNECTED\"&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.disconnected.title\"),content:i18n.t(\"connections.toolTips.disconnected.content\")},/*#__PURE__*/React.createElement(SignalCellularConnectedNoInternet0Bar,{color:\"secondary\"})),whatsApp.status===\"OPENING\"&&/*#__PURE__*/React.createElement(CircularProgress,{size:24,className:classes.buttonProgress}),whatsApp.status===\"qrcode\"&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.qrcode.title\"),content:i18n.t(\"connections.toolTips.qrcode.content\")},/*#__PURE__*/React.createElement(CropFree,null)),whatsApp.status===\"CONNECTED\"&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.connected.title\")},/*#__PURE__*/React.createElement(SignalCellular4Bar,{style:{color:green[500]}})),(whatsApp.status===\"TIMEOUT\"||whatsApp.status===\"PAIRING\")&&/*#__PURE__*/React.createElement(CustomToolTip,{title:i18n.t(\"connections.toolTips.timeout.title\"),content:i18n.t(\"connections.toolTips.timeout.content\")},/*#__PURE__*/React.createElement(SignalCellularConnectedNoInternet2Bar,{color:\"secondary\"})));};return/*#__PURE__*/React.createElement(MainContainer,null,/*#__PURE__*/React.createElement(ConfirmationModal,{title:confirmModalInfo.title,open:confirmModalOpen,onClose:setConfirmModalOpen,onConfirm:handleSubmitConfirmationModal},confirmModalInfo.message),/*#__PURE__*/React.createElement(QrcodeModal,{open:qrModalOpen,onClose:handleCloseQrModal,whatsAppId:!whatsAppModalOpen&&(selectedWhatsApp===null||selectedWhatsApp===void 0?void 0:selectedWhatsApp.id)}),/*#__PURE__*/React.createElement(WhatsAppModalCompany,{open:whatsAppModalOpen,onClose:handleCloseWhatsAppModal,filteredWhatsapps:filterConnections,companyInfos:companyWhatsApps,whatsAppId:!qrModalOpen&&(selectedWhatsApp===null||selectedWhatsApp===void 0?void 0:selectedWhatsApp.id)}),user.profile===\"user\"?/*#__PURE__*/React.createElement(ForbiddenPage,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,style:{overflow:\"hidden\"},variant:\"outlined\"},/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Stack,null,/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",color:\"black\",style:{fontWeight:\"bold\",marginLeft:\"10px\",marginTop:\"10px\"},gutterBottom:true},i18n.t(\"connections.title\")),/*#__PURE__*/React.createElement(Typography,{style:{marginTop:\"-10px\",marginLeft:\"10px\"},variant:\"caption\",color:\"textSecondary\"},\"Conecte seus canais de atendimento para receber mensagens e iniciar conversas com seus clientes.\")),/*#__PURE__*/React.createElement(MainHeaderButtonsWrapper,null,/*#__PURE__*/React.createElement(PopupState,{variant:\"popover\",popupId:\"demo-popup-menu\"},popupState=>/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Menu,bindMenu(popupState),/*#__PURE__*/React.createElement(MenuItem,{onClick:()=>{handleOpenWhatsAppModal();popupState.close();}},/*#__PURE__*/React.createElement(WhatsApp,{fontSize:\"small\",style:{marginRight:\"10px\"}}),\"WhatsApp\"),/*#__PURE__*/React.createElement(FacebookLogin,{appId:process.env.REACT_APP_FACEBOOK_APP_ID,autoLoad:false,fields:\"name,email,picture\",version:\"13.0\",scope:\"public_profile,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\",callback:responseFacebook,render:renderProps=>/*#__PURE__*/React.createElement(MenuItem,{onClick:renderProps.onClick},/*#__PURE__*/React.createElement(Facebook,{fontSize:\"small\",style:{marginRight:\"10px\"}}),\"Facebook\")}),/*#__PURE__*/React.createElement(FacebookLogin,{appId:process.env.REACT_APP_FACEBOOK_APP_ID,autoLoad:false,fields:\"name,email,picture\",version:\"13.0\",scope:\"public_profile,instagram_basic,instagram_manage_messages,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\",callback:responseInstagram,render:renderProps=>/*#__PURE__*/React.createElement(MenuItem,{onClick:renderProps.onClick},/*#__PURE__*/React.createElement(Instagram,{fontSize:\"small\",style:{marginRight:\"10px\"}}),\"Instagram\")})))))),/*#__PURE__*/React.createElement(Stack,{style:{overflowY:\"auto\",padding:\"20px\",backgroundColor:\"rgb(244 244 244 / 53%)\",borderRadius:\"5px\",height:\"93%\"}},/*#__PURE__*/React.createElement(Paper,null,/*#__PURE__*/React.createElement(Table,{size:\"small\"},/*#__PURE__*/React.createElement(TableHead,{className:classes.TableHead},/*#__PURE__*/React.createElement(TableRow,{style:{color:\"#fff\"}},/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},i18n.t(\"Cliente\")),/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},i18n.t(\"Conexões conectadas\")),/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},i18n.t(\"Conexões desconectadas\")),/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},i18n.t(\"Total de Conexões\")),user.profile===\"admin\"&&/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},i18n.t(\"connections.table.actions\")))),/*#__PURE__*/React.createElement(TableBody,null,loadingWhatsapp?/*#__PURE__*/React.createElement(TableRowSkeleton,null):/*#__PURE__*/React.createElement(React.Fragment,null,(companies===null||companies===void 0?void 0:companies.length)>0&&companies.map(company=>/*#__PURE__*/React.createElement(TableRow,{key:company.id},/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},company===null||company===void 0?void 0:company.name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)&&(item===null||item===void 0?void 0:item.status)==='CONNECTED').length),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)&&(item===null||item===void 0?void 0:item.status)!=='CONNECTED').length),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)).length),user.profile===\"admin\"&&/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:()=>handleOpenWhatsAppModal(whats.filter(item=>(item===null||item===void 0?void 0:item.companyId)===(company===null||company===void 0?void 0:company.id)),company)},/*#__PURE__*/React.createElement(Edit,null))))),/*#__PURE__*/React.createElement(TableRow,{className:classes.TableHead},/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},i18n.t(\"Total\")),/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.status)==='CONNECTED').length),/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},(whats===null||whats===void 0?void 0:whats.length)&&whats.filter(item=>(item===null||item===void 0?void 0:item.status)!=='CONNECTED').length),/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"},(whats===null||whats===void 0?void 0:whats.length)&&whats.length),user.profile===\"admin\"&&/*#__PURE__*/React.createElement(TableCell,{style:{color:\"#fff\"},align:\"center\"}))))))))));};export default AllConnections;","map":{"version":3,"names":["React","useState","useCallback","useContext","useEffect","toast","format","parseISO","set","Menu","MenuItem","PopupState","bindTrigger","bindMenu","Stack","makeStyles","useHistory","green","Button","TableBody","TableRow","TableCell","IconButton","Table","TableHead","Paper","Tooltip","Typography","CircularProgress","Divider","Edit","CheckCircle","SignalCellularConnectedNoInternet2Bar","SignalCellularConnectedNoInternet0Bar","SignalCellular4Bar","CropFree","DeleteOutline","Facebook","Instagram","WhatsApp","FacebookLogin","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","TableRowSkeleton","AuthContext","useCompanies","api","WhatsAppModal","WhatsAppModalCompany","ConfirmationModal","QrcodeModal","i18n","WhatsAppsContext","toastError","ForbiddenPage","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","borderRadius","boxShadow","scrollbarStyles","customTableCell","display","alignItems","justifyContent","tooltip","backgroundColor","color","fontSize","typography","pxToRem","border","maxWidth","tooltipPopper","textAlign","buttonProgress","palette","barraSuperior","CustomToolTip","_ref","title","content","children","classes","createElement","arrow","popper","Fragment","gutterBottom","IconChannel","channel","AllConnections","user","socket","list","loadingWhatsapp","setLoadingWhatsapp","loadingComp","setLoadingComp","whats","setWhats","whatsAppModalOpen","setWhatsAppModalOpen","companies","setCompanies","qrModalOpen","setQrModalOpen","selectedWhatsApp","setSelectedWhatsApp","confirmModalOpen","setConfirmModalOpen","filterConnections","setFilterConnections","companyWhatsApps","setCompanyWhatsApps","confirmationModalInitialState","action","message","whatsAppId","open","confirmModalInfo","setConfirmModalInfo","history","super","push","fetchSession","data","get","err","responseFacebook","response","status","accessToken","id","post","facebookUserId","facebookUserToken","then","success","t","catch","error","loadCompanies","companyList","e","responseInstagram","addInstagram","handleStartWhatsAppSession","concat","handleRequestNewQrCode","put","handleOpenWhatsAppModal","whatsappsFilter","comp","length","handleCloseWhatsAppModal","handleOpenQrModal","whatsApp","handleCloseQrModal","handleEditWhatsApp","handleOpenConfirmationModal","handleSubmitConfirmationModal","delete","renderActionButtons","size","variant","onClick","disabled","renderStatusToolTips","className","style","onClose","onConfirm","filteredWhatsapps","companyInfos","profile","overflow","fontWeight","marginLeft","marginTop","popupId","popupState","close","marginRight","appId","process","env","REACT_APP_FACEBOOK_APP_ID","autoLoad","fields","version","scope","callback","render","renderProps","height","align","map","company","key","name","filter","item","companyId"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/AllConnections/index.js"],"sourcesContent":["import React, { useState, useCallback, useContext, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { format, parseISO, set } from \"date-fns\";\r\n\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport PopupState, { bindTrigger, bindMenu } from \"material-ui-popup-state\";\r\nimport { Stack } from \"@mui/material\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport {\r\n  Button,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  IconButton,\r\n  Table,\r\n  TableHead,\r\n  Paper,\r\n  Tooltip,\r\n  Typography,\r\n  CircularProgress,\r\n  Divider\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Edit,\r\n  CheckCircle,\r\n  SignalCellularConnectedNoInternet2Bar,\r\n  SignalCellularConnectedNoInternet0Bar,\r\n  SignalCellular4Bar,\r\n  CropFree,\r\n  DeleteOutline,\r\n  Facebook,\r\n  Instagram,\r\n  WhatsApp\r\n} from \"@material-ui/icons\";\r\n\r\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport useCompanies from \"../../hooks/useCompanies\";\r\nimport api from \"../../services/api\";\r\nimport WhatsAppModal from \"../../components/WhatsAppModal\";\r\nimport WhatsAppModalCompany from \"../../components/CompanyWhatsapps\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport QrcodeModal from \"../../components/QrcodeModal\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { WhatsAppsContext } from \"../../context/WhatsApp/WhatsAppsContext\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    borderRadius: \"10px\",\r\n    boxShadow: \"rgba(0, 0, 0, 0.1) 0px 4px 12px\",\r\n    ...theme.scrollbarStyles\r\n  },\r\n  customTableCell: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  tooltip: {\r\n    backgroundColor: \"#f5f5f9\",\r\n    color: \"rgba(0, 0, 0, 0.87)\",\r\n    fontSize: theme.typography.pxToRem(14),\r\n    border: \"1px solid #dadde9\",\r\n    maxWidth: 450\r\n  },\r\n  tooltipPopper: {\r\n    textAlign: \"center\"\r\n  },\r\n  buttonProgress: {\r\n    color: green[500]\r\n  },\r\n  TableHead: {\r\n    backgroundColor: theme.palette.barraSuperior,//\"#3d3d3d\",\r\n    color: \"textSecondary\",\r\n    borderRadius: \"5px\"\r\n  }\r\n}));\r\n\r\nconst CustomToolTip = ({ title, content, children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip\r\n      arrow\r\n      classes={{\r\n        tooltip: classes.tooltip,\r\n        popper: classes.tooltipPopper\r\n      }}\r\n      title={\r\n        <React.Fragment>\r\n          <Typography gutterBottom color=\"inherit\">\r\n            {title}\r\n          </Typography>\r\n          {content && <Typography>{content}</Typography>}\r\n        </React.Fragment>\r\n      }\r\n    >\r\n      {children}\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nconst IconChannel = channel => {\r\n  switch (channel) {\r\n    case \"facebook\":\r\n      return <Facebook />;\r\n    case \"instagram\":\r\n      return <Instagram />;\r\n    case \"whatsapp\":\r\n      return <WhatsApp />;\r\n    default:\r\n      return \"error\";\r\n  }\r\n};\r\n\r\nconst AllConnections = () => {\r\n  const classes = useStyles();\r\n  const { user, socket } = useContext(AuthContext);\r\n  const { list } = useCompanies();\r\n  const [loadingWhatsapp, setLoadingWhatsapp] = useState(true);\r\n  const [loadingComp, setLoadingComp] = useState(false);\r\n  const [whats, setWhats] = useState([]);\r\n  const [whatsAppModalOpen, setWhatsAppModalOpen] = useState(false);\r\n  const [companies, setCompanies] = useState([]);\r\n  const [qrModalOpen, setQrModalOpen] = useState(false);\r\n  const [selectedWhatsApp, setSelectedWhatsApp] = useState(null);\r\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n  const [filterConnections, setFilterConnections] = useState([]);\r\n  const [companyWhatsApps, setCompanyWhatsApps] = useState(null);\r\n  const confirmationModalInitialState = {\r\n    action: \"\",\r\n    title: \"\",\r\n    message: \"\",\r\n    whatsAppId: \"\",\r\n    open: false\r\n  };\r\n  const [confirmModalInfo, setConfirmModalInfo] = useState(\r\n    confirmationModalInitialState\r\n  );\r\n\r\n  const history = useHistory();\r\n  if (!user.super) {\r\n    history.push(\"/tickets\")\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    setLoadingWhatsapp(true);\r\n    const fetchSession = async () => {\r\n      try {\r\n        const { data } = await api.get(\"/whatsapp/all/?session=0\");\r\n        setWhats(data);\r\n        setLoadingWhatsapp(false);\r\n      } catch (err) {\r\n        setLoadingWhatsapp(false);\r\n        toastError(err);\r\n      }\r\n    };\r\n    fetchSession();\r\n  }, []);\r\n\r\n  const responseFacebook = response => {\r\n    if (response.status !== \"unknown\") {\r\n      const { accessToken, id } = response;\r\n\r\n      api\r\n        .post(\"/facebook\", {\r\n          facebookUserId: id,\r\n          facebookUserToken: accessToken\r\n        })\r\n        .then(response => {\r\n          toast.success(i18n.t(\"connections.facebook.success\"));\r\n        })\r\n        .catch(error => {\r\n          toastError(error);\r\n        });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    loadCompanies();\r\n  }, []);\r\n  const loadCompanies = async () => {\r\n    setLoadingComp(true);\r\n    try {\r\n      const companyList = await list();\r\n      setCompanies(companyList);\r\n    } catch (e) {\r\n      toast.error(\"Não foi possível carregar a lista de registros\");\r\n    }\r\n    setLoadingComp(false);\r\n  }\r\n\r\n  const responseInstagram = response => {\r\n    if (response.status !== \"unknown\") {\r\n      const { accessToken, id } = response;\r\n\r\n      api\r\n        .post(\"/facebook\", {\r\n          addInstagram: true,\r\n          facebookUserId: id,\r\n          facebookUserToken: accessToken\r\n        })\r\n        .then(response => {\r\n          toast.success(i18n.t(\"connections.facebook.success\"));\r\n        })\r\n        .catch(error => {\r\n          toastError(error);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleStartWhatsAppSession = async whatsAppId => {\r\n    try {\r\n      await api.post(`/whatsappsession/${whatsAppId}`);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleRequestNewQrCode = async whatsAppId => {\r\n    try {\r\n      await api.put(`/whatsappsession/${whatsAppId}`);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenWhatsAppModal = (whatsappsFilter, comp) => {\r\n    setSelectedWhatsApp(null);\r\n    setWhatsAppModalOpen(true);\r\n    if (whatsappsFilter?.length > 0) {\r\n      setFilterConnections(whatsappsFilter);\r\n      setCompanyWhatsApps(comp);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const handleCloseWhatsAppModal = useCallback(() => {\r\n    setWhatsAppModalOpen(false);\r\n    setSelectedWhatsApp(null);\r\n    setFilterConnections([]);\r\n    setCompanyWhatsApps(null);\r\n  }, [setSelectedWhatsApp, setWhatsAppModalOpen]);\r\n\r\n  const handleOpenQrModal = whatsApp => {\r\n    setSelectedWhatsApp(whatsApp);\r\n    setQrModalOpen(true);\r\n  };\r\n\r\n  const handleCloseQrModal = useCallback(() => {\r\n    setSelectedWhatsApp(null);\r\n    setQrModalOpen(false);\r\n  }, [setQrModalOpen, setSelectedWhatsApp]);\r\n\r\n  const handleEditWhatsApp = whatsApp => {\r\n    setSelectedWhatsApp(whatsApp);\r\n    setWhatsAppModalOpen(true);\r\n  };\r\n\r\n  const handleOpenConfirmationModal = (action, whatsAppId) => {\r\n    if (action === \"disconnect\") {\r\n      setConfirmModalInfo({\r\n        action: action,\r\n        title: i18n.t(\"connections.confirmationModal.disconnectTitle\"),\r\n        message: i18n.t(\"connections.confirmationModal.disconnectMessage\"),\r\n        whatsAppId: whatsAppId\r\n      });\r\n    }\r\n\r\n    if (action === \"delete\") {\r\n      setConfirmModalInfo({\r\n        action: action,\r\n        title: i18n.t(\"connections.confirmationModal.deleteTitle\"),\r\n        message: i18n.t(\"connections.confirmationModal.deleteMessage\"),\r\n        whatsAppId: whatsAppId\r\n      });\r\n    }\r\n    setConfirmModalOpen(true);\r\n  };\r\n\r\n  const handleSubmitConfirmationModal = async () => {\r\n    if (confirmModalInfo.action === \"disconnect\") {\r\n      try {\r\n        await api.delete(`/whatsappsession/${confirmModalInfo.whatsAppId}`);\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    }\r\n\r\n    if (confirmModalInfo.action === \"delete\") {\r\n      try {\r\n        await api.delete(`/whatsapp/${confirmModalInfo.whatsAppId}`);\r\n        toast.success(i18n.t(\"connections.toasts.deleted\"));\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    }\r\n\r\n    setConfirmModalInfo(confirmationModalInitialState);\r\n  };\r\n\r\n  const renderActionButtons = whatsApp => {\r\n    return (\r\n      <>\r\n        {whatsApp.status === \"qrcode\" && (\r\n          <Button\r\n            size=\"small\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => handleOpenQrModal(whatsApp)}\r\n          >\r\n            {i18n.t(\"connections.buttons.qrcode\")}\r\n          </Button>\r\n        )}\r\n        {whatsApp.status === \"DISCONNECTED\" && (\r\n          <>\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => handleStartWhatsAppSession(whatsApp.id)}\r\n            >\r\n              {i18n.t(\"connections.buttons.tryAgain\")}\r\n            </Button>{\" \"}\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"secondary\"\r\n              onClick={() => handleRequestNewQrCode(whatsApp.id)}\r\n            >\r\n              {i18n.t(\"connections.buttons.newQr\")}\r\n            </Button>\r\n          </>\r\n        )}\r\n        {(whatsApp.status === \"CONNECTED\" ||\r\n          whatsApp.status === \"PAIRING\" ||\r\n          whatsApp.status === \"TIMEOUT\") && (\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                handleOpenConfirmationModal(\"disconnect\", whatsApp.id);\r\n              }}\r\n            >\r\n              {i18n.t(\"connections.buttons.disconnect\")}\r\n            </Button>\r\n          )}\r\n        {whatsApp.status === \"OPENING\" && (\r\n          <Button size=\"small\" variant=\"outlined\" disabled color=\"default\">\r\n            {i18n.t(\"connections.buttons.connecting\")}\r\n          </Button>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderStatusToolTips = whatsApp => {\r\n    return (\r\n      <div className={classes.customTableCell}>\r\n        {whatsApp.status === \"DISCONNECTED\" && (\r\n          <CustomToolTip\r\n            title={i18n.t(\"connections.toolTips.disconnected.title\")}\r\n            content={i18n.t(\"connections.toolTips.disconnected.content\")}\r\n          >\r\n            <SignalCellularConnectedNoInternet0Bar color=\"secondary\" />\r\n          </CustomToolTip>\r\n        )}\r\n        {whatsApp.status === \"OPENING\" && (\r\n          <CircularProgress size={24} className={classes.buttonProgress} />\r\n        )}\r\n        {whatsApp.status === \"qrcode\" && (\r\n          <CustomToolTip\r\n            title={i18n.t(\"connections.toolTips.qrcode.title\")}\r\n            content={i18n.t(\"connections.toolTips.qrcode.content\")}\r\n          >\r\n            <CropFree />\r\n          </CustomToolTip>\r\n        )}\r\n        {whatsApp.status === \"CONNECTED\" && (\r\n          <CustomToolTip title={i18n.t(\"connections.toolTips.connected.title\")}>\r\n            <SignalCellular4Bar style={{ color: green[500] }} />\r\n          </CustomToolTip>\r\n        )}\r\n        {(whatsApp.status === \"TIMEOUT\" || whatsApp.status === \"PAIRING\") && (\r\n          <CustomToolTip\r\n            title={i18n.t(\"connections.toolTips.timeout.title\")}\r\n            content={i18n.t(\"connections.toolTips.timeout.content\")}\r\n          >\r\n            <SignalCellularConnectedNoInternet2Bar color=\"secondary\" />\r\n          </CustomToolTip>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <MainContainer>\r\n      <ConfirmationModal\r\n        title={confirmModalInfo.title}\r\n        open={confirmModalOpen}\r\n        onClose={setConfirmModalOpen}\r\n        onConfirm={handleSubmitConfirmationModal}\r\n      >\r\n        {confirmModalInfo.message}\r\n      </ConfirmationModal>\r\n      <QrcodeModal\r\n        open={qrModalOpen}\r\n        onClose={handleCloseQrModal}\r\n        whatsAppId={!whatsAppModalOpen && selectedWhatsApp?.id}\r\n      />\r\n      <WhatsAppModalCompany\r\n        open={whatsAppModalOpen}\r\n        onClose={handleCloseWhatsAppModal}\r\n        filteredWhatsapps={filterConnections}\r\n        companyInfos={companyWhatsApps}\r\n        whatsAppId={!qrModalOpen && selectedWhatsApp?.id}\r\n      />\r\n\r\n      {user.profile === \"user\" ?\r\n        <ForbiddenPage />\r\n        :\r\n        <>\r\n          <Paper className={classes.mainPaper} style={{ overflow: \"hidden\" }} variant=\"outlined\">\r\n            <MainHeader>\r\n              <Stack>\r\n                <Typography variant=\"h5\" color=\"black\" style={{ fontWeight: \"bold\", marginLeft: \"10px\", marginTop: \"10px\" }} gutterBottom>\r\n                  {i18n.t(\"connections.title\")}\r\n                </Typography>\r\n                <Typography style={{ marginTop: \"-10px\", marginLeft: \"10px\" }} variant=\"caption\" color=\"textSecondary\">\r\n                  Conecte seus canais de atendimento para receber mensagens e iniciar conversas com seus clientes.\r\n                </Typography>\r\n              </Stack>\r\n\r\n              <MainHeaderButtonsWrapper>\r\n                <PopupState variant=\"popover\" popupId=\"demo-popup-menu\">\r\n                  {popupState => (\r\n                    <React.Fragment>\r\n                      <Menu {...bindMenu(popupState)}>\r\n                        <MenuItem\r\n                          onClick={() => {\r\n                            handleOpenWhatsAppModal();\r\n                            popupState.close();\r\n                          }}\r\n                        >\r\n                          <WhatsApp\r\n                            fontSize=\"small\"\r\n                            style={{\r\n                              marginRight: \"10px\"\r\n                            }}\r\n                          />\r\n                          WhatsApp\r\n                        </MenuItem>\r\n                        <FacebookLogin\r\n                          appId={process.env.REACT_APP_FACEBOOK_APP_ID}\r\n                          autoLoad={false}\r\n                          fields=\"name,email,picture\"\r\n                          version=\"13.0\"\r\n                          scope=\"public_profile,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\"\r\n                          callback={responseFacebook}\r\n                          render={renderProps => (\r\n                            <MenuItem onClick={renderProps.onClick}>\r\n                              <Facebook\r\n                                fontSize=\"small\"\r\n                                style={{\r\n                                  marginRight: \"10px\"\r\n                                }}\r\n                              />\r\n                              Facebook\r\n                            </MenuItem>\r\n                          )}\r\n                        />\r\n\r\n                        <FacebookLogin\r\n                          appId={process.env.REACT_APP_FACEBOOK_APP_ID}\r\n                          autoLoad={false}\r\n                          fields=\"name,email,picture\"\r\n                          version=\"13.0\"\r\n                          scope=\"public_profile,instagram_basic,instagram_manage_messages,pages_messaging,pages_show_list,pages_manage_metadata,pages_read_engagement,business_management\"\r\n                          callback={responseInstagram}\r\n                          render={renderProps => (\r\n                            <MenuItem onClick={renderProps.onClick}>\r\n                              <Instagram\r\n                                fontSize=\"small\"\r\n                                style={{\r\n                                  marginRight: \"10px\"\r\n                                }}\r\n                              />\r\n                              Instagram\r\n                            </MenuItem>\r\n                          )}\r\n                        />\r\n                      </Menu>\r\n                    </React.Fragment>\r\n                  )}\r\n                </PopupState>\r\n              </MainHeaderButtonsWrapper>\r\n            </MainHeader>\r\n            <Stack\r\n              style={{\r\n                overflowY: \"auto\",\r\n                padding: \"20px\",\r\n                backgroundColor: \"rgb(244 244 244 / 53%)\",\r\n                borderRadius: \"5px\",\r\n                height: \"93%\"\r\n              }}\r\n            >\r\n              <Paper >\r\n                <Table size=\"small\">\r\n                  <TableHead className={classes.TableHead}>\r\n                    <TableRow style={{ color: \"#fff\" }}>\r\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                        {i18n.t(\"Cliente\")}\r\n                      </TableCell>\r\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                        {i18n.t(\"Conexões conectadas\")}\r\n                      </TableCell>\r\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                        {i18n.t(\"Conexões desconectadas\")}\r\n                      </TableCell>\r\n                      <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                        {i18n.t(\"Total de Conexões\")}\r\n                      </TableCell>\r\n                      {user.profile === \"admin\" && (\r\n                        <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                          {i18n.t(\"connections.table.actions\")}\r\n                        </TableCell>\r\n                      )}\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {loadingWhatsapp ? (\r\n                      <TableRowSkeleton />\r\n                    ) : (\r\n                      <>\r\n                        {companies?.length > 0 && companies.map(company => (\r\n                          <TableRow key={company.id}>\r\n                            <TableCell align=\"center\">\r\n                              {company?.name}\r\n                            </TableCell>\r\n                            <TableCell align=\"center\">\r\n                              {whats?.length && whats.filter((item) => item?.companyId === company?.id && item?.status === 'CONNECTED').length}\r\n                            </TableCell>\r\n                            <TableCell align=\"center\">\r\n                              {whats?.length && whats.filter((item) => item?.companyId === company?.id && item?.status !== 'CONNECTED').length}\r\n                            </TableCell>\r\n                            <TableCell align=\"center\">\r\n                              {whats?.length && whats.filter((item) => item?.companyId === company?.id).length}\r\n                            </TableCell>\r\n                            {user.profile === \"admin\" && (\r\n                              <TableCell align=\"center\">\r\n                                <IconButton\r\n                                  size=\"small\"\r\n                                  onClick={() => handleOpenWhatsAppModal(whats.filter((item) => item?.companyId === company?.id), company)}\r\n                                >\r\n                                  <Edit />\r\n                                </IconButton>\r\n                              </TableCell>\r\n                            )}\r\n                          </TableRow>\r\n                        )\r\n                        )}\r\n                        <TableRow className={classes.TableHead}>\r\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">{i18n.t(\"Total\")}</TableCell>\r\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                            {whats?.length &&\r\n                              whats.filter((item) => item?.status === 'CONNECTED').length}\r\n                          </TableCell>\r\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                            {whats?.length &&\r\n                              whats.filter((item) => item?.status !== 'CONNECTED').length}\r\n                          </TableCell>\r\n                          <TableCell style={{ color: \"#fff\" }} align=\"center\">\r\n                            {whats?.length && whats.length}\r\n                          </TableCell>\r\n                          {user.profile === \"admin\" && <TableCell style={{ color: \"#fff\" }} align=\"center\"></TableCell>}\r\n                        </TableRow>\r\n                      </>\r\n                    )}\r\n                  </TableBody>\r\n                </Table>\r\n              </Paper>\r\n            </Stack>\r\n          </Paper>\r\n        </>}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default AllConnections;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}