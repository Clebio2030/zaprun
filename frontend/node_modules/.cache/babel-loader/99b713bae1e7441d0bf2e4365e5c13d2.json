{"ast":null,"code":"import React,{useState,useEffect,useRef,useContext}from\"react\";import{useHistory,useParams}from\"react-router-dom\";import{parseISO,format,isSameDay}from\"date-fns\";import clsx from\"clsx\";import emojiRegex from\"emoji-regex\";import{v4 as uuidv4}from\"uuid\";import{makeStyles,withStyles}from\"@material-ui/core/styles\";import{green}from\"@material-ui/core/colors\";import ListItem from\"@material-ui/core/ListItem\";import ListItemText from\"@material-ui/core/ListItemText\";import ListItemAvatar from\"@material-ui/core/ListItemAvatar\";import Typography from\"@material-ui/core/Typography\";import Avatar from\"@material-ui/core/Avatar\";import Divider from\"@material-ui/core/Divider\";import Badge from\"@material-ui/core/Badge\";import IconButton from\"@material-ui/core/IconButton\";import{i18n}from\"../../translate/i18n\";import VisibilityIcon from\"@material-ui/icons/Visibility\";import CheckIcon from\"@material-ui/icons/CheckCircle\";import ReplayIcon from\"@material-ui/icons/Replay\";import ClearOutlinedIcon from\"@material-ui/icons/ClearOutlined\";import api from\"../../services/api\";import MarkdownWrapper from\"../MarkdownWrapper\";import{Tooltip}from\"@material-ui/core\";import{AuthContext}from\"../../context/Auth/AuthContext\";import toastError from\"../../errors/toastError\";import facebookIcon from\"../../assets/facebook.png\";import insatagramIcon from\"../../assets/instagram.png\";import whatsappIcon from\"../../assets/whatsapp.png\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";const useStyles=makeStyles(theme=>({ticket:{position:\"relative\"},pendingTicket:{cursor:\"unset\"},noTicketsDiv:{display:\"flex\",height:\"100px\",margin:40,flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"},noTicketsText:{textAlign:\"center\",color:\"rgb(104, 121, 146)\",fontSize:\"14px\",lineHeight:\"1.4\"},noTicketsTitle:{textAlign:\"center\",fontSize:\"16px\",fontWeight:\"600\",margin:\"0px\"},contactNameWrapper:{display:\"flex\",justifyContent:\"space-between\"},lastMessageTime:{position:\"absolute\",marginRight:5,right:20,bottom:30},closedBadge:{alignSelf:\"center\",justifySelf:\"flex-end\",marginRight:32,marginLeft:\"auto\"},contactLastMessage:{paddingRight:20},newMessagesCount:{alignSelf:\"center\",marginRight:8,marginLeft:\"auto\"},bottomButton:{top:\"12px\"},badgeStyle:{color:\"white\",backgroundColor:green[500]},acceptButton:{position:\"absolute\",left:\"50%\"},ticketQueueColor:{flex:\"none\",width:\"8px\",height:\"100%\",position:\"absolute\",top:\"0%\",left:\"0%\"},userTag:{position:\"absolute\",marginRight:110,right:20,bottom:30,backgroundColor:theme.palette.background.default,color:theme.palette.primary.main,border:\"1px solid #CCC\",padding:1,paddingLeft:5,paddingRight:5,borderRadius:10,fontSize:\"0.9em\"},divTags:{position:\"absolute\",marginRight:0,left:0,bottom:0,flexWrap:\"wrap\",display:\"flex\",flexDirection:\"row\",justifyContent:\"flex-start\",alignItems:\"center\"},tags:{color:\"#FFF\",border:\"1px solid #CCC\",padding:0,paddingLeft:5,paddingRight:5,borderRadius:0,fontSize:\"0.6em\",textAlign:\"center\"},divUser:{position:\"absolute\",marginRight:0,left:0,top:0,flexWrap:\"wrap\",display:\"flex\",flexDirection:\"row\",justifyContent:\"flex-start\",alignItems:\"center\"},user:{color:\"#eee\",border:\"1px solid #CCC\",padding:0,paddingLeft:5,paddingRight:5,borderRadius:0,fontSize:\"0.6em\",textAlign:\"center\"},tagsWrapper:{zIndex:500},badge:{backgroundColor:\"#44b700\",color:\"#44b700\",boxShadow:\"0 0 0 2px \".concat(theme.palette.background.paper),\"&::after\":{position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",borderRadius:\"50%\",animation:\"$ripple 1.2s infinite ease-in-out\",border:\"1px solid currentColor\",content:'\"\"'}},\"@keyframes ripple\":{\"0%\":{transform:\"scale(.8)\",opacity:1},\"100%\":{transform:\"scale(2.4)\",opacity:0}}}));const SmallAvatar=withStyles(theme=>({root:{width:22,height:22,border:\"2px solid \".concat(theme.palette.background.paper)}}))(Avatar);const getAvatarChannel=channel=>{if(channel===\"facebook\"){return facebookIcon;}if(channel===\"whatsapp\"){return whatsappIcon;}if(channel===\"whatsappapi\"){return whatsappIcon;}if(channel===\"instagram\"){return insatagramIcon;}};const TicketListItem=_ref=>{var _ticket$queue,_ticket$queue2,_ticket$contact,_ticket$contact2,_ticket$whatsapp,_ticket$userRating,_ticket$user,_ticket$tags;let{ticket}=_ref;const classes=useStyles();const history=useHistory();const[loading,setLoading]=useState(false);const{ticketId}=useParams();const isMounted=useRef(true);const{user}=useContext(AuthContext);const{setCurrentTicket,setTabOpen}=useContext(TicketsContext);useEffect(()=>{},[ticket]);useEffect(()=>{return()=>{isMounted.current=false;};},[]);function getRatingIcon(rate){let icon=\"\";if(rate===1){icon=\"😡\";}else if(rate===2){icon=\"😠\";}else if(rate===3){icon=\"😐\";}else if(rate===4){icon=\"😃\";}else if(rate===5){icon=\"😍\";}return icon;}const handleAcepptTicket=async ticket=>{setLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{status:\"open\",userId:user===null||user===void 0?void 0:user.id});}catch(err){setLoading(false);toastError(err);}if(isMounted.current){setLoading(false);}history.push(\"/tickets/\".concat(ticket.uuid));};const handleAcepptTicketBot=async ticket=>{// alert(\"Bot\");\nsetLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{status:\"open\",userId:user===null||user===void 0?void 0:user.id});}catch(err){setLoading(false);toastError(err);}if(isMounted.current){setLoading(false);}history.push(\"/tickets/\".concat(ticket.uuid));};const handleReopenTicket=async ticket=>{setLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{status:\"open\",userId:user===null||user===void 0?void 0:user.id});}catch(err){setLoading(false);toastError(err);}if(isMounted.current){setLoading(false);}history.push(\"/tickets/\".concat(ticket.uuid));};const handleViewTicket=async ticket=>{setLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{status:\"pending\"});}catch(err){setLoading(false);toastError(err);}if(isMounted.current){setLoading(false);}history.push(\"/tickets/\".concat(ticket.uuid));};const handleSelectTicket=ticket=>{const code=uuidv4();const{id,uuid}=ticket;setTabOpen(ticket.status);setCurrentTicket({id,uuid,code});};const handleClosedTicket=async ticket=>{setLoading(true);try{await api.put(\"/tickets/\".concat(ticket.id),{status:\"closed\"});}catch(err){setLoading(false);toastError(err);}if(isMounted.current){setLoading(false);}};const renderUserName=name=>{let str=name.replace(emojiRegex(),\"\").trim();const firstName=str.split(\" \")[0];return firstName;};return/*#__PURE__*/React.createElement(React.Fragment,{key:ticket.id},/*#__PURE__*/React.createElement(ListItem,{dense:true,button:true,onClick:e=>{handleSelectTicket(ticket);},selected:ticketId&&+ticketId===ticket.id,className:clsx(classes.ticket,{[classes.pendingTicket]:ticket.status===\"pending\"})},/*#__PURE__*/React.createElement(Tooltip,{arrow:true,placement:\"right\",title:((_ticket$queue=ticket.queue)===null||_ticket$queue===void 0?void 0:_ticket$queue.name)||\"Sem departamento\"},/*#__PURE__*/React.createElement(\"span\",{style:{backgroundColor:((_ticket$queue2=ticket.queue)===null||_ticket$queue2===void 0?void 0:_ticket$queue2.color)||\"#7C7C7C\"},className:classes.ticketQueueColor})),/*#__PURE__*/React.createElement(ListItemAvatar,null,/*#__PURE__*/React.createElement(Badge,{overlap:\"circular\",anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},badgeContent:/*#__PURE__*/React.createElement(SmallAvatar,{alt:ticket===null||ticket===void 0?void 0:ticket.channel,src:getAvatarChannel(ticket===null||ticket===void 0?void 0:ticket.channel)})},/*#__PURE__*/React.createElement(Avatar,{alt:ticket===null||ticket===void 0?void 0:(_ticket$contact=ticket.contact)===null||_ticket$contact===void 0?void 0:_ticket$contact.name,src:ticket===null||ticket===void 0?void 0:(_ticket$contact2=ticket.contact)===null||_ticket$contact2===void 0?void 0:_ticket$contact2.urlPicture}))),/*#__PURE__*/React.createElement(ListItemText,{disableTypography:true,primary:/*#__PURE__*/React.createElement(\"span\",{className:classes.contactNameWrapper},/*#__PURE__*/React.createElement(Typography,{noWrap:true,component:\"span\",variant:\"body2\",color:\"textPrimary\"},ticket.contact.name),ticket.lastMessage&&/*#__PURE__*/React.createElement(Typography,{className:classes.lastMessageTime,component:\"span\",variant:\"body2\",color:\"textSecondary\"},isSameDay(parseISO(ticket.updatedAt),new Date())?/*#__PURE__*/React.createElement(React.Fragment,null,format(parseISO(ticket.updatedAt),\"HH:mm\")):/*#__PURE__*/React.createElement(React.Fragment,null,format(parseISO(ticket.updatedAt),\"dd/MM/yyyy\"))),ticket.whatsappId&&/*#__PURE__*/React.createElement(\"div\",{className:classes.userTag,title:i18n.t(\"ticketsList.connectionTitle\")},(_ticket$whatsapp=ticket.whatsapp)===null||_ticket$whatsapp===void 0?void 0:_ticket$whatsapp.name)),secondary:/*#__PURE__*/React.createElement(\"span\",{className:classes.contactNameWrapper},ticket.status===\"closed\"?(ticket===null||ticket===void 0?void 0:ticket.userRating)?getRatingIcon(ticket===null||ticket===void 0?void 0:(_ticket$userRating=ticket.userRating)===null||_ticket$userRating===void 0?void 0:_ticket$userRating.rate):null:null,/*#__PURE__*/React.createElement(Typography,{className:classes.contactLastMessage,noWrap:true,component:\"span\",variant:\"body2\",color:\"textSecondary\"},ticket.lastMessage?/*#__PURE__*/React.createElement(MarkdownWrapper,null,ticket.lastMessage):/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(Badge,{overlap:\"rectangular\",className:classes.newMessagesCount,badgeContent:ticket.unreadMessages,classes:{badge:classes.badgeStyle}}))}),ticket.status===\"pending\"&&/*#__PURE__*/React.createElement(IconButton,{className:classes.bottomButton,color:\"primary\",loading:loading.toString(),onClick:e=>ticket.isBot?handleAcepptTicketBot(ticket):handleAcepptTicket(ticket)},/*#__PURE__*/React.createElement(CheckIcon,null)),/*#__PURE__*/React.createElement(\"div\",{className:classes.divTags},ticket.isGroup&&/*#__PURE__*/React.createElement(\"div\",{className:classes.tagsWrapper},/*#__PURE__*/React.createElement(\"div\",{key:ticket.id,className:classes.tags// title={ticket.isGroup}\n,style:{backgroundColor:\"#7C7C7C\"}},\"Grupo\")),((_ticket$user=ticket.user)===null||_ticket$user===void 0?void 0:_ticket$user.id)&&user.profile.toUpperCase()===\"ADMIN\"&&/*#__PURE__*/React.createElement(\"div\",{className:classes.tagsWrapper},/*#__PURE__*/React.createElement(\"div\",{key:ticket.user.id,className:classes.tags,title:renderUserName(ticket.user.name),style:{backgroundColor:ticket.user.color===\"\"||!ticket.user.color?\"#7C7C7C\":ticket.user.color}},renderUserName(ticket.user.name))),((_ticket$tags=ticket.tags)===null||_ticket$tags===void 0?void 0:_ticket$tags.length)>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:classes.tagsWrapper},/*#__PURE__*/React.createElement(\"div\",{key:ticket.tags[0].id,className:classes.tags,title:ticket.tags[0].name,style:{backgroundColor:ticket.tags[0].color}},ticket.tags[0].name)),ticket.tags.length>1&&/*#__PURE__*/React.createElement(\"div\",{key:ticket.tags[1].id,className:classes.tags,title:ticket.tags[1].name,style:{backgroundColor:ticket.tags[1].color}},\"+\",ticket.tags.length-1))),ticket.status===\"pending\"&&(user.showDashboard===\"enabled\"||user.profile===\"admin\")&&/*#__PURE__*/React.createElement(IconButton,{className:classes.bottomButton,color:\"primary\",onClick:e=>handleClosedTicket(ticket)},/*#__PURE__*/React.createElement(ClearOutlinedIcon,null)),ticket.status===\"open\"&&/*#__PURE__*/React.createElement(IconButton,{className:classes.bottomButton,color:\"primary\",onClick:e=>handleViewTicket(ticket)},/*#__PURE__*/React.createElement(ReplayIcon,null)),ticket.status===\"open\"&&/*#__PURE__*/React.createElement(IconButton,{className:classes.bottomButton,color:\"primary\",onClick:e=>handleClosedTicket(ticket)},/*#__PURE__*/React.createElement(ClearOutlinedIcon,null)),ticket.status===\"closed\"&&/*#__PURE__*/React.createElement(IconButton,{className:classes.bottomButton,color:\"primary\",onClick:e=>handleReopenTicket(ticket)},/*#__PURE__*/React.createElement(ReplayIcon,null)),ticket.status===\"closed\"&&/*#__PURE__*/React.createElement(IconButton,{className:classes.bottomButton,color:\"primary\"})),/*#__PURE__*/React.createElement(Divider,{variant:\"inset\",component:\"li\"}));};export default TicketListItem;","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","useHistory","useParams","parseISO","format","isSameDay","clsx","emojiRegex","v4","uuidv4","makeStyles","withStyles","green","ListItem","ListItemText","ListItemAvatar","Typography","Avatar","Divider","Badge","IconButton","i18n","VisibilityIcon","CheckIcon","ReplayIcon","ClearOutlinedIcon","api","MarkdownWrapper","Tooltip","AuthContext","toastError","facebookIcon","insatagramIcon","whatsappIcon","TicketsContext","useStyles","theme","ticket","position","pendingTicket","cursor","noTicketsDiv","display","height","margin","flexDirection","alignItems","justifyContent","noTicketsText","textAlign","color","fontSize","lineHeight","noTicketsTitle","fontWeight","contactNameWrapper","lastMessageTime","marginRight","right","bottom","closedBadge","alignSelf","justifySelf","marginLeft","contactLastMessage","paddingRight","newMessagesCount","bottomButton","top","badgeStyle","backgroundColor","acceptButton","left","ticketQueueColor","flex","width","userTag","palette","background","default","primary","main","border","padding","paddingLeft","borderRadius","divTags","flexWrap","tags","divUser","user","tagsWrapper","zIndex","badge","boxShadow","concat","paper","animation","content","transform","opacity","SmallAvatar","root","getAvatarChannel","channel","TicketListItem","_ref","_ticket$queue","_ticket$queue2","_ticket$contact","_ticket$contact2","_ticket$whatsapp","_ticket$userRating","_ticket$user","_ticket$tags","classes","history","loading","setLoading","ticketId","isMounted","setCurrentTicket","setTabOpen","current","getRatingIcon","rate","icon","handleAcepptTicket","put","id","status","userId","err","push","uuid","handleAcepptTicketBot","handleReopenTicket","handleViewTicket","handleSelectTicket","code","handleClosedTicket","renderUserName","name","str","replace","trim","firstName","split","createElement","Fragment","key","dense","button","onClick","e","selected","className","arrow","placement","title","queue","style","overlap","anchorOrigin","vertical","horizontal","badgeContent","alt","src","contact","urlPicture","disableTypography","noWrap","component","variant","lastMessage","updatedAt","Date","whatsappId","t","whatsapp","secondary","userRating","unreadMessages","toString","isBot","isGroup","profile","toUpperCase","length","showDashboard"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/TicketListItem/index.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from \"react\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { parseISO, format, isSameDay } from \"date-fns\";\r\nimport clsx from \"clsx\";\r\nimport emojiRegex from \"emoji-regex\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\r\nimport CheckIcon from \"@material-ui/icons/CheckCircle\";\r\nimport ReplayIcon from \"@material-ui/icons/Replay\";\r\nimport ClearOutlinedIcon from \"@material-ui/icons/ClearOutlined\";\r\nimport api from \"../../services/api\";\r\n\r\nimport MarkdownWrapper from \"../MarkdownWrapper\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport toastError from \"../../errors/toastError\";\r\n\r\nimport facebookIcon from \"../../assets/facebook.png\";\r\nimport insatagramIcon from \"../../assets/instagram.png\";\r\nimport whatsappIcon from \"../../assets/whatsapp.png\";\r\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    ticket: {\r\n        position: \"relative\",\r\n    },\r\n\r\n    pendingTicket: {\r\n        cursor: \"unset\",\r\n    },\r\n\r\n    noTicketsDiv: {\r\n        display: \"flex\",\r\n        height: \"100px\",\r\n        margin: 40,\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n    },\r\n\r\n    noTicketsText: {\r\n        textAlign: \"center\",\r\n        color: \"rgb(104, 121, 146)\",\r\n        fontSize: \"14px\",\r\n        lineHeight: \"1.4\",\r\n    },\r\n\r\n    noTicketsTitle: {\r\n        textAlign: \"center\",\r\n        fontSize: \"16px\",\r\n        fontWeight: \"600\",\r\n        margin: \"0px\",\r\n    },\r\n\r\n    contactNameWrapper: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n\r\n    lastMessageTime: {\r\n        position: \"absolute\",\r\n        marginRight: 5,\r\n        right: 20,\r\n        bottom: 30,\r\n    },\r\n\r\n    closedBadge: {\r\n        alignSelf: \"center\",\r\n        justifySelf: \"flex-end\",\r\n        marginRight: 32,\r\n        marginLeft: \"auto\",\r\n    },\r\n\r\n    contactLastMessage: {\r\n        paddingRight: 20,\r\n    },\r\n\r\n    newMessagesCount: {\r\n        alignSelf: \"center\",\r\n        marginRight: 8,\r\n        marginLeft: \"auto\",\r\n    },\r\n\r\n    bottomButton: {\r\n        top: \"12px\",\r\n    },\r\n\r\n    badgeStyle: {\r\n        color: \"white\",\r\n        backgroundColor: green[500],\r\n    },\r\n\r\n    acceptButton: {\r\n        position: \"absolute\",\r\n        left: \"50%\",\r\n    },\r\n\r\n    ticketQueueColor: {\r\n        flex: \"none\",\r\n        width: \"8px\",\r\n        height: \"100%\",\r\n        position: \"absolute\",\r\n        top: \"0%\",\r\n        left: \"0%\",\r\n    },\r\n\r\n    userTag: {\r\n        position: \"absolute\",\r\n        marginRight: 110,\r\n        right: 20,\r\n        bottom: 30,\r\n        backgroundColor: theme.palette.background.default,\r\n        color: theme.palette.primary.main,\r\n        border: \"1px solid #CCC\",\r\n        padding: 1,\r\n        paddingLeft: 5,\r\n        paddingRight: 5,\r\n        borderRadius: 10,\r\n        fontSize: \"0.9em\",\r\n    },\r\n    divTags: {\r\n        position: \"absolute\",\r\n        marginRight: 0,\r\n        left: 0,\r\n        bottom: 0,\r\n        flexWrap: \"wrap\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n    },\r\n    tags: {\r\n        color: \"#FFF\",\r\n        border: \"1px solid #CCC\",\r\n        padding: 0,\r\n        paddingLeft: 5,\r\n        paddingRight: 5,\r\n        borderRadius: 0,\r\n        fontSize: \"0.6em\",\r\n        textAlign: \"center\",\r\n    },\r\n    divUser: {\r\n        position: \"absolute\",\r\n        marginRight: 0,\r\n        left: 0,\r\n        top: 0,\r\n        flexWrap: \"wrap\",\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        justifyContent: \"flex-start\",\r\n        alignItems: \"center\",\r\n    },\r\n    user: {\r\n        color: \"#eee\",\r\n        border: \"1px solid #CCC\",\r\n        padding: 0,\r\n        paddingLeft: 5,\r\n        paddingRight: 5,\r\n        borderRadius: 0,\r\n        fontSize: \"0.6em\",\r\n        textAlign: \"center\",\r\n    },\r\n\r\n    tagsWrapper: {\r\n        zIndex: 500,\r\n    },\r\n\r\n    badge: {\r\n        backgroundColor: \"#44b700\",\r\n        color: \"#44b700\",\r\n        boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n        \"&::after\": {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            borderRadius: \"50%\",\r\n            animation: \"$ripple 1.2s infinite ease-in-out\",\r\n            border: \"1px solid currentColor\",\r\n            content: '\"\"',\r\n        },\r\n    },\r\n    \"@keyframes ripple\": {\r\n        \"0%\": {\r\n            transform: \"scale(.8)\",\r\n            opacity: 1,\r\n        },\r\n        \"100%\": {\r\n            transform: \"scale(2.4)\",\r\n            opacity: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nconst SmallAvatar = withStyles((theme) => ({\r\n    root: {\r\n        width: 22,\r\n        height: 22,\r\n        border: `2px solid ${theme.palette.background.paper}`,\r\n    },\r\n}))(Avatar);\r\n\r\nconst getAvatarChannel = (channel) => {\r\n    if (channel === \"facebook\") {\r\n        return facebookIcon;\r\n    }\r\n\r\n    if (channel === \"whatsapp\") {\r\n        return whatsappIcon;\r\n    }\r\n\r\n    if (channel === \"whatsappapi\") {\r\n        return whatsappIcon;\r\n    }\r\n\r\n    if (channel === \"instagram\") {\r\n        return insatagramIcon;\r\n    }\r\n};\r\n\r\nconst TicketListItem = ({ ticket }) => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const [loading, setLoading] = useState(false);\r\n    const { ticketId } = useParams();\r\n    const isMounted = useRef(true);\r\n    const { user } = useContext(AuthContext);\r\n    const { setCurrentTicket, setTabOpen } = useContext(TicketsContext);\r\n\r\n    useEffect(() => {\r\n    }, [ticket])\r\n\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    function getRatingIcon(rate) {\r\n        let icon = \"\";\r\n        if (rate === 1) {\r\n            icon = \"😡\";\r\n        } else if (rate === 2) {\r\n            icon = \"😠\";\r\n        } else if (rate === 3) {\r\n            icon = \"😐\";\r\n        } else if (rate === 4) {\r\n            icon = \"😃\";\r\n        } else if (rate === 5) {\r\n            icon = \"😍\";\r\n        }\r\n\r\n        return icon;\r\n    }\r\n\r\n\r\n    const handleAcepptTicket = async (ticket) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${ticket.id}`, {\r\n                status: \"open\",\r\n                userId: user?.id,\r\n            });\r\n        } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n        history.push(`/tickets/${ticket.uuid}`);\r\n    };\r\n\r\n    const handleAcepptTicketBot = async (ticket) => {\r\n        // alert(\"Bot\");\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${ticket.id}`, {\r\n                status: \"open\",\r\n                userId: user?.id,\r\n            });\r\n        } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n        history.push(`/tickets/${ticket.uuid}`);\r\n    };\r\n\r\n    const handleReopenTicket = async (ticket) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${ticket.id}`, {\r\n                status: \"open\",\r\n                userId: user?.id,\r\n            });\r\n        } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n        history.push(`/tickets/${ticket.uuid}`);\r\n    };\r\n\r\n    const handleViewTicket = async (ticket) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${ticket.id}`, {\r\n                status: \"pending\",\r\n            });\r\n        } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n        history.push(`/tickets/${ticket.uuid}`);\r\n    };\r\n\r\n    const handleSelectTicket = (ticket) => {\r\n        const code = uuidv4();\r\n        const { id, uuid } = ticket;\r\n        setTabOpen(ticket.status)\r\n        setCurrentTicket({ id, uuid, code });\r\n    };\r\n\r\n    const handleClosedTicket = async (ticket) => {\r\n        setLoading(true);\r\n        try {\r\n            await api.put(`/tickets/${ticket.id}`, {\r\n                status: \"closed\",\r\n            });\r\n        } catch (err) {\r\n            setLoading(false);\r\n            toastError(err);\r\n        }\r\n        if (isMounted.current) {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const renderUserName = (name) => {\r\n        let str = name.replace(emojiRegex(), \"\").trim();\r\n\r\n        const firstName = str.split(\" \")[0];\r\n\r\n        return firstName;\r\n    };\r\n\r\n    return (\r\n        <React.Fragment key={ticket.id}>\r\n            <ListItem\r\n                dense\r\n                button\r\n                onClick={(e) => {\r\n                    handleSelectTicket(ticket)\r\n                }}\r\n                selected={ticketId && +ticketId === ticket.id}\r\n                className={clsx(classes.ticket, {\r\n                    [classes.pendingTicket]: ticket.status === \"pending\",\r\n                })}\r\n            >\r\n                <Tooltip\r\n                    arrow\r\n                    placement=\"right\"\r\n                    title={ticket.queue?.name || \"Sem departamento\"}\r\n                >\r\n                    <span\r\n                        style={{\r\n                            backgroundColor: ticket.queue?.color || \"#7C7C7C\",\r\n                        }}\r\n                        className={classes.ticketQueueColor}\r\n                    ></span>\r\n                </Tooltip>\r\n                <ListItemAvatar>\r\n                    <Badge\r\n                        overlap=\"circular\"\r\n                        anchorOrigin={{\r\n                            vertical: \"bottom\",\r\n                            horizontal: \"right\",\r\n                        }}\r\n                        badgeContent={\r\n                            <SmallAvatar\r\n                                alt={ticket?.channel}\r\n                                src={getAvatarChannel(ticket?.channel)}\r\n                            />\r\n                        }\r\n                    >\r\n                        <Avatar\r\n                            alt={ticket?.contact?.name}\r\n                            src={ticket?.contact?.urlPicture}\r\n                        />\r\n                    </Badge>\r\n                </ListItemAvatar>\r\n                <ListItemText\r\n                    disableTypography\r\n                    primary={\r\n                        <span className={classes.contactNameWrapper}>\r\n                            <Typography\r\n                                noWrap\r\n                                component=\"span\"\r\n                                variant=\"body2\"\r\n                                color=\"textPrimary\"\r\n                            >\r\n                                {ticket.contact.name}\r\n                            </Typography>\r\n\r\n                            {ticket.lastMessage && (\r\n                                <Typography\r\n                                    className={classes.lastMessageTime}\r\n                                    component=\"span\"\r\n                                    variant=\"body2\"\r\n                                    color=\"textSecondary\"\r\n                                >\r\n                                    {isSameDay(\r\n                                        parseISO(ticket.updatedAt),\r\n                                        new Date()\r\n                                    ) ? (\r\n                                        <>\r\n                                            {format(\r\n                                                parseISO(ticket.updatedAt),\r\n                                                \"HH:mm\"\r\n                                            )}\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            {format(\r\n                                                parseISO(ticket.updatedAt),\r\n                                                \"dd/MM/yyyy\"\r\n                                            )}\r\n                                        </>\r\n                                    )}\r\n                                </Typography>\r\n                            )}\r\n                            {ticket.whatsappId && (\r\n                                <div\r\n                                    className={classes.userTag}\r\n                                    title={i18n.t(\r\n                                        \"ticketsList.connectionTitle\"\r\n                                    )}\r\n                                >\r\n                                    {ticket.whatsapp?.name}\r\n                                </div>\r\n                            )}\r\n                        </span>\r\n                    }\r\n                    secondary={\r\n                        <span className={classes.contactNameWrapper}>\r\n                            {ticket.status === \"closed\"\r\n                                ? ticket?.userRating\r\n                                    ? getRatingIcon(ticket?.userRating?.rate)\r\n                                    : null\r\n                                : null}\r\n                            <Typography\r\n                                className={classes.contactLastMessage}\r\n                                noWrap\r\n                                component=\"span\"\r\n                                variant=\"body2\"\r\n                                color=\"textSecondary\"\r\n                            >\r\n                                {ticket.lastMessage ? (\r\n                                    <MarkdownWrapper>\r\n                                        {ticket.lastMessage}\r\n                                    </MarkdownWrapper>\r\n                                ) : (\r\n                                    <br />\r\n                                )}\r\n                            </Typography>\r\n\r\n                            <Badge\r\n                                overlap=\"rectangular\"\r\n                                className={classes.newMessagesCount}\r\n                                badgeContent={ticket.unreadMessages}\r\n                                classes={{\r\n                                    badge: classes.badgeStyle,\r\n                                }}\r\n                            />\r\n                        </span>\r\n                    }\r\n                />\r\n                {ticket.status === \"pending\" && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                        loading={loading.toString()}\r\n                        onClick={(e) =>\r\n                            ticket.isBot\r\n                                ? handleAcepptTicketBot(ticket)\r\n                                : handleAcepptTicket(ticket)\r\n                        }\r\n                    >\r\n                        <CheckIcon />\r\n                    </IconButton>\r\n                )}\r\n                {/* {ticket.status === \"pending\" && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                        onClick={(e) => handleViewTicket(ticket)}\r\n                    >\r\n                        <VisibilityIcon />\r\n                    </IconButton>\r\n                )} */}\r\n                <div className={classes.divTags}>\r\n                    {ticket.isGroup && (\r\n                        <div className={classes.tagsWrapper}>\r\n                            <div\r\n                                key={ticket.id}\r\n                                className={classes.tags}\r\n                                // title={ticket.isGroup}\r\n                                style={{\r\n                                    backgroundColor: \"#7C7C7C\",\r\n                                }}\r\n                            >\r\n                                Grupo\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    {ticket.user?.id &&\r\n                        user.profile.toUpperCase() === \"ADMIN\" && (\r\n                            <div className={classes.tagsWrapper}>\r\n                                <div\r\n                                    key={ticket.user.id}\r\n                                    className={classes.tags}\r\n                                    title={renderUserName(ticket.user.name)}\r\n                                    style={{\r\n                                        backgroundColor:\r\n                                            ticket.user.color === \"\" ||\r\n                                                !ticket.user.color\r\n                                                ? \"#7C7C7C\"\r\n                                                : ticket.user.color,\r\n                                    }}\r\n                                >\r\n                                    {renderUserName(ticket.user.name)}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    {ticket.tags?.length > 0 && (\r\n                        <>\r\n                            <div className={classes.tagsWrapper}>\r\n                                <div\r\n                                    key={ticket.tags[0].id}\r\n                                    className={classes.tags}\r\n                                    title={ticket.tags[0].name}\r\n                                    style={{\r\n                                        backgroundColor: ticket.tags[0].color,\r\n                                    }}\r\n                                >\r\n                                    {ticket.tags[0].name}\r\n                                </div>\r\n                            </div>\r\n                            {ticket.tags.length > 1 && (\r\n                                <div\r\n                                    key={ticket.tags[1].id}\r\n                                    className={classes.tags}\r\n                                    title={ticket.tags[1].name}\r\n                                    style={{\r\n                                        backgroundColor: ticket.tags[1].color,\r\n                                    }}\r\n                                >\r\n                                    +{ticket.tags.length - 1}\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {(ticket.status === \"pending\" && (user.showDashboard === \"enabled\" || user.profile === \"admin\")) && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                        onClick={(e) => handleClosedTicket(ticket)}\r\n                    >\r\n                        <ClearOutlinedIcon />\r\n                    </IconButton>\r\n                )}\r\n                {ticket.status === \"open\" && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                        onClick={(e) => handleViewTicket(ticket)}\r\n                    >\r\n                        <ReplayIcon />\r\n                    </IconButton>\r\n                )}\r\n                {ticket.status === \"open\" && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                        onClick={(e) => handleClosedTicket(ticket)}\r\n                    >\r\n                        <ClearOutlinedIcon />\r\n                    </IconButton>\r\n                )}\r\n                {ticket.status === \"closed\" && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                        onClick={(e) => handleReopenTicket(ticket)}\r\n                    >\r\n                        <ReplayIcon />\r\n                    </IconButton>\r\n                )}\r\n                {ticket.status === \"closed\" && (\r\n                    <IconButton\r\n                        className={classes.bottomButton}\r\n                        color=\"primary\"\r\n                    ></IconButton>\r\n                )}\r\n            </ListItem>\r\n            <Divider variant=\"inset\" component=\"li\" />\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default TicketListItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}