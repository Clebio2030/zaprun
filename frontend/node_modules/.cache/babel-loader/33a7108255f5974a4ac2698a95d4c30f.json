{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import Button from\"@material-ui/core/Button\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Typography from\"@material-ui/core/Typography\";import api from\"../../services/api\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Grid,Select,MenuItem,ListItemText}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/styles\";import{Face,Facebook,WhatsApp}from\"@material-ui/icons\";import{Instagram}from\"@mui/icons-material\";import{i18n}from\"../../translate/i18n\";import ButtonWithSpinner from\"../ButtonWithSpinner\";const useStyles=makeStyles(theme=>({online:{fontSize:11,color:\"#25d366\"},offline:{fontSize:11,color:\"#e1306c\"}}));const ConfirmationModal=_ref=>{let{title,children,open,onClose,onConfirm,isCellPhone,onSave}=_ref;const classes=useStyles();const[selectedWhatsapp,setSelectedWhatsapp]=useState(\"\");const[whatsapps,setWhatsapps]=useState([]);const{user}=useContext(AuthContext);const{companyId}=user;useEffect(()=>{const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{api// .get(`/whatsapp/filter`, { params: { companyId, session: 0, channel: channelFilter } })\n.get(\"/whatsapp\",{params:{companyId,session:0}}).then(_ref2=>{let{data}=_ref2;return setWhatsapps(data);});};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[open]);const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/React.createElement(Facebook,{style:{color:\"#3b5998\",verticalAlign:\"middle\"}});case\"instagram\":return/*#__PURE__*/React.createElement(Instagram,{style:{color:\"#e1306c\",verticalAlign:\"middle\"}});case\"whatsapp\":return/*#__PURE__*/React.createElement(WhatsApp,{style:{color:\"#25d366\",verticalAlign:\"middle\"}});default:return\"error\";}};const handleClose=()=>{onClose();};return/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:()=>onClose(false),\"aria-labelledby\":\"confirm-dialog\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"confirm-dialog\"},title),/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(Typography,null,children),isCellPhone&&/*#__PURE__*/React.createElement(Grid,{style:{width:300,marginTop:10},container:true},/*#__PURE__*/React.createElement(Grid,{xs:12,item:true},/*#__PURE__*/React.createElement(Select,{required:true,fullWidth:true,displayEmpty:true,variant:\"outlined\",value:selectedWhatsapp,onChange:e=>{setSelectedWhatsapp(e.target.value);},MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:()=>{if(selectedWhatsapp===\"\"){return\"Selecione uma Conexão\";}const whatsapp=whatsapps.find(w=>w.id===selectedWhatsapp);return whatsapp===null||whatsapp===void 0?void 0:whatsapp.name;}},(whatsapps===null||whatsapps===void 0?void 0:whatsapps.length)>0&&whatsapps.map((whatsapp,key)=>/*#__PURE__*/React.createElement(MenuItem,{dense:true,key:key,value:whatsapp.id},/*#__PURE__*/React.createElement(ListItemText,{primary:/*#__PURE__*/React.createElement(React.Fragment,null,IconChannel(whatsapp.channel),/*#__PURE__*/React.createElement(Typography,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"}},whatsapp.name,\" \\xA0\",\" \",/*#__PURE__*/React.createElement(\"p\",{className:whatsapp.status===\"CONNECTED\"?classes.online:classes.offline},\"(\",whatsapp.status,\")\")))}))))))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",onClick:()=>onClose(false),color:\"default\"},i18n.t(\"confirmationModal.buttons.cancel\")),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",onClick:()=>{if(isCellPhone){onSave(selectedWhatsapp);}onClose(false);onConfirm();},color:\"secondary\"},i18n.t(\"confirmationModal.buttons.confirm\"))));};export default ConfirmationModal;","map":{"version":3,"names":["React","useContext","useEffect","useState","Button","Dialog","DialogActions","DialogContent","DialogTitle","Typography","api","AuthContext","Grid","Select","MenuItem","ListItemText","makeStyles","Face","Facebook","WhatsApp","Instagram","i18n","ButtonWithSpinner","useStyles","theme","online","fontSize","color","offline","ConfirmationModal","_ref","title","children","open","onClose","onConfirm","isCellPhone","onSave","classes","selectedWhatsapp","setSelectedWhatsapp","whatsapps","setWhatsapps","user","companyId","delayDebounceFn","setTimeout","fetchContacts","get","params","session","then","_ref2","data","clearTimeout","IconChannel","channel","createElement","style","verticalAlign","handleClose","id","dividers","width","marginTop","container","xs","item","required","fullWidth","displayEmpty","variant","value","onChange","e","target","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","renderValue","whatsapp","find","w","name","length","map","key","dense","primary","Fragment","component","marginLeft","display","alignItems","lineHeight","className","status","onClick","t"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/ConfirmationModal/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport api from \"../../services/api\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Grid, Select, MenuItem, ListItemText } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { Face, Facebook, WhatsApp } from \"@material-ui/icons\";\r\nimport { Instagram } from \"@mui/icons-material\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport ButtonWithSpinner from \"../ButtonWithSpinner\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  online: {\r\n    fontSize: 11,\r\n    color: \"#25d366\",\r\n  },\r\n  offline: {\r\n    fontSize: 11,\r\n    color: \"#e1306c\",\r\n  },\r\n}));\r\n\r\nconst ConfirmationModal = ({\r\n  title,\r\n  children,\r\n  open,\r\n  onClose,\r\n  onConfirm,\r\n  isCellPhone,\r\n  onSave,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState(\"\");\r\n  const [whatsapps, setWhatsapps] = useState([]);\r\n  const { user } = useContext(AuthContext);\r\n  const { companyId } = user;\r\n\r\n  useEffect(() => {\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        api\r\n          // .get(`/whatsapp/filter`, { params: { companyId, session: 0, channel: channelFilter } })\r\n          .get(`/whatsapp`, { params: { companyId, session: 0 } })\r\n          .then(({ data }) => setWhatsapps(data));\r\n      };\r\n\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [open]);\r\n\r\n  const IconChannel = (channel) => {\r\n    switch (channel) {\r\n      case \"facebook\":\r\n        return (\r\n          <Facebook style={{ color: \"#3b5998\", verticalAlign: \"middle\" }} />\r\n        );\r\n      case \"instagram\":\r\n        return (\r\n          <Instagram style={{ color: \"#e1306c\", verticalAlign: \"middle\" }} />\r\n        );\r\n      case \"whatsapp\":\r\n        return (\r\n          <WhatsApp style={{ color: \"#25d366\", verticalAlign: \"middle\" }} />\r\n        );\r\n      default:\r\n        return \"error\";\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={() => onClose(false)}\r\n      aria-labelledby=\"confirm-dialog\"\r\n    >\r\n      <DialogTitle id=\"confirm-dialog\">{title}</DialogTitle>\r\n      <DialogContent dividers>\r\n        <Typography>{children}</Typography>\r\n        {isCellPhone && (\r\n          <Grid style={{ width: 300, marginTop: 10 }} container>\r\n            <Grid xs={12} item>\r\n              <Select\r\n                required\r\n                fullWidth\r\n                displayEmpty\r\n                variant=\"outlined\"\r\n                value={selectedWhatsapp}\r\n                onChange={(e) => {\r\n                  setSelectedWhatsapp(e.target.value);\r\n                }}\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n                renderValue={() => {\r\n                  if (selectedWhatsapp === \"\") {\r\n                    return \"Selecione uma Conexão\";\r\n                  }\r\n                  const whatsapp = whatsapps.find(\r\n                    (w) => w.id === selectedWhatsapp\r\n                  );\r\n                  return whatsapp?.name;\r\n                }}\r\n              >\r\n                {whatsapps?.length > 0 &&\r\n                  whatsapps.map((whatsapp, key) => (\r\n                    <MenuItem dense key={key} value={whatsapp.id}>\r\n                      <ListItemText\r\n                        primary={\r\n                          <>\r\n                            {IconChannel(whatsapp.channel)}\r\n                            <Typography\r\n                              component=\"span\"\r\n                              style={{\r\n                                fontSize: 14,\r\n                                marginLeft: \"10px\",\r\n                                display: \"inline-flex\",\r\n                                alignItems: \"center\",\r\n                                lineHeight: \"2\",\r\n                              }}\r\n                            >\r\n                              {whatsapp.name} &nbsp;{\" \"}\r\n                              <p\r\n                                className={\r\n                                  whatsapp.status === \"CONNECTED\"\r\n                                    ? classes.online\r\n                                    : classes.offline\r\n                                }\r\n                              >\r\n                                ({whatsapp.status})\r\n                              </p>\r\n                            </Typography>\r\n                          </>\r\n                        }\r\n                      />\r\n                    </MenuItem>\r\n                  ))}\r\n              </Select>\r\n            </Grid>\r\n          </Grid>\r\n        )}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() => onClose(false)}\r\n          color=\"default\"\r\n        >\r\n          {i18n.t(\"confirmationModal.buttons.cancel\")}\r\n        </Button>\r\n        <Button\r\n          variant=\"contained\"\r\n          onClick={() => {\r\n            if (isCellPhone) {\r\n              onSave(selectedWhatsapp);\r\n            }\r\n            onClose(false);\r\n            onConfirm();\r\n          }}\r\n          color=\"secondary\"\r\n        >\r\n          {i18n.t(\"confirmationModal.buttons.confirm\")}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ConfirmationModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}