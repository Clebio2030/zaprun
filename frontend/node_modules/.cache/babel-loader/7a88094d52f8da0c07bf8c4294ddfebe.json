{"ast":null,"code":"import{Box,Chip,TextField}from\"@material-ui/core\";import Autocomplete from\"@material-ui/lab/Autocomplete\";import React,{useEffect,useState}from\"react\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";export function UsersFilter(_ref){let{onFiltered,initialUsers}=_ref;const[users,setUsers]=useState([]);const[selecteds,setSelecteds]=useState([]);useEffect(()=>{async function fetchData(){await loadUsers();}fetchData();},[]);useEffect(()=>{setSelecteds([]);if(Array.isArray(initialUsers)&&Array.isArray(users)&&users.length>0){onChange(initialUsers);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[initialUsers,users]);const loadUsers=async()=>{try{const{data}=await api.get(\"/users/list\");const userList=data.map(u=>({id:u.id,name:u.name}));setUsers(userList);}catch(err){toastError(err);}};const onChange=async value=>{setSelecteds(value);onFiltered(value);};return/*#__PURE__*/React.createElement(Box,{style:{padding:\"0px 10px 10px\"}},/*#__PURE__*/React.createElement(Autocomplete,{multiple:true,size:\"small\",options:users,value:selecteds,onChange:(e,v,r)=>onChange(v),getOptionLabel:option=>option.name,getOptionSelected:(option,value)=>{return(option===null||option===void 0?void 0:option.id)===(value===null||value===void 0?void 0:value.id)||(option===null||option===void 0?void 0:option.name.toLowerCase())===(value===null||value===void 0?void 0:value.name.toLowerCase());},renderTags:(value,getUserProps)=>value.map((option,index)=>/*#__PURE__*/React.createElement(Chip,Object.assign({variant:\"outlined\",style:{backgroundColor:\"#bfbfbf\",textShadow:\"1px 1px 1px #000\",color:\"white\"},label:option.name},getUserProps({index}),{size:\"small\"}))),renderInput:params=>/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{variant:\"outlined\",placeholder:i18n.t(\"tickets.search.filterUsers\")}))}));}","map":{"version":3,"names":["Box","Chip","TextField","Autocomplete","React","useEffect","useState","toastError","api","i18n","UsersFilter","_ref","onFiltered","initialUsers","users","setUsers","selecteds","setSelecteds","fetchData","loadUsers","Array","isArray","length","onChange","data","get","userList","map","u","id","name","err","value","createElement","style","padding","multiple","size","options","e","v","r","getOptionLabel","option","getOptionSelected","toLowerCase","renderTags","getUserProps","index","Object","assign","variant","backgroundColor","textShadow","color","label","renderInput","params","placeholder","t"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/UsersFilter/index.js"],"sourcesContent":["import { Box, Chip, TextField } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\n\r\nexport function UsersFilter({ onFiltered, initialUsers }) {\r\n  const [users, setUsers] = useState([]);\r\n  const [selecteds, setSelecteds] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      await loadUsers();\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSelecteds([]);\r\n    if (\r\n      Array.isArray(initialUsers) &&\r\n      Array.isArray(users) &&\r\n      users.length > 0\r\n    ) {\r\n      onChange(initialUsers);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [initialUsers, users]);\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      const { data } = await api.get(`/users/list`);\r\n      const userList = data.map((u) => ({ id: u.id, name: u.name }));\r\n      setUsers(userList);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const onChange = async (value) => {\r\n    setSelecteds(value);\r\n    onFiltered(value);\r\n  };\r\n\r\n  return (\r\n    <Box style={{ padding: \"0px 10px 10px\" }}>\r\n      <Autocomplete\r\n        multiple\r\n        size=\"small\"\r\n        options={users}\r\n        value={selecteds}\r\n        onChange={(e, v, r) => onChange(v)}\r\n        getOptionLabel={(option) => option.name}\r\n        getOptionSelected={(option, value) => {\r\n          return (\r\n            option?.id === value?.id ||\r\n            option?.name.toLowerCase() === value?.name.toLowerCase()\r\n          );\r\n        }}\r\n        renderTags={(value, getUserProps) =>\r\n          value.map((option, index) => (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              style={{\r\n                backgroundColor: \"#bfbfbf\",\r\n                textShadow: \"1px 1px 1px #000\",\r\n                color: \"white\",\r\n              }}\r\n              label={option.name}\r\n              {...getUserProps({ index })}\r\n              size=\"small\"\r\n            />\r\n          ))\r\n        }\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            placeholder={i18n.t(\"tickets.search.filterUsers\")}\r\n          />\r\n        )}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}