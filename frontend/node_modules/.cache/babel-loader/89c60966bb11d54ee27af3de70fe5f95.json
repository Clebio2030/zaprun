{"ast":null,"code":"import React,{useState,useEffect,useContext,useRef}from\"react\";import\"emoji-mart/css/emoji-mart.css\";import{Picker}from\"emoji-mart\";import{useMediaQuery,useTheme}from'@material-ui/core';import{isNil}from\"lodash\";import{CircularProgress,ClickAwayListener,IconButton,InputBase,makeStyles,Paper,Hidden,Menu,MenuItem,Tooltip,Fab}from\"@material-ui/core\";import{blue,green,pink,grey}from\"@material-ui/core/colors\";import{AttachFile,CheckCircleOutline,Clear,Comment,Create,Description,HighlightOff,Mic,Mood,MoreVert,Send,PermMedia,Person,Reply,Duo,Timer}from\"@material-ui/icons\";import AddIcon from\"@material-ui/icons/Add\";import{CameraAlt}from\"@material-ui/icons\";import MicRecorder from\"mic-recorder-to-mp3\";import clsx from\"clsx\";import{ReplyMessageContext}from\"../../context/ReplyingMessage/ReplyingMessageContext\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import RecordingTimer from\"./RecordingTimer\";import useQuickMessages from\"../../hooks/useQuickMessages\";import{isString,isEmpty}from\"lodash\";import ContactSendModal from\"../ContactSendModal\";import CameraModal from\"../CameraModal\";import axios from\"axios\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import{ForwardMessageContext}from\"../../context/ForwarMessage/ForwardMessageContext\";import MessageUploadMedias from\"../MessageUploadMedias\";import{EditMessageContext}from\"../../context/EditingMessage/EditingMessageContext\";import ScheduleModal from\"../ScheduleModal\";import{useParams}from\"react-router-dom/cjs/react-router-dom.min\";const Mp3Recorder=new MicRecorder({bitRate:128});const useStyles=makeStyles(theme=>({mainWrapper:{background:\"#eee\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",borderTop:\"1px solid rgba(0, 0, 0, 0.12)\",[theme.breakpoints.down(\"sm\")]:{position:\"fixed\",bottom:0,width:\"100%\"}},avatar:{width:\"50px\",height:\"50px\",borderRadius:\"25%\"},dropInfo:{background:\"#eee\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",width:\"100%\",padding:15,left:0,right:0},dropInfoOut:{display:\"none\"},gridFiles:{maxHeight:\"100%\",overflow:\"scroll\"},newMessageBox:{background:theme.palette.background.default,width:\"100%\",display:\"flex\",padding:\"7px\",alignItems:\"center\"},messageInputWrapper:{padding:6,marginRight:7,background:theme.palette.background.paper,display:\"flex\",borderRadius:20,flex:1,position:\"relative\"},messageInputWrapperPrivate:{padding:6,marginRight:7,background:\"#F0E68C\",display:\"flex\",borderRadius:20,flex:1,position:\"relative\"},messageInput:{paddingLeft:10,flex:1,border:\"none\"},messageInputPrivate:{paddingLeft:10,flex:1,border:\"none\",color:grey[800]},sendMessageIcons:{color:grey[700]},ForwardMessageIcons:{color:grey[700],transform:'scaleX(-1)'},uploadInput:{display:\"none\"},viewMediaInputWrapper:{maxHeight:\"100%\",display:\"flex\",padding:\"10px 13px\",position:\"relative\",justifyContent:\"space-between\",alignItems:\"center\",backgroundColor:theme.mode==='light'?\"#ffffff\":\"#202c33\",borderTop:\"1px solid rgba(0, 0, 0, 0.12)\"},emojiBox:{position:\"absolute\",bottom:63,width:40,borderTop:\"1px solid #e8e8e8\"},circleLoading:{color:green[500],opacity:\"70%\",position:\"absolute\",top:\"20%\",left:\"50%\",marginLeft:-12},audioLoading:{color:green[500],opacity:\"70%\"},recorderWrapper:{display:\"flex\",alignItems:\"center\",alignContent:\"middle\"},cancelAudioIcon:{color:\"red\"},sendAudioIcon:{color:\"green\"},replyginMsgWrapper:{display:\"flex\",width:\"100%\",alignItems:\"center\",justifyContent:\"center\",paddingTop:8,paddingLeft:73,paddingRight:7,backgroundColor:theme.palette.optionsBackground},replyginMsgContainer:{flex:1,marginRight:5,overflowY:\"hidden\",backgroundColor:theme.mode===\"light\"?\"#f0f0f0\":\"#1d282f\",//\"rgba(0, 0, 0, 0.05)\",\nborderRadius:\"7.5px\",display:\"flex\",position:\"relative\"},replyginMsgBody:{padding:10,height:\"auto\",display:\"block\",whiteSpace:\"pre-wrap\",overflow:\"hidden\"},replyginContactMsgSideColor:{flex:\"none\",width:\"4px\",backgroundColor:\"#35cd96\"},replyginSelfMsgSideColor:{flex:\"none\",width:\"4px\",backgroundColor:\"#6bcbef\"},messageContactName:{display:\"flex\",color:\"#6bcbef\",fontWeight:500},messageQuickAnswersWrapper:{margin:0,position:\"absolute\",bottom:\"50px\",background:theme.palette.background.default,padding:0,border:\"none\",left:0,width:\"100%\",\"& li\":{listStyle:\"none\",\"& a\":{display:\"block\",padding:\"8px\",textOverflow:\"ellipsis\",overflow:\"hidden\",maxHeight:\"30px\",\"&:hover\":{background:theme.palette.background.paper,cursor:\"pointer\"}}}},invertedFabMenu:{border:\"none\",borderRadius:50,// Define o raio da borda para 0 para remover qualquer borda\nboxShadow:\"none\",// Remove a sombra\npadding:theme.spacing(1),backgroundColor:\"transparent\",color:\"grey\",\"&:hover\":{backgroundColor:\"transparent\"},\"&:disabled\":{backgroundColor:\"transparent !important\"}},invertedFabMenuMP:{border:\"none\",borderRadius:0,// Define o raio da borda para 0 para remover qualquer borda\nboxShadow:\"none\",// Remove a sombra\nwidth:theme.spacing(4),// Ajuste o tamanho de acordo com suas preferências\nheight:theme.spacing(4),backgroundColor:\"transparent\",color:blue[800],\"&:hover\":{backgroundColor:\"transparent\"}},invertedFabMenuCont:{border:\"none\",borderRadius:0,// Define o raio da borda para 0 para remover qualquer borda\nboxShadow:\"none\",// Remove a sombra\nminHeight:\"auto\",width:theme.spacing(4),// Ajuste o tamanho de acordo com suas preferências\nheight:theme.spacing(4),backgroundColor:\"transparent\",color:blue[500],\"&:hover\":{backgroundColor:\"transparent\"}},invertedFabMenuMeet:{border:\"none\",borderRadius:0,// Define o raio da borda para 0 para remover qualquer borda\nboxShadow:\"none\",// Remove a sombra\nminHeight:\"auto\",width:theme.spacing(4),// Ajuste o tamanho de acordo com suas preferências\nheight:theme.spacing(4),backgroundColor:\"transparent\",color:green[500],\"&:hover\":{backgroundColor:\"transparent\"}},invertedFabMenuDoc:{border:\"none\",borderRadius:0,// Define o raio da borda para 0 para remover qualquer borda\nboxShadow:\"none\",// Remove a sombra\nwidth:theme.spacing(4),// Ajuste o tamanho de acordo com suas preferências\nheight:theme.spacing(4),backgroundColor:\"transparent\",color:\"#7f66ff\",\"&:hover\":{backgroundColor:\"transparent\"}},invertedFabMenuCamera:{border:\"none\",borderRadius:0,// Define o raio da borda para 0 para remover qualquer borda\nboxShadow:\"none\",// Remove a sombra\nwidth:theme.spacing(4),// Ajuste o tamanho de acordo com suas preferências\nheight:theme.spacing(4),backgroundColor:\"transparent\",color:pink[500],\"&:hover\":{backgroundColor:\"transparent\"}},flexContainer:{display:\"flex\",flex:1,flexDirection:\"column\"},flexItem:{flex:1}}));const MessageInput=_ref=>{let{ticketId,ticketStatus,droppedFiles,contactId,ticketChannel}=_ref;const classes=useStyles();const theme=useTheme();const[mediasUpload,setMediasUpload]=useState([]);const isMounted=useRef(true);const[inputMessage,setInputMessage]=useState(\"\");const[showEmoji,setShowEmoji]=useState(false);const[loading,setLoading]=useState(false);const[recording,setRecording]=useState(false);const[quickAnswers,setQuickAnswer]=useState([]);const[typeBar,setTypeBar]=useState(false);const inputRef=useRef();const[onDragEnter,setOnDragEnter]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const{setReplyingMessage,replyingMessage}=useContext(ReplyMessageContext);const{setEditingMessage,editingMessage}=useContext(EditMessageContext);const{user}=useContext(AuthContext);const[appointmentModalOpen,setAppointmentModalOpen]=useState(false);const[signMessagePar,setSignMessagePar]=useState(false);const{get:getSetting}=useCompanySettings();const[signMessage,setSignMessage]=useState(true);const[privateMessage,setPrivateMessage]=useState(false);const[privateMessageInputVisible,setPrivateMessageInputVisible]=useState(false);const[senVcardModalOpen,setSenVcardModalOpen]=useState(false);const[showModalMedias,setShowModalMedias]=useState(false);const{list:listQuickMessages}=useQuickMessages();const isMobile=useMediaQuery('(max-width: 767px)');// Ajuste o valor conforme necessário\nconst[placeholderText,setPlaceHolderText]=useState(\"\");// Determine o texto do placeholder com base no ticketStatus\nuseEffect(()=>{if(ticketStatus===\"open\"||ticketStatus===\"group\"){setPlaceHolderText(i18n.t(\"messagesInput.placeholderOpen\"));}else{setPlaceHolderText(i18n.t(\"messagesInput.placeholderClosed\"));}// Limitar o comprimento do texto do placeholder apenas em ambientes mobile\nconst maxLength=isMobile?20:Infinity;// Define o limite apenas em mobile\nif(isMobile&&placeholderText.length>maxLength){setPlaceHolderText(placeholderText.substring(0,maxLength)+\"...\");}},[ticketStatus]);const{selectedMessages,setForwardMessageModalOpen,showSelectMessageCheckbox}=useContext(ForwardMessageContext);useEffect(()=>{if(droppedFiles&&droppedFiles.length>0){const selectedMedias=Array.from(droppedFiles);setMediasUpload(selectedMedias);setShowModalMedias(true);}},[droppedFiles]);useEffect(()=>{return()=>{isMounted.current=false;};},[]);useEffect(()=>{inputRef.current.focus();if(editingMessage){setInputMessage(editingMessage.body);}},[replyingMessage,editingMessage]);useEffect(()=>{inputRef.current.focus();return()=>{setInputMessage(\"\");setShowEmoji(false);setMediasUpload([]);setReplyingMessage(null);//setSignMessage(true);\nsetPrivateMessage(false);setPrivateMessageInputVisible(false);setEditingMessage(null);};},[ticketId,setReplyingMessage,setEditingMessage]);useEffect(()=>{setTimeout(()=>{if(isMounted.current)setOnDragEnter(false);},1000);// eslint-disable-next-line\n},[onDragEnter===true]);//permitir ativar/desativar firma\nuseEffect(()=>{const fetchSettings=async()=>{const setting=await getSetting({\"column\":\"sendSignMessage\"});if(isMounted.current){if(setting.sendSignMessage===\"enabled\"){setSignMessagePar(true);const signMessageStorage=JSON.parse(localStorage.getItem(\"persistentSignMessage\"));if(isNil(signMessageStorage)){setSignMessage(true);}else{setSignMessage(signMessageStorage);}}else{setSignMessagePar(false);}}};fetchSettings();},[]);const capitalizeFirstLetter=string=>{return string.charAt(0).toUpperCase()+string.slice(1);};const handleSendLinkVideo=async()=>{const link=\"https://meet.jit.si/\".concat(ticketId);setInputMessage(link);};const handleChangeInput=e=>{setInputMessage(e.target.value);};const handlePrivateMessage=e=>{setPrivateMessage(!privateMessage);setPrivateMessageInputVisible(!privateMessageInputVisible);};const handleQuickAnswersClick=async value=>{if(value.mediaPath){try{const{data}=await axios.get(value.mediaPath,{responseType:\"blob\"});handleUploadQuickMessageMedia(data,value.value);setInputMessage(\"\");return;//  handleChangeMedias(response)\n}catch(err){toastError(err);}}setInputMessage(\"\");setInputMessage(value.value);setTypeBar(false);};const handleAddEmoji=e=>{let emoji=e.native;setInputMessage(prevState=>prevState+emoji);};const[modalCameraOpen,setModalCameraOpen]=useState(false);const handleCapture=imageData=>{if(imageData){handleUploadCamera(imageData);}};const handleChangeMedias=e=>{if(!e.target.files){return;}const selectedMedias=Array.from(e.target.files);setMediasUpload(selectedMedias);setShowModalMedias(true);};const handleChangeSign=e=>{getStatusSingMessageLocalstogare();};const handleOpenModalForward=()=>{if(selectedMessages.length===0){setForwardMessageModalOpen(false);toastError(i18n.t(\"messagesList.header.notMessage\"));return;}setForwardMessageModalOpen(true);};const getStatusSingMessageLocalstogare=()=>{const signMessageStorage=JSON.parse(localStorage.getItem(\"persistentSignMessage\"));//si existe uma chave \"sendSingMessage\"\nif(signMessageStorage!==null){if(signMessageStorage){localStorage.setItem(\"persistentSignMessage\",false);setSignMessage(false);}else{localStorage.setItem(\"persistentSignMessage\",true);setSignMessage(true);}}else{localStorage.setItem(\"persistentSignMessage\",false);setSignMessage(false);}};const handleInputPaste=e=>{if(e.clipboardData.files[0]){const selectedMedias=Array.from(e.clipboardData.files);setMediasUpload(selectedMedias);setShowModalMedias(true);}};const handleInputDrop=e=>{e.preventDefault();if(e.dataTransfer.files[0]){const selectedMedias=Array.from(e.dataTransfer.files);setMediasUpload(selectedMedias);setShowModalMedias(true);}};const handleUploadMedia=async mediasUpload=>{setLoading(true);// e.preventDefault();\n// Certifique-se de que a variável medias esteja preenchida antes de continuar\nif(!mediasUpload.length){setLoading(false);return;}const formData=new FormData();formData.append(\"fromMe\",true);formData.append(\"isPrivate\",privateMessage?\"true\":\"false\");mediasUpload.forEach(media=>{formData.append(\"body\",media.caption);formData.append(\"medias\",media.file);});try{await api.post(\"/messages/\".concat(ticketId),formData);}catch(err){toastError(err);}setLoading(false);setMediasUpload([]);setShowModalMedias(false);setPrivateMessage(false);setPrivateMessageInputVisible(false);};const handleSendContatcMessage=async vcard=>{setSenVcardModalOpen(false);setLoading(true);if(isNil(vcard)){setLoading(false);return;}const message={read:1,fromMe:true,mediaUrl:\"\",body:null,quotedMsg:replyingMessage,isPrivate:privateMessage?\"true\":\"false\",vCard:vcard};try{await api.post(\"/messages/\".concat(ticketId),message);}catch(err){toastError(err);}setInputMessage(\"\");setShowEmoji(false);setLoading(false);setReplyingMessage(null);setEditingMessage(null);setPrivateMessage(false);setPrivateMessageInputVisible(false);};const handleSendMessage=async()=>{if(inputMessage.trim()===\"\")return;setLoading(true);const userName=privateMessage?\"\".concat(user.name,\" - Mensagem Privada\"):user.name;const sendMessage=inputMessage.trim();const message={read:1,fromMe:true,mediaUrl:\"\",body:(signMessage||privateMessage)&&!editingMessage?\"*\".concat(userName,\":*\\n\").concat(sendMessage):sendMessage,quotedMsg:replyingMessage,isPrivate:privateMessage?\"true\":\"false\"};try{if(editingMessage!==null){await api.post(\"/messages/edit/\".concat(editingMessage.id),message);}else{await api.post(\"/messages/\".concat(ticketId),message);}}catch(err){toastError(err);}setInputMessage(\"\");setShowEmoji(false);setLoading(false);setReplyingMessage(null);setPrivateMessage(false);setEditingMessage(null);setPrivateMessageInputVisible(false);handleMenuItemClick();};const handleStartRecording=async()=>{setLoading(true);try{await navigator.mediaDevices.getUserMedia({audio:true});await Mp3Recorder.start();setRecording(true);setLoading(false);}catch(err){toastError(err);setLoading(false);}};useEffect(()=>{async function fetchData(){const companyId=user.companyId;const messages=await listQuickMessages({companyId,userId:user.id});const options=messages.map(m=>{let truncatedMessage=m.message;if(isString(truncatedMessage)&&truncatedMessage.length>90){truncatedMessage=m.message.substring(0,90)+\"...\";}return{value:m.message,label:\"/\".concat(m.shortcode,\" - \").concat(truncatedMessage),mediaPath:m.mediaPath};});if(isMounted.current){setQuickAnswer(options);}}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{if(isString(inputMessage)&&!isEmpty(inputMessage)&&inputMessage.length>=1){const firstWord=inputMessage.charAt(0);if(firstWord===\"/\"){setTypeBar(firstWord.indexOf(\"/\")>-1);const filteredOptions=quickAnswers.filter(m=>m.label.toLowerCase().indexOf(inputMessage.toLowerCase())>-1);setTypeBar(filteredOptions);}else{setTypeBar(false);}}else{setTypeBar(false);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[inputMessage]);const disableOption=()=>{return loading||recording||ticketStatus!==\"open\"&&ticketStatus!==\"group\";};const handleUploadCamera=async blob=>{setLoading(true);try{const formData=new FormData();const filename=\"\".concat(new Date().getTime(),\".png\");formData.append(\"medias\",blob,filename);formData.append(\"body\",privateMessage?\"\\u200D\":\"\");formData.append(\"fromMe\",true);await api.post(\"/messages/\".concat(ticketId),formData);}catch(err){toastError(err);setLoading(false);}setLoading(false);};const handleUploadQuickMessageMedia=async(blob,message)=>{setLoading(true);try{const extension=blob.type.split(\"/\")[1];const formData=new FormData();const filename=\"\".concat(new Date().getTime(),\".\").concat(extension);formData.append(\"medias\",blob,filename);formData.append(\"body\",privateMessage?\"\\u200D\".concat(message):message);formData.append(\"fromMe\",true);if(isMounted.current){await api.post(\"/messages/\".concat(ticketId),formData);}}catch(err){toastError(err);}finally{if(isMounted.current){setLoading(false);}}};const handleUploadAudio=async()=>{setLoading(true);try{const[,blob]=await Mp3Recorder.stop().getMp3();if(blob.size<10000){setLoading(false);setRecording(false);return;}const formData=new FormData();const filename=ticketChannel===\"whatsapp\"?\"\".concat(new Date().getTime(),\".mp3\"):\"\".concat(new Date().getTime(),\".m4a\");formData.append(\"medias\",blob,filename);formData.append(\"body\",filename);formData.append(\"fromMe\",true);if(isMounted.current){await api.post(\"/messages/\".concat(ticketId),formData);}}catch(err){toastError(err);}finally{if(isMounted.current){setLoading(false);setRecording(false);}}};const handleCloseModalMedias=()=>{setShowModalMedias(false);};const handleCancelAudio=async()=>{try{await Mp3Recorder.stop().getMp3();setRecording(false);}catch(err){toastError(err);}};const handleOpenMenuClick=event=>{setAnchorEl(event.currentTarget);};const handleMenuItemClick=event=>{setAnchorEl(null);};const handleSendContactModalOpen=async()=>{handleMenuItemClick();setSenVcardModalOpen(true);};const handleCameraModalOpen=async()=>{handleMenuItemClick();setModalCameraOpen(true);};const handleCancelSelection=()=>{setMediasUpload([]);setShowModalMedias(false);};const renderReplyingMessage=message=>{var _message$contact;return/*#__PURE__*/React.createElement(\"div\",{className:classes.replyginMsgWrapper},/*#__PURE__*/React.createElement(\"div\",{className:classes.replyginMsgContainer},/*#__PURE__*/React.createElement(\"span\",{className:clsx(classes.replyginContactMsgSideColor,{[classes.replyginSelfMsgSideColor]:!message.fromMe})}),replyingMessage&&/*#__PURE__*/React.createElement(\"div\",{className:classes.replyginMsgBody},!message.fromMe&&/*#__PURE__*/React.createElement(\"span\",{className:classes.messageContactName},(_message$contact=message.contact)===null||_message$contact===void 0?void 0:_message$contact.name),message.body)),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"showRecorder\",component:\"span\",disabled:disableOption(),onClick:()=>{setReplyingMessage(null);setEditingMessage(null);setInputMessage(\"\");}},/*#__PURE__*/React.createElement(Clear,{className:classes.sendMessageIcons})));};if(mediasUpload.length>0){return/*#__PURE__*/React.createElement(Paper,{elevation:0,square:true,className:classes.viewMediaInputWrapper,onDragEnter:()=>setOnDragEnter(true),onDrop:e=>handleInputDrop(e)},showModalMedias&&/*#__PURE__*/React.createElement(MessageUploadMedias,{isOpen:showModalMedias,files:mediasUpload,onClose:handleCloseModalMedias,onSend:handleUploadMedia,onCancelSelection:handleCancelSelection}));}else{return/*#__PURE__*/React.createElement(React.Fragment,null,modalCameraOpen&&/*#__PURE__*/React.createElement(CameraModal,{isOpen:modalCameraOpen,onRequestClose:()=>setModalCameraOpen(false),onCapture:handleCapture}),senVcardModalOpen&&/*#__PURE__*/React.createElement(ContactSendModal,{modalOpen:senVcardModalOpen,onClose:c=>{handleSendContatcMessage(c);}}),/*#__PURE__*/React.createElement(Paper,{square:true,elevation:0,className:classes.mainWrapper,onDragEnter:()=>setOnDragEnter(true),onDrop:e=>handleInputDrop(e)},replyingMessage&&renderReplyingMessage(replyingMessage)||editingMessage&&renderReplyingMessage(editingMessage),/*#__PURE__*/React.createElement(\"div\",{className:classes.newMessageBox},/*#__PURE__*/React.createElement(Hidden,{only:[\"sm\",\"xs\"]},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"emojiPicker\",component:\"span\",disabled:disableOption(),onClick:e=>setShowEmoji(prevState=>!prevState)},/*#__PURE__*/React.createElement(Mood,{className:classes.sendMessageIcons})),showEmoji?/*#__PURE__*/React.createElement(\"div\",{className:classes.emojiBox},/*#__PURE__*/React.createElement(ClickAwayListener,{onClickAway:e=>setShowEmoji(true)},/*#__PURE__*/React.createElement(Picker,{perLine:16,theme:\"dark\",i18n:i18n,showPreview:true,showSkinTones:false,onSelect:handleAddEmoji}))):null,/*#__PURE__*/React.createElement(Fab,{disabled:disableOption(),\"aria-label\":\"uploadMedias\",component:\"span\",className:classes.invertedFabMenu,onClick:handleOpenMenuClick},/*#__PURE__*/React.createElement(AddIcon,null)),/*#__PURE__*/React.createElement(Menu,{anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleMenuItemClick,id:\"simple-menu\"},/*#__PURE__*/React.createElement(MenuItem,{onClick:handleMenuItemClick},/*#__PURE__*/React.createElement(\"input\",{multiple:true,type:\"file\",id:\"upload-img-button\",accept:\"image/*, video/*, audio/* \"// disabled={disableOption()}\n,className:classes.uploadInput,onChange:handleChangeMedias}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"upload-img-button\"},/*#__PURE__*/React.createElement(Fab,{\"aria-label\":\"upload-img\",component:\"span\",className:classes.invertedFabMenuMP},/*#__PURE__*/React.createElement(PermMedia,null)),i18n.t(\"messageInput.type.imageVideo\"))),/*#__PURE__*/React.createElement(MenuItem,{onClick:handleCameraModalOpen},/*#__PURE__*/React.createElement(Fab,{className:classes.invertedFabMenuCamera},/*#__PURE__*/React.createElement(CameraAlt,null)),i18n.t(\"messageInput.type.cam\")),/*#__PURE__*/React.createElement(MenuItem,{onClick:handleMenuItemClick},/*#__PURE__*/React.createElement(\"input\",{multiple:true,type:\"file\",id:\"upload-doc-button\",accept:\"application/*, text/*\"// disabled={disableOption()}\n,className:classes.uploadInput,onChange:handleChangeMedias}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"upload-doc-button\"},/*#__PURE__*/React.createElement(Fab,{\"aria-label\":\"upload-img\",component:\"span\",className:classes.invertedFabMenuDoc},/*#__PURE__*/React.createElement(Description,null)),\"Documento\")),/*#__PURE__*/React.createElement(MenuItem,{onClick:handleSendContactModalOpen},/*#__PURE__*/React.createElement(Fab,{className:classes.invertedFabMenuCont},/*#__PURE__*/React.createElement(Person,null)),i18n.t(\"messageInput.type.contact\")),/*#__PURE__*/React.createElement(MenuItem,{onClick:handleSendLinkVideo},/*#__PURE__*/React.createElement(Fab,{className:classes.invertedFabMenuMeet},/*#__PURE__*/React.createElement(Duo,null)),i18n.t(\"messageInput.type.meet\"))),signMessagePar&&/*#__PURE__*/React.createElement(Tooltip,{title:i18n.t(\"messageInput.tooltip.signature\")},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"send-upload\",component:\"span\",onClick:handleChangeSign},signMessage===true?/*#__PURE__*/React.createElement(Create,{style:{color:theme.mode===\"light\"?theme.palette.primary.main:\"#EEE\"}}):/*#__PURE__*/React.createElement(Create,{style:{color:\"grey\"}}))),/*#__PURE__*/React.createElement(Tooltip,{title:i18n.t(\"messageInput.tooltip.privateMessage\")},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"send-upload\",component:\"span\",onClick:handlePrivateMessage},privateMessage===true?/*#__PURE__*/React.createElement(Comment,{style:{color:theme.mode===\"light\"?theme.palette.primary.main:\"#EEE\"}}):/*#__PURE__*/React.createElement(Comment,{style:{color:\"grey\"}})))),/*#__PURE__*/React.createElement(Hidden,{only:[\"md\",\"lg\",\"xl\"]},/*#__PURE__*/React.createElement(IconButton,{\"aria-controls\":\"simple-menu\",\"aria-haspopup\":\"true\",onClick:handleOpenMenuClick},/*#__PURE__*/React.createElement(MoreVert,null)),/*#__PURE__*/React.createElement(Menu,{id:\"simple-menu\",keepMounted:true,anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuItemClick},/*#__PURE__*/React.createElement(MenuItem,{onClick:handleMenuItemClick},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"emojiPicker\",component:\"span\",disabled:disableOption(),onClick:e=>setShowEmoji(prevState=>!prevState)},/*#__PURE__*/React.createElement(Mood,{className:classes.sendMessageIcons}))),/*#__PURE__*/React.createElement(MenuItem,{onClick:handleMenuItemClick},/*#__PURE__*/React.createElement(\"input\",{multiple:true,type:\"file\",id:\"upload-button\",disabled:disableOption(),className:classes.uploadInput,onChange:handleChangeMedias}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"upload-button\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"upload\",component:\"span\",disabled:disableOption()},/*#__PURE__*/React.createElement(AttachFile,{className:classes.sendMessageIcons})))),signMessagePar&&/*#__PURE__*/React.createElement(Tooltip,{title:\"Habilitar/Desabilitar Assinatura\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"send-upload\",component:\"span\",onClick:handleChangeSign},signMessage===true?/*#__PURE__*/React.createElement(Create,{style:{color:theme.mode===\"light\"?theme.palette.primary.main:\"#EEE\"}}):/*#__PURE__*/React.createElement(Create,{style:{color:\"grey\"}}))),/*#__PURE__*/React.createElement(Tooltip,{title:\"Habilitar/Desabilitar Coment\\xE1rios\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"send-upload\",component:\"span\",onClick:handlePrivateMessage},privateMessage===true?/*#__PURE__*/React.createElement(Comment,{style:{color:theme.mode===\"light\"?theme.palette.primary.main:\"#EEE\"}}):/*#__PURE__*/React.createElement(Comment,{style:{color:\"grey\"}}))))),/*#__PURE__*/React.createElement(\"div\",{className:classes.flexContainer},privateMessageInputVisible&&/*#__PURE__*/React.createElement(\"div\",{className:classes.flexItem},/*#__PURE__*/React.createElement(\"div\",{className:classes.messageInputWrapperPrivate},/*#__PURE__*/React.createElement(InputBase,{inputRef:input=>{input&&input.focus();input&&(inputRef.current=input);},className:classes.messageInputPrivate,placeholder:ticketStatus===\"open\"||ticketStatus===\"group\"?i18n.t(\"messagesInput.placeholderPrivateMessage\"):i18n.t(\"messagesInput.placeholderClosed\"),multiline:true,maxRows:5,value:inputMessage,onChange:handleChangeInput,disabled:disableOption(),onPaste:e=>{(ticketStatus===\"open\"||ticketStatus===\"group\")&&handleInputPaste(e);},onKeyPress:e=>{if(loading||e.shiftKey)return;else if(e.key===\"Enter\"){handleSendMessage();}}}),typeBar?/*#__PURE__*/React.createElement(\"ul\",{className:classes.messageQuickAnswersWrapper},typeBar.map((value,index)=>{return/*#__PURE__*/React.createElement(\"li\",{className:classes.messageQuickAnswersWrapperItem,key:index},/*#__PURE__*/React.createElement(\"a\",{onClick:()=>handleQuickAnswersClick(value)},\"\".concat(value.label,\" - \").concat(value.value)));})):/*#__PURE__*/React.createElement(\"div\",null))),!privateMessageInputVisible&&/*#__PURE__*/React.createElement(\"div\",{className:classes.flexItem},/*#__PURE__*/React.createElement(\"div\",{className:classes.messageInputWrapper},/*#__PURE__*/React.createElement(InputBase,{inputRef:input=>{input&&input.focus();input&&(inputRef.current=input);},className:classes.messageInput,placeholder:placeholderText,multiline:true,maxRows:5,value:inputMessage,onChange:handleChangeInput,disabled:disableOption(),onPaste:e=>{(ticketStatus===\"open\"||ticketStatus===\"group\")&&handleInputPaste(e);},onKeyPress:e=>{if(loading||e.shiftKey)return;else if(e.key===\"Enter\"){handleSendMessage();}}}),typeBar?/*#__PURE__*/React.createElement(\"ul\",{className:classes.messageQuickAnswersWrapper},typeBar.map((value,index)=>{return/*#__PURE__*/React.createElement(\"li\",{className:classes.messageQuickAnswersWrapperItem,key:index},/*#__PURE__*/React.createElement(\"a\",{onClick:()=>handleQuickAnswersClick(value)},\"\".concat(value.label,\" - \").concat(value.value)));})):/*#__PURE__*/React.createElement(\"div\",null)))),!privateMessageInputVisible&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Tooltip,{title:i18n.t(\"tickets.buttons.scredule\")},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"scheduleMessage\",component:\"span\",onClick:()=>setAppointmentModalOpen(true),disabled:loading},/*#__PURE__*/React.createElement(Timer,{className:classes.sendMessageIcons}))),inputMessage||showSelectMessageCheckbox?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sendMessage\",component:\"span\",onClick:showSelectMessageCheckbox?handleOpenModalForward:handleSendMessage,disabled:loading},showSelectMessageCheckbox?/*#__PURE__*/React.createElement(Reply,{className:classes.ForwardMessageIcons}):/*#__PURE__*/React.createElement(Send,{className:classes.sendMessageIcons}))):recording?/*#__PURE__*/React.createElement(\"div\",{className:classes.recorderWrapper},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"cancelRecording\",component:\"span\",fontSize:\"large\",disabled:loading,onClick:handleCancelAudio},/*#__PURE__*/React.createElement(HighlightOff,{className:classes.cancelAudioIcon})),loading?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CircularProgress,{className:classes.audioLoading})):/*#__PURE__*/React.createElement(RecordingTimer,null),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sendRecordedAudio\",component:\"span\",onClick:handleUploadAudio,disabled:loading},/*#__PURE__*/React.createElement(CheckCircleOutline,{className:classes.sendAudioIcon}))):/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"showRecorder\",component:\"span\",disabled:disableOption(),onClick:handleStartRecording},/*#__PURE__*/React.createElement(Mic,{className:classes.sendMessageIcons}))),privateMessageInputVisible&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sendMessage\",component:\"span\",onClick:showSelectMessageCheckbox?handleOpenModalForward:handleSendMessage,disabled:loading},showSelectMessageCheckbox?/*#__PURE__*/React.createElement(Reply,{className:classes.ForwardMessageIcons}):/*#__PURE__*/React.createElement(Send,{className:classes.sendMessageIcons}))),appointmentModalOpen&&/*#__PURE__*/React.createElement(ScheduleModal,{open:appointmentModalOpen,onClose:()=>setAppointmentModalOpen(false),message:inputMessage,contactId:contactId}))));}};export default MessageInput;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","Picker","useMediaQuery","useTheme","isNil","CircularProgress","ClickAwayListener","IconButton","InputBase","makeStyles","Paper","Hidden","Menu","MenuItem","Tooltip","Fab","blue","green","pink","grey","AttachFile","CheckCircleOutline","Clear","Comment","Create","Description","HighlightOff","Mic","Mood","MoreVert","Send","PermMedia","Person","Reply","Duo","Timer","AddIcon","CameraAlt","MicRecorder","clsx","ReplyMessageContext","AuthContext","i18n","toastError","api","RecordingTimer","useQuickMessages","isString","isEmpty","ContactSendModal","CameraModal","axios","useCompanySettings","ForwardMessageContext","MessageUploadMedias","EditMessageContext","ScheduleModal","useParams","Mp3Recorder","bitRate","useStyles","theme","mainWrapper","background","display","flexDirection","alignItems","borderTop","breakpoints","down","position","bottom","width","avatar","height","borderRadius","dropInfo","padding","left","right","dropInfoOut","gridFiles","maxHeight","overflow","newMessageBox","palette","default","messageInputWrapper","marginRight","paper","flex","messageInputWrapperPrivate","messageInput","paddingLeft","border","messageInputPrivate","color","sendMessageIcons","ForwardMessageIcons","transform","uploadInput","viewMediaInputWrapper","justifyContent","backgroundColor","mode","emojiBox","circleLoading","opacity","top","marginLeft","audioLoading","recorderWrapper","alignContent","cancelAudioIcon","sendAudioIcon","replyginMsgWrapper","paddingTop","paddingRight","optionsBackground","replyginMsgContainer","overflowY","replyginMsgBody","whiteSpace","replyginContactMsgSideColor","replyginSelfMsgSideColor","messageContactName","fontWeight","messageQuickAnswersWrapper","margin","listStyle","textOverflow","cursor","invertedFabMenu","boxShadow","spacing","invertedFabMenuMP","invertedFabMenuCont","minHeight","invertedFabMenuMeet","invertedFabMenuDoc","invertedFabMenuCamera","flexContainer","flexItem","MessageInput","_ref","ticketId","ticketStatus","droppedFiles","contactId","ticketChannel","classes","mediasUpload","setMediasUpload","isMounted","inputMessage","setInputMessage","showEmoji","setShowEmoji","loading","setLoading","recording","setRecording","quickAnswers","setQuickAnswer","typeBar","setTypeBar","inputRef","onDragEnter","setOnDragEnter","anchorEl","setAnchorEl","setReplyingMessage","replyingMessage","setEditingMessage","editingMessage","user","appointmentModalOpen","setAppointmentModalOpen","signMessagePar","setSignMessagePar","get","getSetting","signMessage","setSignMessage","privateMessage","setPrivateMessage","privateMessageInputVisible","setPrivateMessageInputVisible","senVcardModalOpen","setSenVcardModalOpen","showModalMedias","setShowModalMedias","list","listQuickMessages","isMobile","placeholderText","setPlaceHolderText","t","maxLength","Infinity","length","substring","selectedMessages","setForwardMessageModalOpen","showSelectMessageCheckbox","selectedMedias","Array","from","current","focus","body","setTimeout","fetchSettings","setting","sendSignMessage","signMessageStorage","JSON","parse","localStorage","getItem","capitalizeFirstLetter","string","charAt","toUpperCase","slice","handleSendLinkVideo","link","concat","handleChangeInput","e","target","value","handlePrivateMessage","handleQuickAnswersClick","mediaPath","data","responseType","handleUploadQuickMessageMedia","err","handleAddEmoji","emoji","native","prevState","modalCameraOpen","setModalCameraOpen","handleCapture","imageData","handleUploadCamera","handleChangeMedias","files","handleChangeSign","getStatusSingMessageLocalstogare","handleOpenModalForward","setItem","handleInputPaste","clipboardData","handleInputDrop","preventDefault","dataTransfer","handleUploadMedia","formData","FormData","append","forEach","media","caption","file","post","handleSendContatcMessage","vcard","message","read","fromMe","mediaUrl","quotedMsg","isPrivate","vCard","handleSendMessage","trim","userName","name","sendMessage","id","handleMenuItemClick","handleStartRecording","navigator","mediaDevices","getUserMedia","audio","start","fetchData","companyId","messages","userId","options","map","m","truncatedMessage","label","shortcode","firstWord","indexOf","filteredOptions","filter","toLowerCase","disableOption","blob","filename","Date","getTime","extension","type","split","handleUploadAudio","stop","getMp3","size","handleCloseModalMedias","handleCancelAudio","handleOpenMenuClick","event","currentTarget","handleSendContactModalOpen","handleCameraModalOpen","handleCancelSelection","renderReplyingMessage","_message$contact","createElement","className","contact","component","disabled","onClick","elevation","square","onDrop","isOpen","onClose","onSend","onCancelSelection","Fragment","onRequestClose","onCapture","modalOpen","c","only","onClickAway","perLine","showPreview","showSkinTones","onSelect","keepMounted","open","Boolean","multiple","accept","onChange","htmlFor","title","style","primary","main","input","placeholder","multiline","maxRows","onPaste","onKeyPress","shiftKey","key","index","messageQuickAnswersWrapperItem","fontSize"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/MessageInput/index.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport { Picker } from \"emoji-mart\";\r\nimport { useMediaQuery, useTheme } from '@material-ui/core';\r\nimport { isNil } from \"lodash\";\r\nimport {\r\n  CircularProgress,\r\n  ClickAwayListener,\r\n  IconButton,\r\n  InputBase,\r\n  makeStyles,\r\n  Paper,\r\n  Hidden,\r\n  Menu,\r\n  MenuItem,\r\n  Tooltip,\r\n  Fab,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  blue,\r\n  green,\r\n  pink,\r\n  grey,\r\n} from \"@material-ui/core/colors\";\r\nimport {\r\n  AttachFile,\r\n  CheckCircleOutline,\r\n  Clear,\r\n  Comment,\r\n  Create,\r\n  Description,\r\n  HighlightOff,\r\n  Mic,\r\n  Mood,\r\n  MoreVert,\r\n  Send,\r\n  PermMedia,\r\n  Person,\r\n  Reply,\r\n  Duo,\r\n  Timer,\r\n} from \"@material-ui/icons\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { CameraAlt } from \"@material-ui/icons\";\r\nimport MicRecorder from \"mic-recorder-to-mp3\";\r\nimport clsx from \"clsx\";\r\nimport { ReplyMessageContext } from \"../../context/ReplyingMessage/ReplyingMessageContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport api from \"../../services/api\";\r\nimport RecordingTimer from \"./RecordingTimer\";\r\n\r\nimport useQuickMessages from \"../../hooks/useQuickMessages\";\r\nimport { isString, isEmpty } from \"lodash\";\r\nimport ContactSendModal from \"../ContactSendModal\";\r\nimport CameraModal from \"../CameraModal\";\r\nimport axios from \"axios\";\r\n\r\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\r\nimport { ForwardMessageContext } from \"../../context/ForwarMessage/ForwardMessageContext\";\r\nimport MessageUploadMedias from \"../MessageUploadMedias\";\r\nimport { EditMessageContext } from \"../../context/EditingMessage/EditingMessageContext\";\r\nimport ScheduleModal from \"../ScheduleModal\";\r\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\r\n\r\n\r\nconst Mp3Recorder = new MicRecorder({ bitRate: 128 });\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainWrapper: {\r\n    background: \"#eee\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      position: \"fixed\",\r\n      bottom: 0,\r\n      width: \"100%\",\r\n    },\r\n  },\r\n  avatar: {\r\n    width: \"50px\",\r\n    height: \"50px\",\r\n    borderRadius: \"25%\",\r\n  },\r\n  dropInfo: {\r\n    background: \"#eee\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    padding: 15,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  dropInfoOut: {\r\n    display: \"none\",\r\n  },\r\n  gridFiles: {\r\n    maxHeight: \"100%\",\r\n    overflow: \"scroll\",\r\n  },\r\n  newMessageBox: {\r\n    background: theme.palette.background.default,\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    padding: \"7px\",\r\n    alignItems: \"center\",\r\n  },\r\n  messageInputWrapper: {\r\n    padding: 6,\r\n    marginRight: 7,\r\n    background: theme.palette.background.paper,\r\n    display: \"flex\",\r\n    borderRadius: 20,\r\n    flex: 1,\r\n    position: \"relative\",\r\n  },\r\n  messageInputWrapperPrivate: {\r\n    padding: 6,\r\n    marginRight: 7,\r\n    background: \"#F0E68C\",\r\n    display: \"flex\",\r\n    borderRadius: 20,\r\n    flex: 1,\r\n    position: \"relative\",\r\n  },\r\n  messageInput: {\r\n    paddingLeft: 10,\r\n    flex: 1,\r\n    border: \"none\",\r\n\r\n  },\r\n  messageInputPrivate: {\r\n    paddingLeft: 10,\r\n    flex: 1,\r\n    border: \"none\",\r\n    color: grey[800],\r\n\r\n  },\r\n  sendMessageIcons: {\r\n    color: grey[700],\r\n  },\r\n  ForwardMessageIcons: {\r\n    color: grey[700],\r\n    transform: 'scaleX(-1)'\r\n  },\r\n  uploadInput: {\r\n    display: \"none\",\r\n  },\r\n  viewMediaInputWrapper: {\r\n    maxHeight: \"100%\",\r\n    display: \"flex\",\r\n    padding: \"10px 13px\",\r\n    position: \"relative\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: theme.mode === 'light' ? \"#ffffff\" : \"#202c33\",\r\n    borderTop: \"1px solid rgba(0, 0, 0, 0.12)\",\r\n  },\r\n  emojiBox: {\r\n    position: \"absolute\",\r\n    bottom: 63,\r\n    width: 40,\r\n    borderTop: \"1px solid #e8e8e8\",\r\n  },\r\n  circleLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n    position: \"absolute\",\r\n    top: \"20%\",\r\n    left: \"50%\",\r\n    marginLeft: -12,\r\n  },\r\n  audioLoading: {\r\n    color: green[500],\r\n    opacity: \"70%\",\r\n  },\r\n  recorderWrapper: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    alignContent: \"middle\",\r\n  },\r\n  cancelAudioIcon: {\r\n    color: \"red\",\r\n  },\r\n  sendAudioIcon: {\r\n    color: \"green\",\r\n  },\r\n  replyginMsgWrapper: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingTop: 8,\r\n    paddingLeft: 73,\r\n    paddingRight: 7,\r\n    backgroundColor: theme.palette.optionsBackground,\r\n  },\r\n  replyginMsgContainer: {\r\n    flex: 1,\r\n    marginRight: 5,\r\n    overflowY: \"hidden\",\r\n    backgroundColor: theme.mode === \"light\" ? \"#f0f0f0\" : \"#1d282f\", //\"rgba(0, 0, 0, 0.05)\",\r\n    borderRadius: \"7.5px\",\r\n    display: \"flex\",\r\n    position: \"relative\",\r\n  },\r\n  replyginMsgBody: {\r\n    padding: 10,\r\n    height: \"auto\",\r\n    display: \"block\",\r\n    whiteSpace: \"pre-wrap\",\r\n    overflow: \"hidden\",\r\n  },\r\n  replyginContactMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#35cd96\",\r\n  },\r\n  replyginSelfMsgSideColor: {\r\n    flex: \"none\",\r\n    width: \"4px\",\r\n    backgroundColor: \"#6bcbef\",\r\n  },\r\n  messageContactName: {\r\n    display: \"flex\",\r\n    color: \"#6bcbef\",\r\n    fontWeight: 500,\r\n  },\r\n  messageQuickAnswersWrapper: {\r\n    margin: 0,\r\n    position: \"absolute\",\r\n    bottom: \"50px\",\r\n    background: theme.palette.background.default,\r\n    padding: 0,\r\n    border: \"none\",\r\n    left: 0,\r\n    width: \"100%\",\r\n    \"& li\": {\r\n      listStyle: \"none\",\r\n      \"& a\": {\r\n        display: \"block\",\r\n        padding: \"8px\",\r\n        textOverflow: \"ellipsis\",\r\n        overflow: \"hidden\",\r\n        maxHeight: \"30px\",\r\n        \"&:hover\": {\r\n          background: theme.palette.background.paper,\r\n          cursor: \"pointer\",\r\n        },\r\n      },\r\n    },\r\n  },\r\n  invertedFabMenu: {\r\n    border: \"none\",\r\n    borderRadius: 50, // Define o raio da borda para 0 para remover qualquer borda\r\n    boxShadow: \"none\", // Remove a sombra\r\n    padding: theme.spacing(1),\r\n    backgroundColor: \"transparent\",\r\n    color: \"grey\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n    \"&:disabled\": {\r\n      backgroundColor: \"transparent !important\",\r\n    },\r\n  },\r\n  invertedFabMenuMP: {\r\n    border: \"none\",\r\n    borderRadius: 0, // Define o raio da borda para 0 para remover qualquer borda\r\n    boxShadow: \"none\", // Remove a sombra\r\n    width: theme.spacing(4), // Ajuste o tamanho de acordo com suas preferências\r\n    height: theme.spacing(4),\r\n    backgroundColor: \"transparent\",\r\n    color: blue[800],\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n  },\r\n  invertedFabMenuCont: {\r\n    border: \"none\",\r\n    borderRadius: 0, // Define o raio da borda para 0 para remover qualquer borda\r\n    boxShadow: \"none\", // Remove a sombra\r\n    minHeight: \"auto\",\r\n    width: theme.spacing(4), // Ajuste o tamanho de acordo com suas preferências\r\n    height: theme.spacing(4),\r\n    backgroundColor: \"transparent\",\r\n    color: blue[500],\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n  },\r\n  invertedFabMenuMeet: {\r\n    border: \"none\",\r\n    borderRadius: 0, // Define o raio da borda para 0 para remover qualquer borda\r\n    boxShadow: \"none\", // Remove a sombra\r\n    minHeight: \"auto\",\r\n    width: theme.spacing(4), // Ajuste o tamanho de acordo com suas preferências\r\n    height: theme.spacing(4),\r\n    backgroundColor: \"transparent\",\r\n    color: green[500],\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n  },\r\n  invertedFabMenuDoc: {\r\n    border: \"none\",\r\n    borderRadius: 0, // Define o raio da borda para 0 para remover qualquer borda\r\n    boxShadow: \"none\", // Remove a sombra\r\n    width: theme.spacing(4), // Ajuste o tamanho de acordo com suas preferências\r\n    height: theme.spacing(4),\r\n    backgroundColor: \"transparent\",\r\n    color: \"#7f66ff\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n  },\r\n  invertedFabMenuCamera: {\r\n    border: \"none\",\r\n    borderRadius: 0, // Define o raio da borda para 0 para remover qualquer borda\r\n    boxShadow: \"none\", // Remove a sombra\r\n    width: theme.spacing(4), // Ajuste o tamanho de acordo com suas preferências\r\n    height: theme.spacing(4),\r\n    backgroundColor: \"transparent\",\r\n    color: pink[500],\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n    },\r\n  },\r\n  flexContainer: {\r\n    display: \"flex\",\r\n    flex: 1,\r\n    flexDirection: \"column\",\r\n  },\r\n  flexItem: {\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst MessageInput = ({ ticketId, ticketStatus, droppedFiles, contactId, ticketChannel }) => {\r\n\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [mediasUpload, setMediasUpload] = useState([]);\r\n  const isMounted = useRef(true);\r\n\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [recording, setRecording] = useState(false);\r\n  const [quickAnswers, setQuickAnswer] = useState([]);\r\n  const [typeBar, setTypeBar] = useState(false);\r\n  const inputRef = useRef();\r\n  const [onDragEnter, setOnDragEnter] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const { setReplyingMessage, replyingMessage } = useContext(ReplyMessageContext);\r\n  const { setEditingMessage, editingMessage } = useContext(EditMessageContext);\r\n  const { user } = useContext(AuthContext);\r\n  const [appointmentModalOpen, setAppointmentModalOpen] = useState(false);\r\n\r\n  const [signMessagePar, setSignMessagePar] = useState(false);\r\n  const { get: getSetting } = useCompanySettings();\r\n  const [signMessage, setSignMessage] = useState(true);\r\n  const [privateMessage, setPrivateMessage] = useState(false);\r\n  const [privateMessageInputVisible, setPrivateMessageInputVisible] = useState(false);\r\n  const [senVcardModalOpen, setSenVcardModalOpen] = useState(false);\r\n  const [showModalMedias, setShowModalMedias] = useState(false);\r\n\r\n  const { list: listQuickMessages } = useQuickMessages();\r\n\r\n\r\n  const isMobile = useMediaQuery('(max-width: 767px)'); // Ajuste o valor conforme necessário\r\n  const [placeholderText, setPlaceHolderText] = useState(\"\");\r\n\r\n  // Determine o texto do placeholder com base no ticketStatus\r\n  useEffect(() => {\r\n    if (ticketStatus === \"open\" || ticketStatus === \"group\") {\r\n      setPlaceHolderText(i18n.t(\"messagesInput.placeholderOpen\"));\r\n    } else {\r\n      setPlaceHolderText(i18n.t(\"messagesInput.placeholderClosed\"));\r\n    }\r\n\r\n    // Limitar o comprimento do texto do placeholder apenas em ambientes mobile\r\n    const maxLength = isMobile ? 20 : Infinity; // Define o limite apenas em mobile\r\n\r\n    if (isMobile && placeholderText.length > maxLength) {\r\n      setPlaceHolderText(placeholderText.substring(0, maxLength) + \"...\");\r\n    }\r\n  }, [ticketStatus])\r\n\r\n  const {\r\n    selectedMessages,\r\n    setForwardMessageModalOpen,\r\n    showSelectMessageCheckbox } = useContext(ForwardMessageContext);\r\n\r\n  useEffect(() => {\r\n    if (droppedFiles && droppedFiles.length > 0) {\r\n      const selectedMedias = Array.from(droppedFiles);\r\n      setMediasUpload(selectedMedias);\r\n      setShowModalMedias(true);\r\n    }\r\n  }, [droppedFiles]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    if (editingMessage) {\r\n      setInputMessage(editingMessage.body);\r\n    }\r\n  }, [replyingMessage, editingMessage]);\r\n\r\n  useEffect(() => {\r\n    inputRef.current.focus();\r\n    return () => {\r\n      setInputMessage(\"\");\r\n      setShowEmoji(false);\r\n      setMediasUpload([]);\r\n      setReplyingMessage(null);\r\n      //setSignMessage(true);\r\n      setPrivateMessage(false);\r\n      setPrivateMessageInputVisible(false)\r\n      setEditingMessage(null);\r\n    };\r\n  }, [ticketId, setReplyingMessage, setEditingMessage]);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if (isMounted.current)\r\n        setOnDragEnter(false);\r\n    }, 1000);\r\n    // eslint-disable-next-line\r\n  }, [onDragEnter === true]);\r\n\r\n  //permitir ativar/desativar firma\r\n  useEffect(() => {\r\n    const fetchSettings = async () => {\r\n      const setting = await getSetting({\r\n        \"column\": \"sendSignMessage\"\r\n      });\r\n\r\n      if (isMounted.current) {\r\n        if (setting.sendSignMessage === \"enabled\") {\r\n          setSignMessagePar(true);\r\n          const signMessageStorage = JSON.parse(\r\n            localStorage.getItem(\"persistentSignMessage\")\r\n          );\r\n          if (isNil(signMessageStorage)) {\r\n            setSignMessage(true)\r\n          } else {\r\n            setSignMessage(signMessageStorage);\r\n          }\r\n        } else {\r\n          setSignMessagePar(false);\r\n        }\r\n      }\r\n    };\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const capitalizeFirstLetter = (string) => {\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n  }\r\n\r\n  const handleSendLinkVideo = async () => {\r\n    const link = `https://meet.jit.si/${ticketId}`;\r\n    setInputMessage(link);\r\n  }\r\n\r\n  const handleChangeInput = (e) => {\r\n    setInputMessage(e.target.value);\r\n  };\r\n\r\n  const handlePrivateMessage = (e) => {\r\n    setPrivateMessage(!privateMessage);\r\n    setPrivateMessageInputVisible(!privateMessageInputVisible);\r\n  };\r\n\r\n  const handleQuickAnswersClick = async (value) => {\r\n    if (value.mediaPath) {\r\n      try {\r\n        const { data } = await axios.get(value.mediaPath, {\r\n          responseType: \"blob\",\r\n        });\r\n\r\n        handleUploadQuickMessageMedia(data, value.value);\r\n        setInputMessage(\"\");\r\n        return;\r\n        //  handleChangeMedias(response)\r\n      } catch (err) {\r\n        toastError(err);\r\n      }\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setInputMessage(value.value);\r\n    setTypeBar(false);\r\n  };\r\n\r\n  const handleAddEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInputMessage((prevState) => prevState + emoji);\r\n  };\r\n\r\n  const [modalCameraOpen, setModalCameraOpen] = useState(false);\r\n\r\n  const handleCapture = (imageData) => {\r\n    if (imageData) {\r\n      handleUploadCamera(imageData);\r\n    }\r\n  };\r\n\r\n  const handleChangeMedias = (e) => {\r\n    if (!e.target.files) {\r\n      return;\r\n    }\r\n    const selectedMedias = Array.from(e.target.files);\r\n    setMediasUpload(selectedMedias);\r\n    setShowModalMedias(true);\r\n  };\r\n\r\n  const handleChangeSign = (e) => {\r\n    getStatusSingMessageLocalstogare();\r\n  };\r\n\r\n  const handleOpenModalForward = () => {\r\n    if (selectedMessages.length === 0) {\r\n      setForwardMessageModalOpen(false)\r\n      toastError(i18n.t(\"messagesList.header.notMessage\"));\r\n      return;\r\n    }\r\n    setForwardMessageModalOpen(true);\r\n  }\r\n\r\n  const getStatusSingMessageLocalstogare = () => {\r\n    const signMessageStorage = JSON.parse(\r\n      localStorage.getItem(\"persistentSignMessage\")\r\n    );\r\n    //si existe uma chave \"sendSingMessage\"\r\n    if (signMessageStorage !== null) {\r\n      if (signMessageStorage) {\r\n        localStorage.setItem(\"persistentSignMessage\", false);\r\n        setSignMessage(false);\r\n      } else {\r\n        localStorage.setItem(\"persistentSignMessage\", true);\r\n        setSignMessage(true);\r\n      }\r\n    } else {\r\n      localStorage.setItem(\"persistentSignMessage\", false);\r\n      setSignMessage(false);\r\n    }\r\n  };\r\n\r\n  const handleInputPaste = (e) => {\r\n    if (e.clipboardData.files[0]) {\r\n      const selectedMedias = Array.from(e.clipboardData.files);\r\n      setMediasUpload(selectedMedias);\r\n      setShowModalMedias(true);\r\n    }\r\n  };\r\n\r\n  const handleInputDrop = (e) => {\r\n    e.preventDefault();\r\n    if (e.dataTransfer.files[0]) {\r\n      const selectedMedias = Array.from(e.dataTransfer.files);\r\n      setMediasUpload(selectedMedias);\r\n      setShowModalMedias(true);\r\n    }\r\n  };\r\n\r\n  const handleUploadMedia = async (mediasUpload) => {\r\n    setLoading(true);\r\n    // e.preventDefault();\r\n\r\n    // Certifique-se de que a variável medias esteja preenchida antes de continuar\r\n    if (!mediasUpload.length) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"fromMe\", true);\r\n    formData.append(\"isPrivate\", privateMessage ? \"true\" : \"false\");\r\n    mediasUpload.forEach((media) => {\r\n      formData.append(\"body\", media.caption);\r\n      formData.append(\"medias\", media.file);\r\n    });\r\n\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setLoading(false);\r\n    setMediasUpload([]);\r\n    setShowModalMedias(false);\r\n    setPrivateMessage(false);\r\n    setPrivateMessageInputVisible(false)\r\n  };\r\n\r\n  const handleSendContatcMessage = async (vcard) => {\r\n    setSenVcardModalOpen(false);\r\n    setLoading(true);\r\n\r\n    if (isNil(vcard)) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const message = {\r\n      read: 1,\r\n      fromMe: true,\r\n      mediaUrl: \"\",\r\n      body: null,\r\n      quotedMsg: replyingMessage,\r\n      isPrivate: privateMessage ? \"true\" : \"false\",\r\n      vCard: vcard,\r\n    };\r\n    try {\r\n      await api.post(`/messages/${ticketId}`, message);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setShowEmoji(false);\r\n    setLoading(false);\r\n    setReplyingMessage(null);\r\n    setEditingMessage(null);\r\n    setPrivateMessage(false);\r\n    setPrivateMessageInputVisible(false);\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n\r\n    if (inputMessage.trim() === \"\") return;\r\n    setLoading(true);\r\n\r\n    const userName = privateMessage\r\n      ? `${user.name} - Mensagem Privada`\r\n      : user.name;\r\n\r\n    const sendMessage = inputMessage.trim();\r\n\r\n    const message = {\r\n      read: 1,\r\n      fromMe: true,\r\n      mediaUrl: \"\",\r\n      body: (signMessage || privateMessage) && !editingMessage\r\n        ? `*${userName}:*\\n${sendMessage}`\r\n        : sendMessage,\r\n      quotedMsg: replyingMessage,\r\n      isPrivate: privateMessage ? \"true\" : \"false\",\r\n    };\r\n\r\n    try {\r\n      if (editingMessage !== null) {\r\n        await api.post(`/messages/edit/${editingMessage.id}`, message);\r\n      } else {\r\n        await api.post(`/messages/${ticketId}`, message);\r\n      }\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n\r\n    setInputMessage(\"\");\r\n    setShowEmoji(false);\r\n    setLoading(false);\r\n    setReplyingMessage(null);\r\n    setPrivateMessage(false);\r\n    setEditingMessage(null);\r\n    setPrivateMessageInputVisible(false)\r\n    handleMenuItemClick();\r\n  };\r\n\r\n  const handleStartRecording = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      await Mp3Recorder.start();\r\n      setRecording(true);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const companyId = user.companyId;\r\n      const messages = await listQuickMessages({ companyId, userId: user.id });\r\n      const options = messages.map((m) => {\r\n        let truncatedMessage = m.message;\r\n        if (isString(truncatedMessage) && truncatedMessage.length > 90) {\r\n          truncatedMessage = m.message.substring(0, 90) + \"...\";\r\n        }\r\n        return {\r\n          value: m.message,\r\n          label: `/${m.shortcode} - ${truncatedMessage}`,\r\n          mediaPath: m.mediaPath,\r\n        };\r\n      });\r\n      if (isMounted.current) {\r\n\r\n        setQuickAnswer(options);\r\n      }\r\n    }\r\n    fetchData();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      isString(inputMessage) &&\r\n      !isEmpty(inputMessage) &&\r\n      inputMessage.length >= 1\r\n    ) {\r\n      const firstWord = inputMessage.charAt(0);\r\n\r\n      if (firstWord === \"/\") {\r\n        setTypeBar(firstWord.indexOf(\"/\") > -1);\r\n\r\n        const filteredOptions = quickAnswers.filter(\r\n          (m) => m.label.toLowerCase().indexOf(inputMessage.toLowerCase()) > -1\r\n        );\r\n        setTypeBar(filteredOptions);\r\n      } else {\r\n        setTypeBar(false);\r\n      }\r\n    } else {\r\n      setTypeBar(false);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [inputMessage]);\r\n\r\n  const disableOption = () => {\r\n    return (\r\n      loading ||\r\n      recording ||\r\n      (ticketStatus !== \"open\" && ticketStatus !== \"group\")\r\n    );\r\n  };\r\n\r\n  const handleUploadCamera = async (blob) => {\r\n    setLoading(true);\r\n    try {\r\n      const formData = new FormData();\r\n      const filename = `${new Date().getTime()}.png`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", privateMessage ? `\\u200d` : \"\");\r\n      formData.append(\"fromMe\", true);\r\n\r\n      await api.post(`/messages/${ticketId}`, formData);\r\n    } catch (err) {\r\n      toastError(err);\r\n      setLoading(false);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleUploadQuickMessageMedia = async (blob, message) => {\r\n    setLoading(true);\r\n    try {\r\n      const extension = blob.type.split(\"/\")[1];\r\n\r\n      const formData = new FormData();\r\n      const filename = `${new Date().getTime()}.${extension}`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", privateMessage ? `\\u200d${message}` : message);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      if (isMounted.current) {\r\n        await api.post(`/messages/${ticketId}`, formData);\r\n      }\r\n    } catch (err) {\r\n      toastError(err);\r\n    } finally {\r\n      if (isMounted.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  const handleUploadAudio = async () => {\r\n\r\n    setLoading(true);\r\n    try {\r\n      const [, blob] = await Mp3Recorder.stop().getMp3();\r\n      if (blob.size < 10000) {\r\n        setLoading(false);\r\n        setRecording(false);\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      const filename = ticketChannel === \"whatsapp\" ? `${new Date().getTime()}.mp3` : `${new Date().getTime()}.m4a`;\r\n      formData.append(\"medias\", blob, filename);\r\n      formData.append(\"body\", filename);\r\n      formData.append(\"fromMe\", true);\r\n\r\n      if (isMounted.current) {\r\n        await api.post(`/messages/${ticketId}`, formData);\r\n      }\r\n    } catch (err) {\r\n      toastError(err);\r\n    } finally {\r\n      if (isMounted.current) {\r\n        setLoading(false);\r\n        setRecording(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCloseModalMedias = () => {\r\n    setShowModalMedias(false);\r\n  };\r\n  const handleCancelAudio = async () => {\r\n    try {\r\n      await Mp3Recorder.stop().getMp3();\r\n      setRecording(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const handleOpenMenuClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuItemClick = (event) => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleSendContactModalOpen = async () => {\r\n    handleMenuItemClick();\r\n    setSenVcardModalOpen(true);\r\n  };\r\n\r\n  const handleCameraModalOpen = async () => {\r\n    handleMenuItemClick();\r\n    setModalCameraOpen(true);\r\n  };\r\n\r\n  const handleCancelSelection = () => {\r\n    setMediasUpload([]);\r\n    setShowModalMedias(false);\r\n  };\r\n\r\n  const renderReplyingMessage = (message) => {\r\n    return (\r\n      <div className={classes.replyginMsgWrapper}>\r\n        <div className={classes.replyginMsgContainer}>\r\n          <span\r\n            className={clsx(classes.replyginContactMsgSideColor, {\r\n              [classes.replyginSelfMsgSideColor]: !message.fromMe,\r\n            })}\r\n          ></span>\r\n          {replyingMessage && (\r\n            <div className={classes.replyginMsgBody}>\r\n              {!message.fromMe && (\r\n                <span className={classes.messageContactName}>\r\n                  {message.contact?.name}\r\n                </span>\r\n              )}\r\n              {message.body}\r\n            </div>\r\n          )\r\n          }\r\n        </div>\r\n        <IconButton\r\n          aria-label=\"showRecorder\"\r\n          component=\"span\"\r\n          disabled={disableOption()}\r\n          onClick={() => {\r\n            setReplyingMessage(null);\r\n            setEditingMessage(null);\r\n            setInputMessage(\"\");\r\n          }}\r\n        >\r\n          <Clear className={classes.sendMessageIcons} />\r\n        </IconButton>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (mediasUpload.length > 0) {\r\n    return (\r\n\r\n      <Paper\r\n        elevation={0}\r\n        square\r\n        className={classes.viewMediaInputWrapper}\r\n        onDragEnter={() => setOnDragEnter(true)}\r\n        onDrop={(e) => handleInputDrop(e)}\r\n      >\r\n        {showModalMedias && (\r\n          <MessageUploadMedias\r\n            isOpen={showModalMedias}\r\n            files={mediasUpload}\r\n            onClose={handleCloseModalMedias}\r\n            onSend={handleUploadMedia}\r\n            onCancelSelection={handleCancelSelection}\r\n          />\r\n        )}\r\n\r\n      </Paper>\r\n    )\r\n  }\r\n  else {\r\n    return (\r\n      <>\r\n        {modalCameraOpen && (\r\n          <CameraModal\r\n            isOpen={modalCameraOpen}\r\n            onRequestClose={() => setModalCameraOpen(false)}\r\n            onCapture={handleCapture}\r\n          />\r\n        )}\r\n        {senVcardModalOpen && (\r\n          <ContactSendModal\r\n            modalOpen={senVcardModalOpen}\r\n            onClose={(c) => {\r\n              handleSendContatcMessage(c);\r\n            }}\r\n          />\r\n        )}\r\n        <Paper\r\n          square\r\n          elevation={0}\r\n          className={classes.mainWrapper}\r\n          onDragEnter={() => setOnDragEnter(true)}\r\n          onDrop={(e) => handleInputDrop(e)}\r\n        >\r\n          {(replyingMessage && renderReplyingMessage(replyingMessage)) || (editingMessage && renderReplyingMessage(editingMessage))}\r\n          <div className={classes.newMessageBox}>\r\n            <Hidden only={[\"sm\", \"xs\"]}>\r\n              <IconButton\r\n                aria-label=\"emojiPicker\"\r\n                component=\"span\"\r\n                disabled={disableOption()}\r\n                onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n              >\r\n                <Mood className={classes.sendMessageIcons} />\r\n              </IconButton>\r\n              {showEmoji ? (\r\n                <div className={classes.emojiBox}>\r\n                  <ClickAwayListener onClickAway={(e) => setShowEmoji(true)}>\r\n                    <Picker\r\n                      perLine={16}\r\n                      theme={\"dark\"}\r\n                      i18n={i18n}\r\n                      showPreview={true}\r\n                      showSkinTones={false}\r\n                      onSelect={handleAddEmoji}\r\n                    />\r\n                  </ClickAwayListener>\r\n                </div>\r\n              ) : null}\r\n\r\n              <Fab\r\n                disabled={disableOption()}\r\n                aria-label=\"uploadMedias\"\r\n                component=\"span\"\r\n                className={classes.invertedFabMenu}\r\n                onClick={handleOpenMenuClick}\r\n              >\r\n                <AddIcon />\r\n              </Fab>\r\n              <Menu\r\n                anchorEl={anchorEl}\r\n                keepMounted\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleMenuItemClick}\r\n                id=\"simple-menu\"\r\n              >\r\n                <MenuItem onClick={handleMenuItemClick}>\r\n                  <input\r\n                    multiple\r\n                    type=\"file\"\r\n                    id=\"upload-img-button\"\r\n                    accept=\"image/*, video/*, audio/* \"\r\n                    // disabled={disableOption()}\r\n                    className={classes.uploadInput}\r\n                    onChange={handleChangeMedias}\r\n                  />\r\n                  <label htmlFor=\"upload-img-button\">\r\n                    <Fab\r\n                      aria-label=\"upload-img\"\r\n                      component=\"span\"\r\n                      className={classes.invertedFabMenuMP}\r\n                    >\r\n                      <PermMedia />\r\n                    </Fab>\r\n                    {i18n.t(\"messageInput.type.imageVideo\")}\r\n                  </label>\r\n                </MenuItem>\r\n                <MenuItem onClick={handleCameraModalOpen}>\r\n                  <Fab className={classes.invertedFabMenuCamera}>\r\n                    <CameraAlt />\r\n                  </Fab>\r\n                  {i18n.t(\"messageInput.type.cam\")}\r\n                </MenuItem>\r\n                <MenuItem onClick={handleMenuItemClick}>\r\n                  <input\r\n                    multiple\r\n                    type=\"file\"\r\n                    id=\"upload-doc-button\"\r\n                    accept=\"application/*, text/*\"\r\n                    // disabled={disableOption()}\r\n                    className={classes.uploadInput}\r\n                    onChange={handleChangeMedias}\r\n                  />\r\n                  <label htmlFor=\"upload-doc-button\">\r\n                    <Fab aria-label=\"upload-img\"\r\n                      component=\"span\" className={classes.invertedFabMenuDoc}>\r\n                      <Description />\r\n                    </Fab>\r\n                    Documento\r\n                  </label>\r\n                </MenuItem>\r\n                <MenuItem onClick={handleSendContactModalOpen}>\r\n                  <Fab className={classes.invertedFabMenuCont}>\r\n                    <Person />\r\n                  </Fab>\r\n                  {i18n.t(\"messageInput.type.contact\")}\r\n                </MenuItem>\r\n                <MenuItem onClick={handleSendLinkVideo}>\r\n                  <Fab className={classes.invertedFabMenuMeet}>\r\n                    <Duo />\r\n                  </Fab>\r\n                  {i18n.t(\"messageInput.type.meet\")}\r\n                </MenuItem>\r\n              </Menu>\r\n              {/* <IconButton\r\n\t\t\t\t  aria-label=\"upload\"\r\n\t\t\t\t  component=\"span\"\r\n\t\t\t\t  disabled={disableOption()}\r\n\t\t\t\t  onMouseOver={() => setOnDragEnter(true)}\r\n\t\t\t\t>\r\n\t\t\t\t  <AttachFile className={classes.sendMessageIcons} />\r\n\t\t\t\t</IconButton> */}\r\n\r\n              {/* </label> */}\r\n              {signMessagePar && (\r\n                <Tooltip title={i18n.t(\"messageInput.tooltip.signature\")}>\r\n                  <IconButton\r\n                    aria-label=\"send-upload\"\r\n                    component=\"span\"\r\n                    onClick={handleChangeSign}\r\n                  >\r\n                    {signMessage === true ? (\r\n                      <Create style={{ color: theme.mode === \"light\" ? theme.palette.primary.main : \"#EEE\" }} />\r\n                    ) : (\r\n                      <Create style={{ color: \"grey\" }} />\r\n                    )}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              )}\r\n              <Tooltip title={i18n.t(\"messageInput.tooltip.privateMessage\")}>\r\n                <IconButton\r\n                  aria-label=\"send-upload\"\r\n                  component=\"span\"\r\n                  onClick={handlePrivateMessage}\r\n                >\r\n                  {privateMessage === true ? (\r\n                    <Comment style={{ color: theme.mode === \"light\" ? theme.palette.primary.main : \"#EEE\" }} />\r\n                  ) : (\r\n                    <Comment style={{ color: \"grey\" }} />\r\n                  )}\r\n                </IconButton>\r\n              </Tooltip>\r\n              {/* <Tooltip title={i18n.t(\"messageInput.tooltip.meet\")}>\r\n                <IconButton\r\n                  aria-label=\"send-upload\"\r\n                  component=\"span\"\r\n                  onClick={handleSendLinkVideo}\r\n                >\r\n                  <Duo style={{ color: \"grey\" }} />\r\n                </IconButton>\r\n              </Tooltip> */}\r\n            </Hidden>\r\n            <Hidden only={[\"md\", \"lg\", \"xl\"]}>\r\n              <IconButton\r\n                aria-controls=\"simple-menu\"\r\n                aria-haspopup=\"true\"\r\n                onClick={handleOpenMenuClick}\r\n              >\r\n                <MoreVert></MoreVert>\r\n              </IconButton>\r\n              <Menu\r\n                id=\"simple-menu\"\r\n                keepMounted\r\n                anchorEl={anchorEl}\r\n                open={Boolean(anchorEl)}\r\n                onClose={handleMenuItemClick}\r\n              >\r\n                <MenuItem onClick={handleMenuItemClick}>\r\n                  <IconButton\r\n                    aria-label=\"emojiPicker\"\r\n                    component=\"span\"\r\n                    disabled={disableOption()}\r\n                    onClick={(e) => setShowEmoji((prevState) => !prevState)}\r\n                  >\r\n                    <Mood className={classes.sendMessageIcons} />\r\n                  </IconButton>\r\n                </MenuItem>\r\n                <MenuItem onClick={handleMenuItemClick}>\r\n                  <input\r\n                    multiple\r\n                    type=\"file\"\r\n                    id=\"upload-button\"\r\n                    disabled={disableOption()}\r\n                    className={classes.uploadInput}\r\n                    onChange={handleChangeMedias}\r\n                  />\r\n                  <label htmlFor=\"upload-button\">\r\n                    <IconButton\r\n                      aria-label=\"upload\"\r\n                      component=\"span\"\r\n                      disabled={disableOption()}\r\n                    >\r\n                      <AttachFile className={classes.sendMessageIcons} />\r\n                    </IconButton>\r\n                  </label>\r\n                </MenuItem>\r\n                {signMessagePar && (\r\n                  <Tooltip title=\"Habilitar/Desabilitar Assinatura\">\r\n                    <IconButton\r\n                      aria-label=\"send-upload\"\r\n                      component=\"span\"\r\n                      onClick={handleChangeSign}\r\n                    >\r\n                      {signMessage === true ? (\r\n                        <Create style={{ color: theme.mode === \"light\" ? theme.palette.primary.main : \"#EEE\" }} />\r\n                      ) : (\r\n                        <Create style={{ color: \"grey\" }} />\r\n                      )}\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n                <Tooltip title=\"Habilitar/Desabilitar Comentários\">\r\n                  <IconButton\r\n                    aria-label=\"send-upload\"\r\n                    component=\"span\"\r\n                    onClick={handlePrivateMessage}\r\n                  >\r\n                    {privateMessage === true ? (\r\n                      <Comment style={{ color: theme.mode === \"light\" ? theme.palette.primary.main : \"#EEE\" }} />\r\n                    ) : (\r\n                      <Comment style={{ color: \"grey\" }} />\r\n                    )}\r\n                  </IconButton>\r\n                </Tooltip>\r\n              </Menu>\r\n            </Hidden>\r\n            <div className={classes.flexContainer}>\r\n              {privateMessageInputVisible && (\r\n                <div className={classes.flexItem}>\r\n                  <div className={classes.messageInputWrapperPrivate}>\r\n                    <InputBase\r\n                      inputRef={(input) => {\r\n                        input && input.focus();\r\n                        input && (inputRef.current = input);\r\n                      }}\r\n                      className={classes.messageInputPrivate}\r\n                      placeholder={\r\n                        ticketStatus === \"open\" || ticketStatus === \"group\"\r\n                          ? i18n.t(\"messagesInput.placeholderPrivateMessage\")\r\n                          : i18n.t(\"messagesInput.placeholderClosed\")\r\n                      }\r\n                      multiline\r\n                      maxRows={5}\r\n                      value={inputMessage}\r\n                      onChange={handleChangeInput}\r\n                      disabled={disableOption()}\r\n                      onPaste={(e) => {\r\n                        (ticketStatus === \"open\" || ticketStatus === \"group\") &&\r\n                          handleInputPaste(e);\r\n                      }}\r\n                      onKeyPress={(e) => {\r\n                        if (loading || e.shiftKey) return;\r\n                        else if (e.key === \"Enter\") {\r\n                          handleSendMessage();\r\n                        }\r\n                      }}\r\n\r\n                    />\r\n                    {typeBar ? (\r\n                      <ul className={classes.messageQuickAnswersWrapper}>\r\n                        {typeBar.map((value, index) => {\r\n                          return (\r\n                            <li\r\n                              className={classes.messageQuickAnswersWrapperItem}\r\n                              key={index}\r\n                            >\r\n                              {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\r\n                              <a onClick={() => handleQuickAnswersClick(value)}>\r\n                                {`${value.label} - ${value.value}`}\r\n                              </a>\r\n                            </li>\r\n                          );\r\n                        })}\r\n                      </ul>\r\n                    ) : (\r\n                      <div></div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {!privateMessageInputVisible && (\r\n                <div className={classes.flexItem}>\r\n                  <div className={classes.messageInputWrapper}>\r\n                    <InputBase\r\n                      inputRef={(input) => {\r\n                        input && input.focus();\r\n                        input && (inputRef.current = input);\r\n                      }}\r\n                      className={classes.messageInput}\r\n                      placeholder={placeholderText}\r\n                      multiline\r\n                      maxRows={5}\r\n                      value={inputMessage}\r\n                      onChange={handleChangeInput}\r\n                      disabled={disableOption()}\r\n                      onPaste={(e) => {\r\n                        (ticketStatus === \"open\" || ticketStatus === \"group\") &&\r\n                          handleInputPaste(e);\r\n                      }}\r\n                      onKeyPress={(e) => {\r\n                        if (loading || e.shiftKey) return;\r\n                        else if (e.key === \"Enter\") {\r\n                          handleSendMessage();\r\n                        }\r\n                      }}\r\n                    />\r\n                    {typeBar ? (\r\n                      <ul className={classes.messageQuickAnswersWrapper}>\r\n                        {typeBar.map((value, index) => {\r\n                          return (\r\n                            <li\r\n                              className={classes.messageQuickAnswersWrapperItem}\r\n                              key={index}\r\n                            >\r\n                              {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\r\n                              <a onClick={() => handleQuickAnswersClick(value)}>\r\n                                {`${value.label} - ${value.value}`}\r\n                              </a>\r\n                            </li>\r\n                          );\r\n                        })}\r\n                      </ul>\r\n                    ) : (\r\n                      <div></div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            {!privateMessageInputVisible && (\r\n              <>\r\n                <Tooltip title={i18n.t(\"tickets.buttons.scredule\")}>\r\n                  <IconButton\r\n                    aria-label=\"scheduleMessage\"\r\n                    component=\"span\"\r\n                    onClick={() => setAppointmentModalOpen(true)}\r\n                    disabled={loading}\r\n                  >\r\n                    <Timer className={classes.sendMessageIcons} />\r\n                  </IconButton>\r\n                </Tooltip>\r\n                {inputMessage || showSelectMessageCheckbox ? (\r\n                  <>\r\n                    <IconButton\r\n                      aria-label=\"sendMessage\"\r\n                      component=\"span\"\r\n                      onClick={showSelectMessageCheckbox ? handleOpenModalForward : handleSendMessage}\r\n                      disabled={loading}\r\n                    >\r\n                      {showSelectMessageCheckbox ?\r\n                        <Reply className={classes.ForwardMessageIcons} /> : <Send className={classes.sendMessageIcons} />}\r\n                    </IconButton>\r\n                  </>\r\n                ) : recording ? (\r\n                  <div className={classes.recorderWrapper}>\r\n                    <IconButton\r\n                      aria-label=\"cancelRecording\"\r\n                      component=\"span\"\r\n                      fontSize=\"large\"\r\n                      disabled={loading}\r\n                      onClick={handleCancelAudio}\r\n                    >\r\n                      <HighlightOff className={classes.cancelAudioIcon} />\r\n                    </IconButton>\r\n                    {loading ? (\r\n                      <div>\r\n                        <CircularProgress className={classes.audioLoading} />\r\n                      </div>\r\n                    ) : (\r\n                      <RecordingTimer />\r\n                    )}\r\n\r\n                    <IconButton\r\n                      aria-label=\"sendRecordedAudio\"\r\n                      component=\"span\"\r\n                      onClick={handleUploadAudio}\r\n                      disabled={loading}\r\n                    >\r\n                      <CheckCircleOutline className={classes.sendAudioIcon} />\r\n                    </IconButton>\r\n                  </div>\r\n                ) : (\r\n                  <IconButton\r\n                    aria-label=\"showRecorder\"\r\n                    component=\"span\"\r\n                    disabled={disableOption()}\r\n                    onClick={handleStartRecording}\r\n                  >\r\n                    <Mic className={classes.sendMessageIcons} />\r\n                  </IconButton>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {privateMessageInputVisible && (\r\n              <>\r\n                <IconButton\r\n                  aria-label=\"sendMessage\"\r\n                  component=\"span\"\r\n                  onClick={showSelectMessageCheckbox ? handleOpenModalForward : handleSendMessage}\r\n                  disabled={loading}\r\n                >\r\n                  {showSelectMessageCheckbox ?\r\n                    <Reply className={classes.ForwardMessageIcons} /> : <Send className={classes.sendMessageIcons} />}\r\n                </IconButton>\r\n              </>\r\n            )}\r\n            {appointmentModalOpen && (\r\n              <ScheduleModal\r\n                open={appointmentModalOpen}\r\n                onClose={() => setAppointmentModalOpen(false)}\r\n                message={inputMessage}\r\n                contactId={contactId}\r\n              />\r\n            )}\r\n          </div>\r\n        </Paper>\r\n      </>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MessageInput;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}