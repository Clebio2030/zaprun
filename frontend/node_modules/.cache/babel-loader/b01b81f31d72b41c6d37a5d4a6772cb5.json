{"ast":null,"code":"import{Chip,Paper,Select,MenuItem,Grid,InputLabel,FormControl}from\"@material-ui/core\";import React,{useEffect,useRef,useState}from\"react\";import{isString}from\"lodash\";import toastError from\"../../errors/toastError\";import api from\"../../services/api\";import{toast}from\"react-toastify\";import{makeStyles}from\"@material-ui/core/styles\";import{i18n}from\"../../translate/i18n\";import{Field,Form}from\"formik\";const useStyles=makeStyles(theme=>({menuListItem:{paddingTop:0,paddingBottom:0,border:\"none\"},menuItem:{maxHeight:30},chips:{display:\"flex\",flexWrap:\"wrap\"},chip:{margin:2}}));export function TagsKanbanContainer(_ref){let{ticket}=_ref;const classes=useStyles();const[tags,setTags]=useState([]);const[selected,setSelected]=useState(\"\");// Alterado de null para \"\"\nuseEffect(()=>{let isMounted=true;loadTags(isMounted).then(()=>{if(ticket.tags&&ticket.tags.length>0){setSelected(ticket.tags[0].id);// Alterado para pegar o ID da primeira tag, se existir\n}});return()=>{isMounted=false;};},[ticket.tags]);const loadTags=async isMounted=>{try{const{data}=await api.get(\"/tags/list\",{params:{kanban:1}});if(isMounted){setTags(data);}}catch(err){toastError(err);}};const onChange=async e=>{const value=e.target.value;if(ticket.tags.length>0){await api.delete(\"/ticket-tags/\".concat(ticket.id));// toast.success('Ticket Tag Removido!');\n}if(value!==null){await api.put(\"/ticket-tags/\".concat(ticket.id,\"/\").concat(value));// toast.success('Ticket Tag Adicionado com Sucesso!');\n}setSelected(value);// Adicione sua lógica de manipulação de tags aqui\n};const renderSelectedValue=()=>{const selectedTag=tags.find(tag=>tag.id===selected);if(!selectedTag)return null;return/*#__PURE__*/React.createElement(Chip,{style:{backgroundColor:selectedTag.color,color:\"#FFF\",marginRight:1,padding:1,fontWeight:'bold',paddingLeft:5,paddingRight:5,borderRadius:3,fontSize:\"0.8em\",whiteSpace:\"nowrap\"},label:selectedTag.name,size:\"small\"});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormControl,{fullWidth:true,margin:\"dense\",variant:\"outlined\"},/*#__PURE__*/React.createElement(InputLabel,{id:\"tag-kanban-id\"},i18n.t(\"Etapa Kanban\")),/*#__PURE__*/React.createElement(Select,{labelWidth:60,value:selected,labelId:\"tag-kanban-id\",label:i18n.t(\"Etapa Kanban\"),onChange:onChange,MenuProps:{anchorOrigin:{vertical:\"bottom\",horizontal:\"left\"},transformOrigin:{vertical:\"top\",horizontal:\"left\"},getContentAnchorEl:null},renderValue:renderSelectedValue},/*#__PURE__*/React.createElement(MenuItem,{value:null},\"\\xA0\"),tags.map(tag=>/*#__PURE__*/React.createElement(MenuItem,{key:tag.id,value:tag.id},tag.name)))));}","map":{"version":3,"names":["Chip","Paper","Select","MenuItem","Grid","InputLabel","FormControl","React","useEffect","useRef","useState","isString","toastError","api","toast","makeStyles","i18n","Field","Form","useStyles","theme","menuListItem","paddingTop","paddingBottom","border","menuItem","maxHeight","chips","display","flexWrap","chip","margin","TagsKanbanContainer","_ref","ticket","classes","tags","setTags","selected","setSelected","isMounted","loadTags","then","length","id","data","get","params","kanban","err","onChange","e","value","target","delete","concat","put","renderSelectedValue","selectedTag","find","tag","createElement","style","backgroundColor","color","marginRight","padding","fontWeight","paddingLeft","paddingRight","borderRadius","fontSize","whiteSpace","label","name","size","Fragment","fullWidth","variant","t","labelWidth","labelId","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","renderValue","map","key"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/TagsKanbanContainer/index.js"],"sourcesContent":["import { Chip, Paper, Select, MenuItem, Grid, InputLabel, FormControl } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { isString } from \"lodash\";\nimport toastError from \"../../errors/toastError\";\nimport api from \"../../services/api\";\nimport { toast } from \"react-toastify\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { i18n } from \"../../translate/i18n\";\nimport { Field, Form } from \"formik\";\nconst useStyles = makeStyles((theme) => ({\n    menuListItem: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        border: \"none\",\n    },\n    menuItem: {\n        maxHeight: 30,\n    },\n\n    chips: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n    },\n    chip: {\n        margin: 2,\n    },\n}));\nexport function TagsKanbanContainer({ ticket }) {\n    const classes = useStyles();\n\n    const [tags, setTags] = useState([]);\n    const [selected, setSelected] = useState(\"\"); // Alterado de null para \"\"\n\n    useEffect(() => {\n        let isMounted = true;\n        loadTags(isMounted).then(() => {\n            if (ticket.tags && ticket.tags.length > 0) {\n                setSelected(ticket.tags[0].id); // Alterado para pegar o ID da primeira tag, se existir\n            }\n        });\n\n        return () => {\n            isMounted = false;\n        };\n    }, [ticket.tags]);\n\n    const loadTags = async (isMounted) => {\n        try {\n            const { data } = await api.get(`/tags/list`, { params: { kanban: 1 } });\n            if (isMounted) {\n                setTags(data);\n            }\n        } catch (err) {\n            toastError(err);\n        }\n    }\n\n    const onChange = async (e) => {\n        const value = e.target.value;\n        if (ticket.tags.length > 0) {\n            await api.delete(`/ticket-tags/${ticket.id}`);\n            // toast.success('Ticket Tag Removido!');\n        }\n        if (value !== null) {\n            await api.put(`/ticket-tags/${ticket.id}/${value}`);\n            // toast.success('Ticket Tag Adicionado com Sucesso!');\n        }\n        setSelected(value);\n        // Adicione sua lógica de manipulação de tags aqui\n    }\n\n    const renderSelectedValue = () => {\n        const selectedTag = tags.find(tag => tag.id === selected);\n        if (!selectedTag) return null;\n\n        return (\n            <Chip\n                style={{\n                    backgroundColor: selectedTag.color,\n                    color: \"#FFF\",\n                    marginRight: 1,\n                    padding: 1,\n                    fontWeight: 'bold',\n                    paddingLeft: 5,\n                    paddingRight: 5,\n                    borderRadius: 3,\n                    fontSize: \"0.8em\",\n                    whiteSpace: \"nowrap\"\n                }}\n                label={selectedTag.name}\n                size=\"small\"\n            />\n        );\n    };\n\n    return (\n        <>\n            <FormControl fullWidth margin=\"dense\" variant=\"outlined\">\n                <InputLabel id=\"tag-kanban-id\">{i18n.t(\"Etapa Kanban\")}</InputLabel>\n                <Select\n                    labelWidth={60}\n                    value={selected}\n                    labelId=\"tag-kanban-id\"\n                    label={i18n.t(\"Etapa Kanban\")}\n                    onChange={onChange}\n                    MenuProps={{\n                        anchorOrigin: {\n                            vertical: \"bottom\",\n                            horizontal: \"left\",\n                        },\n                        transformOrigin: {\n                            vertical: \"top\",\n                            horizontal: \"left\",\n                        },\n                        getContentAnchorEl: null,\n                    }}\n                    renderValue={renderSelectedValue}\n                >\n                    <MenuItem value={null}>&nbsp;</MenuItem>\n                    {tags.map(tag => (\n                        <MenuItem key={tag.id} value={tag.id}>\n                            {tag.name}\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n        </>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}