{"ast":null,"code":"import React,{useState,useEffect,useReducer,useContext}from\"react\";import{toast}from\"react-toastify\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport n8n from\"../../assets/n8n.png\";import dialogflow from\"../../assets/dialogflow.png\";import webhooks from\"../../assets/webhook.png\";import typebot from\"../../assets/typebot.jpg\";import flowbuilder from\"../../assets/flowbuilders.png\";import{makeStyles}from\"@material-ui/core/styles\";import{Avatar,Button,IconButton,InputAdornment,Paper,Table,TableBody,TableCell,TableHead,TableRow,TextField,Tooltip}from\"@material-ui/core\";import{DeleteOutline,Edit}from\"@material-ui/icons\";import SearchIcon from\"@material-ui/icons/Search\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import IntegrationModal from\"../../components/QueueIntegrationModal\";import ConfirmationModal from\"../../components/ConfirmationModal\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import usePlans from\"../../hooks/usePlans\";import{useHistory}from\"react-router-dom/cjs/react-router-dom.min\";import ForbiddenPage from\"../../components/ForbiddenPage\";const reducer=(state,action)=>{if(action.type===\"LOAD_INTEGRATIONS\"){const queueIntegration=action.payload;const newIntegrations=[];queueIntegration.forEach(integration=>{const integrationIndex=state.findIndex(u=>u.id===integration.id);if(integrationIndex!==-1){state[integrationIndex]=integration;}else{newIntegrations.push(integration);}});return[...state,...newIntegrations];}if(action.type===\"UPDATE_INTEGRATIONS\"){const queueIntegration=action.payload;const integrationIndex=state.findIndex(u=>u.id===queueIntegration.id);if(integrationIndex!==-1){state[integrationIndex]=queueIntegration;return[...state];}else{return[queueIntegration,...state];}}if(action.type===\"DELETE_INTEGRATION\"){const integrationId=action.payload;const integrationIndex=state.findIndex(u=>u.id===integrationId);if(integrationIndex!==-1){state.splice(integrationIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};const useStyles=makeStyles(theme=>({mainPaper:{flex:1,padding:theme.spacing(2),margin:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles},avatar:{width:\"140px\",height:\"40px\",borderRadius:4}}));const QueueIntegration=()=>{const classes=useStyles();const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[selectedIntegration,setSelectedIntegration]=useState(null);const[deletingUser,setDeletingUser]=useState(null);const[userModalOpen,setUserModalOpen]=useState(false);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const[searchParam,setSearchParam]=useState(\"\");const[queueIntegration,dispatch]=useReducer(reducer,[]);//   const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);const{getPlanCompany}=usePlans();const companyId=user.companyId;const history=useHistory();useEffect(()=>{async function fetchData(){const planConfigs=await getPlanCompany(undefined,companyId);if(!planConfigs.plan.useIntegrations){toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");setTimeout(()=>{history.push(\"/\");},1000);}}fetchData();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchIntegrations=async()=>{try{const{data}=await api.get(\"/queueIntegration/\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_INTEGRATIONS\",payload:data.queueIntegrations});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}};fetchIntegrations();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam,pageNumber]);useEffect(()=>{// const socket = socketManager.GetSocket();\nconst onQueueEvent=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_INTEGRATIONS\",payload:data.queueIntegration});}if(data.action===\"delete\"){dispatch({type:\"DELETE_INTEGRATION\",payload:+data.integrationId});}};socket.on(\"company-\".concat(companyId,\"-queueIntegration\"),onQueueEvent);return()=>{socket.off(\"company-\".concat(companyId,\"-queueIntegration\"),onQueueEvent);};},[]);const handleOpenUserModal=()=>{setSelectedIntegration(null);setUserModalOpen(true);};const handleCloseIntegrationModal=()=>{setSelectedIntegration(null);setUserModalOpen(false);};const handleSearch=event=>{setSearchParam(event.target.value.toLowerCase());};const handleEditIntegration=queueIntegration=>{setSelectedIntegration(queueIntegration);setUserModalOpen(true);};const handleDeleteIntegration=async integrationId=>{try{await api.delete(\"/queueIntegration/\".concat(integrationId));toast.success(i18n.t(\"queueIntegration.toasts.deleted\"));}catch(err){toastError(err);}setDeletingUser(null);setSearchParam(\"\");setPageNumber(1);};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};return/*#__PURE__*/React.createElement(MainContainer,null,/*#__PURE__*/React.createElement(ConfirmationModal,{title:deletingUser&&\"\".concat(i18n.t(\"queueIntegration.confirmationModal.deleteTitle\"),\" \").concat(deletingUser.name,\"?\"),open:confirmModalOpen,onClose:setConfirmModalOpen,onConfirm:()=>handleDeleteIntegration(deletingUser.id)},i18n.t(\"queueIntegration.confirmationModal.deleteMessage\")),/*#__PURE__*/React.createElement(IntegrationModal,{open:userModalOpen,onClose:handleCloseIntegrationModal,\"aria-labelledby\":\"form-dialog-title\",integrationId:selectedIntegration&&selectedIntegration.id}),user.profile===\"user\"?/*#__PURE__*/React.createElement(ForbiddenPage,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,i18n.t(\"queueIntegration.title\"),\" (\",queueIntegration.length,\")\"),/*#__PURE__*/React.createElement(MainHeaderButtonsWrapper,null,/*#__PURE__*/React.createElement(TextField,{placeholder:i18n.t(\"queueIntegration.searchPlaceholder\"),type:\"search\",value:searchParam,onChange:handleSearch,InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(SearchIcon,{color:\"secondary\"}))}}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenUserModal},i18n.t(\"queueIntegration.buttons.add\")))),/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll},/*#__PURE__*/React.createElement(Table,{size:\"small\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{padding:\"checkbox\"}),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"queueIntegration.table.id\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"queueIntegration.table.name\")))),/*#__PURE__*/React.createElement(TableBody,null,/*#__PURE__*/React.createElement(React.Fragment,null,queueIntegration.map(integration=>/*#__PURE__*/React.createElement(TableRow,{key:integration.id},/*#__PURE__*/React.createElement(TableCell,null,integration.type===\"dialogflow\"&&/*#__PURE__*/React.createElement(Avatar,{src:dialogflow,className:classes.avatar}),integration.type===\"n8n\"&&/*#__PURE__*/React.createElement(Avatar,{src:n8n,className:classes.avatar}),integration.type===\"webhook\"&&/*#__PURE__*/React.createElement(Avatar,{src:webhooks,className:classes.avatar}),integration.type===\"typebot\"&&/*#__PURE__*/React.createElement(Avatar,{src:typebot,className:classes.avatar}),integration.type===\"flowbuilder\"&&/*#__PURE__*/React.createElement(Avatar,{src:flowbuilder,className:classes.avatar})),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},integration.id),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},integration.name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:()=>handleEditIntegration(integration)},/*#__PURE__*/React.createElement(Edit,{color:\"secondary\"})),/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:e=>{setConfirmModalOpen(true);setDeletingUser(integration);}},/*#__PURE__*/React.createElement(DeleteOutline,{color:\"secondary\"}))))),loading&&/*#__PURE__*/React.createElement(TableRowSkeleton,{columns:7})))))));};export default QueueIntegration;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","toast","n8n","dialogflow","webhooks","typebot","flowbuilder","makeStyles","Avatar","Button","IconButton","InputAdornment","Paper","Table","TableBody","TableCell","TableHead","TableRow","TextField","Tooltip","DeleteOutline","Edit","SearchIcon","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","TableRowSkeleton","IntegrationModal","ConfirmationModal","api","i18n","toastError","AuthContext","usePlans","useHistory","ForbiddenPage","reducer","state","action","type","queueIntegration","payload","newIntegrations","forEach","integration","integrationIndex","findIndex","u","id","push","integrationId","splice","useStyles","theme","mainPaper","flex","padding","spacing","margin","overflowY","scrollbarStyles","avatar","width","height","borderRadius","QueueIntegration","classes","loading","setLoading","pageNumber","setPageNumber","hasMore","setHasMore","selectedIntegration","setSelectedIntegration","deletingUser","setDeletingUser","userModalOpen","setUserModalOpen","confirmModalOpen","setConfirmModalOpen","searchParam","setSearchParam","dispatch","user","socket","getPlanCompany","companyId","history","fetchData","planConfigs","undefined","plan","useIntegrations","error","setTimeout","delayDebounceFn","fetchIntegrations","data","get","params","queueIntegrations","err","clearTimeout","onQueueEvent","on","concat","off","handleOpenUserModal","handleCloseIntegrationModal","handleSearch","event","target","value","toLowerCase","handleEditIntegration","handleDeleteIntegration","delete","success","t","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","createElement","title","name","open","onClose","onConfirm","profile","Fragment","length","placeholder","onChange","InputProps","startAdornment","position","color","variant","onClick","className","onScroll","size","align","map","key","src","columns"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/QueueIntegration/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport n8n from \"../../assets/n8n.png\";\nimport dialogflow from \"../../assets/dialogflow.png\";\nimport webhooks from \"../../assets/webhook.png\";\nimport typebot from \"../../assets/typebot.jpg\";\nimport flowbuilder from \"../../assets/flowbuilders.png\"\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport {\n  Avatar,\n  Button,\n  IconButton,\n  InputAdornment,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  TextField,\n  Tooltip\n} from \"@material-ui/core\";\n\nimport {\n  DeleteOutline,\n  Edit\n} from \"@material-ui/icons\";\n\nimport SearchIcon from \"@material-ui/icons/Search\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\nimport Title from \"../../components/Title\";\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\nimport IntegrationModal from \"../../components/QueueIntegrationModal\";\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\n\nimport api from \"../../services/api\";\nimport { i18n } from \"../../translate/i18n\";\nimport toastError from \"../../errors/toastError\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport usePlans from \"../../hooks/usePlans\";\nimport { useHistory } from \"react-router-dom/cjs/react-router-dom.min\";\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\n\nconst reducer = (state, action) => {\n  if (action.type === \"LOAD_INTEGRATIONS\") {\n    const queueIntegration = action.payload;\n    const newIntegrations = [];\n\n    queueIntegration.forEach((integration) => {\n      const integrationIndex = state.findIndex((u) => u.id === integration.id);\n      if (integrationIndex !== -1) {\n        state[integrationIndex] = integration;\n      } else {\n        newIntegrations.push(integration);\n      }\n    });\n\n    return [...state, ...newIntegrations];\n  }\n\n  if (action.type === \"UPDATE_INTEGRATIONS\") {\n    const queueIntegration = action.payload;\n    const integrationIndex = state.findIndex((u) => u.id === queueIntegration.id);\n\n    if (integrationIndex !== -1) {\n      state[integrationIndex] = queueIntegration;\n      return [...state];\n    } else {\n      return [queueIntegration, ...state];\n    }\n  }\n\n  if (action.type === \"DELETE_INTEGRATION\") {\n    const integrationId = action.payload;\n\n    const integrationIndex = state.findIndex((u) => u.id === integrationId);\n    if (integrationIndex !== -1) {\n      state.splice(integrationIndex, 1);\n    }\n    return [...state];\n  }\n\n  if (action.type === \"RESET\") {\n    return [];\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    margin: theme.spacing(1),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  avatar: {\n    width: \"140px\",\n    height: \"40px\",\n    borderRadius: 4\n  },\n}));\n\nconst QueueIntegration = () => {\n  const classes = useStyles();\n\n  const [loading, setLoading] = useState(false);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [hasMore, setHasMore] = useState(false);\n  const [selectedIntegration, setSelectedIntegration] = useState(null);\n  const [deletingUser, setDeletingUser] = useState(null);\n  const [userModalOpen, setUserModalOpen] = useState(false);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [searchParam, setSearchParam] = useState(\"\");\n  const [queueIntegration, dispatch] = useReducer(reducer, []);\n  //   const socketManager = useContext(SocketContext);\n  const { user, socket } = useContext(AuthContext);\n\n  const { getPlanCompany } = usePlans();\n  const companyId = user.companyId;\n  const history = useHistory();\n\n  useEffect(() => {\n    async function fetchData() {\n      const planConfigs = await getPlanCompany(undefined, companyId);\n      if (!planConfigs.plan.useIntegrations) {\n        toast.error(\"Esta empresa não possui permissão para acessar essa página! Estamos lhe redirecionando.\");\n        setTimeout(() => {\n          history.push(`/`)\n        }, 1000);\n      }\n    }\n    fetchData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    dispatch({ type: \"RESET\" });\n    setPageNumber(1);\n  }, [searchParam]);\n\n  useEffect(() => {\n    setLoading(true);\n    const delayDebounceFn = setTimeout(() => {\n      const fetchIntegrations = async () => {\n        try {\n          const { data } = await api.get(\"/queueIntegration/\", {\n            params: { searchParam, pageNumber },\n          });\n          dispatch({ type: \"LOAD_INTEGRATIONS\", payload: data.queueIntegrations });\n          setHasMore(data.hasMore);\n          setLoading(false);\n        } catch (err) {\n          toastError(err);\n        }\n      };\n      fetchIntegrations();\n    }, 500);\n    return () => clearTimeout(delayDebounceFn);\n  }, [searchParam, pageNumber]);\n\n  useEffect(() => {\n    // const socket = socketManager.GetSocket();\n\n    const onQueueEvent = (data) => {\n      if (data.action === \"update\" || data.action === \"create\") {\n        dispatch({ type: \"UPDATE_INTEGRATIONS\", payload: data.queueIntegration });\n      }\n\n      if (data.action === \"delete\") {\n        dispatch({ type: \"DELETE_INTEGRATION\", payload: +data.integrationId });\n      }\n    };\n\n    socket.on(`company-${companyId}-queueIntegration`, onQueueEvent);\n    return () => {\n      socket.off(`company-${companyId}-queueIntegration`, onQueueEvent);\n    };\n  }, []);\n\n  const handleOpenUserModal = () => {\n    setSelectedIntegration(null);\n    setUserModalOpen(true);\n  };\n\n  const handleCloseIntegrationModal = () => {\n    setSelectedIntegration(null);\n    setUserModalOpen(false);\n  };\n\n  const handleSearch = (event) => {\n    setSearchParam(event.target.value.toLowerCase());\n  };\n\n  const handleEditIntegration = (queueIntegration) => {\n    setSelectedIntegration(queueIntegration);\n    setUserModalOpen(true);\n  };\n\n  const handleDeleteIntegration = async (integrationId) => {\n    try {\n      await api.delete(`/queueIntegration/${integrationId}`);\n      toast.success(i18n.t(\"queueIntegration.toasts.deleted\"));\n    } catch (err) {\n      toastError(err);\n    }\n    setDeletingUser(null);\n    setSearchParam(\"\");\n    setPageNumber(1);\n  };\n\n  const loadMore = () => {\n    setPageNumber((prevState) => prevState + 1);\n  };\n\n  const handleScroll = (e) => {\n    if (!hasMore || loading) return;\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\n      loadMore();\n    }\n  };\n\n  return (\n    <MainContainer>\n      <ConfirmationModal\n        title={\n          deletingUser &&\n          `${i18n.t(\"queueIntegration.confirmationModal.deleteTitle\")} ${deletingUser.name\n          }?`\n        }\n        open={confirmModalOpen}\n        onClose={setConfirmModalOpen}\n        onConfirm={() => handleDeleteIntegration(deletingUser.id)}\n      >\n        {i18n.t(\"queueIntegration.confirmationModal.deleteMessage\")}\n      </ConfirmationModal>\n      <IntegrationModal\n        open={userModalOpen}\n        onClose={handleCloseIntegrationModal}\n        aria-labelledby=\"form-dialog-title\"\n        integrationId={selectedIntegration && selectedIntegration.id}\n      />\n      {user.profile === \"user\" ?\n        <ForbiddenPage />\n        :\n        <>\n          <MainHeader>\n            <Title>{i18n.t(\"queueIntegration.title\")} ({queueIntegration.length})</Title>\n            <MainHeaderButtonsWrapper>\n              <TextField\n                placeholder={i18n.t(\"queueIntegration.searchPlaceholder\")}\n                type=\"search\"\n                value={searchParam}\n                onChange={handleSearch}\n                InputProps={{\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon color=\"secondary\" />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleOpenUserModal}\n              >\n                {i18n.t(\"queueIntegration.buttons.add\")}\n              </Button>\n            </MainHeaderButtonsWrapper>\n          </MainHeader>\n          <Paper\n            className={classes.mainPaper}\n            variant=\"outlined\"\n            onScroll={handleScroll}\n          >\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell padding=\"checkbox\"></TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"queueIntegration.table.id\")}</TableCell>\n                  <TableCell align=\"center\">{i18n.t(\"queueIntegration.table.name\")}</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                <>\n                  {queueIntegration.map((integration) => (\n                    <TableRow key={integration.id}>\n                      <TableCell >\n                        {integration.type === \"dialogflow\" && (<Avatar\n                          src={dialogflow} className={classes.avatar} />)}\n                        {integration.type === \"n8n\" && (<Avatar\n                          src={n8n} className={classes.avatar} />)}\n                        {integration.type === \"webhook\" && (<Avatar\n                          src={webhooks} className={classes.avatar} />)}\n                        {integration.type === \"typebot\" && (<Avatar\n                          src={typebot} className={classes.avatar} />)}\n                          {integration.type === \"flowbuilder\" && (<Avatar\n                          src={flowbuilder} className={classes.avatar} />)}\n                      </TableCell>\n\n                      <TableCell align=\"center\">{integration.id}</TableCell>\n                      <TableCell align=\"center\">{integration.name}</TableCell>\n                      <TableCell align=\"center\">\n                        <IconButton\n                          size=\"small\"\n                          onClick={() => handleEditIntegration(integration)}\n                        >\n                          <Edit color=\"secondary\" />\n                        </IconButton>\n\n                        <IconButton\n                          size=\"small\"\n                          onClick={(e) => {\n                            setConfirmModalOpen(true);\n                            setDeletingUser(integration);\n                          }}\n                        >\n                          <DeleteOutline color=\"secondary\" />\n                        </IconButton>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                  {loading && <TableRowSkeleton columns={7} />}\n                </>\n              </TableBody>\n            </Table>\n          </Paper>\n        </>}\n    </MainContainer>\n  );\n};\n\nexport default QueueIntegration;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,CAAEC,UAAU,KAAQ,OAAO,CAC1E,OAASC,KAAK,KAAQ,gBAAgB,CACtC;AACA,MAAO,CAAAC,GAAG,KAAM,sBAAsB,CACtC,MAAO,CAAAC,UAAU,KAAM,6BAA6B,CACpD,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAC/C,MAAO,CAAAC,OAAO,KAAM,0BAA0B,CAC9C,MAAO,CAAAC,WAAW,KAAM,+BAA+B,CAEvD,OAASC,UAAU,KAAQ,0BAA0B,CAErD,OACEC,MAAM,CACNC,MAAM,CACNC,UAAU,CACVC,cAAc,CACdC,KAAK,CACLC,KAAK,CACLC,SAAS,CACTC,SAAS,CACTC,SAAS,CACTC,QAAQ,CACRC,SAAS,CACTC,OAAO,KACF,mBAAmB,CAE1B,OACEC,aAAa,CACbC,IAAI,KACC,oBAAoB,CAE3B,MAAO,CAAAC,UAAU,KAAM,2BAA2B,CAElD,MAAO,CAAAC,aAAa,KAAM,gCAAgC,CAC1D,MAAO,CAAAC,UAAU,KAAM,6BAA6B,CACpD,MAAO,CAAAC,wBAAwB,KAAM,2CAA2C,CAChF,MAAO,CAAAC,KAAK,KAAM,wBAAwB,CAC1C,MAAO,CAAAC,gBAAgB,KAAM,mCAAmC,CAChE,MAAO,CAAAC,gBAAgB,KAAM,wCAAwC,CACrE,MAAO,CAAAC,iBAAiB,KAAM,oCAAoC,CAElE,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,OAASC,IAAI,KAAQ,sBAAsB,CAC3C,MAAO,CAAAC,UAAU,KAAM,yBAAyB,CAChD,OAASC,WAAW,KAAQ,gCAAgC,CAC5D,MAAO,CAAAC,QAAQ,KAAM,sBAAsB,CAC3C,OAASC,UAAU,KAAQ,2CAA2C,CACtE,MAAO,CAAAC,aAAa,KAAM,gCAAgC,CAE1D,KAAM,CAAAC,OAAO,CAAGA,CAACC,KAAK,CAAEC,MAAM,GAAK,CACjC,GAAIA,MAAM,CAACC,IAAI,GAAK,mBAAmB,CAAE,CACvC,KAAM,CAAAC,gBAAgB,CAAGF,MAAM,CAACG,OAAO,CACvC,KAAM,CAAAC,eAAe,CAAG,EAAE,CAE1BF,gBAAgB,CAACG,OAAO,CAAEC,WAAW,EAAK,CACxC,KAAM,CAAAC,gBAAgB,CAAGR,KAAK,CAACS,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKJ,WAAW,CAACI,EAAE,CAAC,CACxE,GAAIH,gBAAgB,GAAK,CAAC,CAAC,CAAE,CAC3BR,KAAK,CAACQ,gBAAgB,CAAC,CAAGD,WAAW,CACvC,CAAC,IAAM,CACLF,eAAe,CAACO,IAAI,CAACL,WAAW,CAAC,CACnC,CACF,CAAC,CAAC,CAEF,MAAO,CAAC,GAAGP,KAAK,CAAE,GAAGK,eAAe,CAAC,CACvC,CAEA,GAAIJ,MAAM,CAACC,IAAI,GAAK,qBAAqB,CAAE,CACzC,KAAM,CAAAC,gBAAgB,CAAGF,MAAM,CAACG,OAAO,CACvC,KAAM,CAAAI,gBAAgB,CAAGR,KAAK,CAACS,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKR,gBAAgB,CAACQ,EAAE,CAAC,CAE7E,GAAIH,gBAAgB,GAAK,CAAC,CAAC,CAAE,CAC3BR,KAAK,CAACQ,gBAAgB,CAAC,CAAGL,gBAAgB,CAC1C,MAAO,CAAC,GAAGH,KAAK,CAAC,CACnB,CAAC,IAAM,CACL,MAAO,CAACG,gBAAgB,CAAE,GAAGH,KAAK,CAAC,CACrC,CACF,CAEA,GAAIC,MAAM,CAACC,IAAI,GAAK,oBAAoB,CAAE,CACxC,KAAM,CAAAW,aAAa,CAAGZ,MAAM,CAACG,OAAO,CAEpC,KAAM,CAAAI,gBAAgB,CAAGR,KAAK,CAACS,SAAS,CAAEC,CAAC,EAAKA,CAAC,CAACC,EAAE,GAAKE,aAAa,CAAC,CACvE,GAAIL,gBAAgB,GAAK,CAAC,CAAC,CAAE,CAC3BR,KAAK,CAACc,MAAM,CAACN,gBAAgB,CAAE,CAAC,CAAC,CACnC,CACA,MAAO,CAAC,GAAGR,KAAK,CAAC,CACnB,CAEA,GAAIC,MAAM,CAACC,IAAI,GAAK,OAAO,CAAE,CAC3B,MAAO,EAAE,CACX,CACF,CAAC,CAED,KAAM,CAAAa,SAAS,CAAG9C,UAAU,CAAE+C,KAAK,GAAM,CACvCC,SAAS,CAAE,CACTC,IAAI,CAAE,CAAC,CACPC,OAAO,CAAEH,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CACzBC,MAAM,CAAEL,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CACxBE,SAAS,CAAE,QAAQ,CACnB,GAAGN,KAAK,CAACO,eACX,CAAC,CACDC,MAAM,CAAE,CACNC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,CAChB,CACF,CAAC,CAAC,CAAC,CAEH,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAAC,OAAO,CAAGd,SAAS,CAAC,CAAC,CAE3B,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGxE,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACyE,UAAU,CAAEC,aAAa,CAAC,CAAG1E,QAAQ,CAAC,CAAC,CAAC,CAC/C,KAAM,CAAC2E,OAAO,CAAEC,UAAU,CAAC,CAAG5E,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC6E,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG9E,QAAQ,CAAC,IAAI,CAAC,CACpE,KAAM,CAAC+E,YAAY,CAAEC,eAAe,CAAC,CAAGhF,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACiF,aAAa,CAAEC,gBAAgB,CAAC,CAAGlF,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACmF,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGpF,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACqF,WAAW,CAAEC,cAAc,CAAC,CAAGtF,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAC4C,gBAAgB,CAAE2C,QAAQ,CAAC,CAAGrF,UAAU,CAACsC,OAAO,CAAE,EAAE,CAAC,CAC5D;AACA,KAAM,CAAEgD,IAAI,CAAEC,MAAO,CAAC,CAAGtF,UAAU,CAACiC,WAAW,CAAC,CAEhD,KAAM,CAAEsD,cAAe,CAAC,CAAGrD,QAAQ,CAAC,CAAC,CACrC,KAAM,CAAAsD,SAAS,CAAGH,IAAI,CAACG,SAAS,CAChC,KAAM,CAAAC,OAAO,CAAGtD,UAAU,CAAC,CAAC,CAE5BrC,SAAS,CAAC,IAAM,CACd,cAAe,CAAA4F,SAASA,CAAA,CAAG,CACzB,KAAM,CAAAC,WAAW,CAAG,KAAM,CAAAJ,cAAc,CAACK,SAAS,CAAEJ,SAAS,CAAC,CAC9D,GAAI,CAACG,WAAW,CAACE,IAAI,CAACC,eAAe,CAAE,CACrC7F,KAAK,CAAC8F,KAAK,CAAC,yFAAyF,CAAC,CACtGC,UAAU,CAAC,IAAM,CACfP,OAAO,CAACvC,IAAI,IAAI,CAAC,CACnB,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CACAwC,SAAS,CAAC,CAAC,CACX;AACF,CAAC,CAAE,EAAE,CAAC,CAEN5F,SAAS,CAAC,IAAM,CACdsF,QAAQ,CAAC,CAAE5C,IAAI,CAAE,OAAQ,CAAC,CAAC,CAC3B+B,aAAa,CAAC,CAAC,CAAC,CAClB,CAAC,CAAE,CAACW,WAAW,CAAC,CAAC,CAEjBpF,SAAS,CAAC,IAAM,CACduE,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAA4B,eAAe,CAAGD,UAAU,CAAC,IAAM,CACvC,KAAM,CAAAE,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAEC,IAAK,CAAC,CAAG,KAAM,CAAArE,GAAG,CAACsE,GAAG,CAAC,oBAAoB,CAAE,CACnDC,MAAM,CAAE,CAAEnB,WAAW,CAAEZ,UAAW,CACpC,CAAC,CAAC,CACFc,QAAQ,CAAC,CAAE5C,IAAI,CAAE,mBAAmB,CAAEE,OAAO,CAAEyD,IAAI,CAACG,iBAAkB,CAAC,CAAC,CACxE7B,UAAU,CAAC0B,IAAI,CAAC3B,OAAO,CAAC,CACxBH,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOkC,GAAG,CAAE,CACZvE,UAAU,CAACuE,GAAG,CAAC,CACjB,CACF,CAAC,CACDL,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,GAAG,CAAC,CACP,MAAO,IAAMM,YAAY,CAACP,eAAe,CAAC,CAC5C,CAAC,CAAE,CAACf,WAAW,CAAEZ,UAAU,CAAC,CAAC,CAE7BxE,SAAS,CAAC,IAAM,CACd;AAEA,KAAM,CAAA2G,YAAY,CAAIN,IAAI,EAAK,CAC7B,GAAIA,IAAI,CAAC5D,MAAM,GAAK,QAAQ,EAAI4D,IAAI,CAAC5D,MAAM,GAAK,QAAQ,CAAE,CACxD6C,QAAQ,CAAC,CAAE5C,IAAI,CAAE,qBAAqB,CAAEE,OAAO,CAAEyD,IAAI,CAAC1D,gBAAiB,CAAC,CAAC,CAC3E,CAEA,GAAI0D,IAAI,CAAC5D,MAAM,GAAK,QAAQ,CAAE,CAC5B6C,QAAQ,CAAC,CAAE5C,IAAI,CAAE,oBAAoB,CAAEE,OAAO,CAAE,CAACyD,IAAI,CAAChD,aAAc,CAAC,CAAC,CACxE,CACF,CAAC,CAEDmC,MAAM,CAACoB,EAAE,YAAAC,MAAA,CAAYnB,SAAS,sBAAqBiB,YAAY,CAAC,CAChE,MAAO,IAAM,CACXnB,MAAM,CAACsB,GAAG,YAAAD,MAAA,CAAYnB,SAAS,sBAAqBiB,YAAY,CAAC,CACnE,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,mBAAmB,CAAGA,CAAA,GAAM,CAChClC,sBAAsB,CAAC,IAAI,CAAC,CAC5BI,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,KAAM,CAAA+B,2BAA2B,CAAGA,CAAA,GAAM,CACxCnC,sBAAsB,CAAC,IAAI,CAAC,CAC5BI,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAED,KAAM,CAAAgC,YAAY,CAAIC,KAAK,EAAK,CAC9B7B,cAAc,CAAC6B,KAAK,CAACC,MAAM,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAAC,CAClD,CAAC,CAED,KAAM,CAAAC,qBAAqB,CAAI3E,gBAAgB,EAAK,CAClDkC,sBAAsB,CAAClC,gBAAgB,CAAC,CACxCsC,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAED,KAAM,CAAAsC,uBAAuB,CAAG,KAAO,CAAAlE,aAAa,EAAK,CACvD,GAAI,CACF,KAAM,CAAArB,GAAG,CAACwF,MAAM,sBAAAX,MAAA,CAAsBxD,aAAa,CAAE,CAAC,CACtDlD,KAAK,CAACsH,OAAO,CAACxF,IAAI,CAACyF,CAAC,CAAC,iCAAiC,CAAC,CAAC,CAC1D,CAAE,MAAOjB,GAAG,CAAE,CACZvE,UAAU,CAACuE,GAAG,CAAC,CACjB,CACA1B,eAAe,CAAC,IAAI,CAAC,CACrBM,cAAc,CAAC,EAAE,CAAC,CAClBZ,aAAa,CAAC,CAAC,CAAC,CAClB,CAAC,CAED,KAAM,CAAAkD,QAAQ,CAAGA,CAAA,GAAM,CACrBlD,aAAa,CAAEmD,SAAS,EAAKA,SAAS,CAAG,CAAC,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CAC1B,GAAI,CAACpD,OAAO,EAAIJ,OAAO,CAAE,OACzB,KAAM,CAAEyD,SAAS,CAAEC,YAAY,CAAEC,YAAa,CAAC,CAAGH,CAAC,CAACI,aAAa,CACjE,GAAIF,YAAY,EAAID,SAAS,CAAG,GAAG,CAAC,CAAGE,YAAY,CAAE,CACnDN,QAAQ,CAAC,CAAC,CACZ,CACF,CAAC,CAED,mBACE7H,KAAA,CAAAqI,aAAA,CAAC1G,aAAa,mBACZ3B,KAAA,CAAAqI,aAAA,CAACpG,iBAAiB,EAChBqG,KAAK,CACHtD,YAAY,KAAA+B,MAAA,CACT5E,IAAI,CAACyF,CAAC,CAAC,gDAAgD,CAAC,MAAAb,MAAA,CAAI/B,YAAY,CAACuD,IAAI,KAEjF,CACDC,IAAI,CAAEpD,gBAAiB,CACvBqD,OAAO,CAAEpD,mBAAoB,CAC7BqD,SAAS,CAAEA,CAAA,GAAMjB,uBAAuB,CAACzC,YAAY,CAAC3B,EAAE,CAAE,EAEzDlB,IAAI,CAACyF,CAAC,CAAC,kDAAkD,CACzC,CAAC,cACpB5H,KAAA,CAAAqI,aAAA,CAACrG,gBAAgB,EACfwG,IAAI,CAAEtD,aAAc,CACpBuD,OAAO,CAAEvB,2BAA4B,CACrC,kBAAgB,mBAAmB,CACnC3D,aAAa,CAAEuB,mBAAmB,EAAIA,mBAAmB,CAACzB,EAAG,CAC9D,CAAC,CACDoC,IAAI,CAACkD,OAAO,GAAK,MAAM,cACtB3I,KAAA,CAAAqI,aAAA,CAAC7F,aAAa,KAAE,CAAC,cAEjBxC,KAAA,CAAAqI,aAAA,CAAArI,KAAA,CAAA4I,QAAA,mBACE5I,KAAA,CAAAqI,aAAA,CAACzG,UAAU,mBACT5B,KAAA,CAAAqI,aAAA,CAACvG,KAAK,MAAEK,IAAI,CAACyF,CAAC,CAAC,wBAAwB,CAAC,CAAC,IAAE,CAAC/E,gBAAgB,CAACgG,MAAM,CAAC,GAAQ,CAAC,cAC7E7I,KAAA,CAAAqI,aAAA,CAACxG,wBAAwB,mBACvB7B,KAAA,CAAAqI,aAAA,CAAC/G,SAAS,EACRwH,WAAW,CAAE3G,IAAI,CAACyF,CAAC,CAAC,oCAAoC,CAAE,CAC1DhF,IAAI,CAAC,QAAQ,CACb0E,KAAK,CAAEhC,WAAY,CACnByD,QAAQ,CAAE5B,YAAa,CACvB6B,UAAU,CAAE,CACVC,cAAc,cACZjJ,KAAA,CAAAqI,aAAA,CAACtH,cAAc,EAACmI,QAAQ,CAAC,OAAO,eAC9BlJ,KAAA,CAAAqI,aAAA,CAAC3G,UAAU,EAACyH,KAAK,CAAC,WAAW,CAAE,CACjB,CAEpB,CAAE,CACH,CAAC,cACFnJ,KAAA,CAAAqI,aAAA,CAACxH,MAAM,EACLuI,OAAO,CAAC,WAAW,CACnBD,KAAK,CAAC,SAAS,CACfE,OAAO,CAAEpC,mBAAoB,EAE5B9E,IAAI,CAACyF,CAAC,CAAC,8BAA8B,CAChC,CACgB,CAChB,CAAC,cACb5H,KAAA,CAAAqI,aAAA,CAACrH,KAAK,EACJsI,SAAS,CAAE/E,OAAO,CAACZ,SAAU,CAC7ByF,OAAO,CAAC,UAAU,CAClBG,QAAQ,CAAExB,YAAa,eAEvB/H,KAAA,CAAAqI,aAAA,CAACpH,KAAK,EAACuI,IAAI,CAAC,OAAO,eACjBxJ,KAAA,CAAAqI,aAAA,CAACjH,SAAS,mBACRpB,KAAA,CAAAqI,aAAA,CAAChH,QAAQ,mBACPrB,KAAA,CAAAqI,aAAA,CAAClH,SAAS,EAAC0C,OAAO,CAAC,UAAU,CAAY,CAAC,cAC1C7D,KAAA,CAAAqI,aAAA,CAAClH,SAAS,EAACsI,KAAK,CAAC,QAAQ,EAAEtH,IAAI,CAACyF,CAAC,CAAC,2BAA2B,CAAa,CAAC,cAC3E5H,KAAA,CAAAqI,aAAA,CAAClH,SAAS,EAACsI,KAAK,CAAC,QAAQ,EAAEtH,IAAI,CAACyF,CAAC,CAAC,6BAA6B,CAAa,CACpE,CACD,CAAC,cACZ5H,KAAA,CAAAqI,aAAA,CAACnH,SAAS,mBACRlB,KAAA,CAAAqI,aAAA,CAAArI,KAAA,CAAA4I,QAAA,MACG/F,gBAAgB,CAAC6G,GAAG,CAAEzG,WAAW,eAChCjD,KAAA,CAAAqI,aAAA,CAAChH,QAAQ,EAACsI,GAAG,CAAE1G,WAAW,CAACI,EAAG,eAC5BrD,KAAA,CAAAqI,aAAA,CAAClH,SAAS,MACP8B,WAAW,CAACL,IAAI,GAAK,YAAY,eAAK5C,KAAA,CAAAqI,aAAA,CAACzH,MAAM,EAC5CgJ,GAAG,CAAErJ,UAAW,CAAC+I,SAAS,CAAE/E,OAAO,CAACL,MAAO,CAAE,CAAE,CAChDjB,WAAW,CAACL,IAAI,GAAK,KAAK,eAAK5C,KAAA,CAAAqI,aAAA,CAACzH,MAAM,EACrCgJ,GAAG,CAAEtJ,GAAI,CAACgJ,SAAS,CAAE/E,OAAO,CAACL,MAAO,CAAE,CAAE,CACzCjB,WAAW,CAACL,IAAI,GAAK,SAAS,eAAK5C,KAAA,CAAAqI,aAAA,CAACzH,MAAM,EACzCgJ,GAAG,CAAEpJ,QAAS,CAAC8I,SAAS,CAAE/E,OAAO,CAACL,MAAO,CAAE,CAAE,CAC9CjB,WAAW,CAACL,IAAI,GAAK,SAAS,eAAK5C,KAAA,CAAAqI,aAAA,CAACzH,MAAM,EACzCgJ,GAAG,CAAEnJ,OAAQ,CAAC6I,SAAS,CAAE/E,OAAO,CAACL,MAAO,CAAE,CAAE,CAC3CjB,WAAW,CAACL,IAAI,GAAK,aAAa,eAAK5C,KAAA,CAAAqI,aAAA,CAACzH,MAAM,EAC/CgJ,GAAG,CAAElJ,WAAY,CAAC4I,SAAS,CAAE/E,OAAO,CAACL,MAAO,CAAE,CACvC,CAAC,cAEZlE,KAAA,CAAAqI,aAAA,CAAClH,SAAS,EAACsI,KAAK,CAAC,QAAQ,EAAExG,WAAW,CAACI,EAAc,CAAC,cACtDrD,KAAA,CAAAqI,aAAA,CAAClH,SAAS,EAACsI,KAAK,CAAC,QAAQ,EAAExG,WAAW,CAACsF,IAAgB,CAAC,cACxDvI,KAAA,CAAAqI,aAAA,CAAClH,SAAS,EAACsI,KAAK,CAAC,QAAQ,eACvBzJ,KAAA,CAAAqI,aAAA,CAACvH,UAAU,EACT0I,IAAI,CAAC,OAAO,CACZH,OAAO,CAAEA,CAAA,GAAM7B,qBAAqB,CAACvE,WAAW,CAAE,eAElDjD,KAAA,CAAAqI,aAAA,CAAC5G,IAAI,EAAC0H,KAAK,CAAC,WAAW,CAAE,CACf,CAAC,cAEbnJ,KAAA,CAAAqI,aAAA,CAACvH,UAAU,EACT0I,IAAI,CAAC,OAAO,CACZH,OAAO,CAAGrB,CAAC,EAAK,CACd3C,mBAAmB,CAAC,IAAI,CAAC,CACzBJ,eAAe,CAAChC,WAAW,CAAC,CAC9B,CAAE,eAEFjD,KAAA,CAAAqI,aAAA,CAAC7G,aAAa,EAAC2H,KAAK,CAAC,WAAW,CAAE,CACxB,CACH,CACH,CACX,CAAC,CACD3E,OAAO,eAAIxE,KAAA,CAAAqI,aAAA,CAACtG,gBAAgB,EAAC8H,OAAO,CAAE,CAAE,CAAE,CAC3C,CACO,CACN,CACF,CACP,CACS,CAAC,CAEpB,CAAC,CAED,cAAe,CAAAvF,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module"}