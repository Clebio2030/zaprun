{"ast":null,"code":"import React,{useState,useEffect,useReducer,useContext}from\"react\";import{toast}from\"react-toastify\";import{useHistory}from\"react-router-dom\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Pagination from\"@material-ui/lab/Pagination\";import*as XLSX from'xlsx';import api from\"../../services/api\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import{i18n}from\"../../translate/i18n\";import MainHeader from\"../../components/MainHeader\";import Title from\"../../components/Title\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import MainContainer from\"../../components/MainContainer\";import toastError from\"../../errors/toastError\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Can}from\"../../components/Can\";import{CircularProgress,FormControl,FormControlLabel,Grid,IconButton,InputLabel,MenuItem,Select,Switch,TextField,Tooltip,Typography}from\"@material-ui/core\";import{UsersFilter}from\"../../components/UsersFilter\";import{TagsFilter}from\"../../components/TagsFilter\";import{WhatsappsFilter}from\"../../components/WhatsappsFilter\";import{StatusFilter}from\"../../components/StatusFilter\";import useDashboard from\"../../hooks/useDashboard\";import QueueSelectCustom from\"../../components/QueueSelectCustom\";import moment from\"moment\";import ShowTicketLogModal from\"../../components/ShowTicketLogModal\";import{blue,green}from\"@material-ui/core/colors\";import{Facebook,Forward,History,Instagram,SaveAlt,Visibility,WhatsApp}from\"@material-ui/icons\";import Autocomplete,{createFilterOptions}from\"@material-ui/lab/Autocomplete\";import{Field}from\"formik\";const useStyles=makeStyles(theme=>({mainContainer:{background:theme.palette.fancyBackground},formControl:{display:'flex',flexDirection:'row',justifyContent:'center',alignItems:'center'},mainPaper:{flex:1,marginTop:40,borderRadius:20,border:'0px !important',marginBottom:40,overflow:'hidden'},mainPaperTable:{flex:1,overflow:'auto',height:'68vh',...theme.scrollbarStylesSoftBig},mainPaperFilter:{flex:1,overflow:'auto',height:'20vh',...theme.scrollbarStylesSoftBig},mainHeaderBlock:{[theme.breakpoints.down('md')]:{display:'flex',flexWrap:'wrap'}},filterItem:{width:200,[theme.breakpoints.down('md')]:{width:'45%'}}}));const Reports=()=>{const classes=useStyles();const history=useHistory();const{getReport}=useDashboard();const{user}=useContext(AuthContext);const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[pageSize,setPageSize]=useState(10);// Defina o tamanho da página\nconst[searchParam,setSearchParam]=useState(\"\");const[selectedContactId,setSelectedContactId]=useState(null);const[selectedWhatsapp,setSelectedWhatsapp]=useState([]);const[selectedStatus,setSelectedStatus]=useState([]);const[selectedContact,setSelectedContact]=useState(null);// const [tagIds, setTagIds] = useState([]);\nconst[queueIds,setQueueIds]=useState([]);const[userIds,setUserIds]=useState([]);const[options,setOptions]=useState([]);const[dateFrom,setDateFrom]=useState(moment(\"1\",\"D\").format(\"YYYY-MM-DD\"));const[dateTo,setDateTo]=useState(moment().format(\"YYYY-MM-DD\"));const[onlyRated,setOnlyRated]=useState(false);const[totalTickets,setTotalTickets]=useState(0);const[tickets,setTickets]=useState([]);const[openTicketMessageDialog,setOpenTicketMessageDialog]=useState(false);const[ticketOpen,setTicketOpen]=useState(null);const[hasMore,setHasMore]=useState(false);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{const fetchContacts=async()=>{try{const{data}=await api.get(\"contacts\",{params:{searchParam}});setOptions(data.contacts);setLoading(false);}catch(err){setLoading(false);toastError(err);}};fetchContacts();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam]);// const handleSelectedTags = (selecteds) => {\n//   const tags = selecteds.map((t) => t.id);\n//   setTagIds(tags);\n// };\nconst exportarGridParaExcel=async()=>{setLoading(true);// Define o estado de loading como true durante o carregamento\ntry{const data=await getReport({searchParam,contactId:selectedContactId,whatsappId:JSON.stringify(selectedWhatsapp),// tags: JSON.stringify(tagIds),\nusers:JSON.stringify(userIds),queueIds:JSON.stringify(queueIds),status:JSON.stringify(selectedStatus),// tags: tagIds,\ndateFrom,dateTo,page:1,// Passa o número da página para a API\npageSize:9999999,// Passa o tamanho da página para a API\nonlyRated:onlyRated?\"true\":\"false\"});const ticketsData=data.tickets.map(ticket=>{// Convertendo o campo createdAt para um objeto Date\nconst createdAt=new Date(ticket.createdAt);const closedAt=new Date(ticket.closedAt);const dataFechamento=closedAt.toLocaleDateString();const horaFechamento=closedAt.toLocaleTimeString();// Obtendo a data e a hora separadamente\nconst dataCriacao=createdAt.toLocaleDateString();// Obtém a data no formato 'dd/mm/aaaa'\nconst horaCriacao=createdAt.toLocaleTimeString();// Obtém a hora no formato 'hh:mm:ss'\nreturn{id:ticket.id,Conexão:ticket.whatsappName,Contato:ticket.contactName,Usuário:ticket.userName,Fila:ticket.queueName,Status:ticket.status,ÚltimaMensagem:ticket.lastMessage,DataAbertura:dataCriacao,HoraAbertura:horaCriacao,DataFechamento:ticket.closedAt===null?\"\":dataFechamento,HoraFechamento:ticket.closedAt===null?\"\":horaFechamento,TempoDeAtendimento:ticket.supportTime,nps:ticket.NPS};});const ws=XLSX.utils.json_to_sheet(ticketsData);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,'RelatorioDeAtendimentos');XLSX.writeFile(wb,'relatorio-de-atendimentos.xlsx');setPageNumber(pageNumber);// Atualiza o estado da página atual\n}catch(error){toastError(error);}finally{setLoading(false);// Define o estado de loading como false após o carregamento\n}};const handleFilter=async pageNumber=>{setLoading(true);// Define o estado de loading como true durante o carregamento\ntry{const data=await getReport({searchParam,contactId:selectedContactId,whatsappId:JSON.stringify(selectedWhatsapp),// tags: JSON.stringify(tagIds),\nusers:JSON.stringify(userIds),queueIds:JSON.stringify(queueIds),status:JSON.stringify(selectedStatus),// tags: tagIds,\ndateFrom,dateTo,page:pageNumber,// Passa o número da página para a API\npageSize:pageSize,// Passa o tamanho da página para a API\nonlyRated:onlyRated?\"true\":\"false\"});setTotalTickets(data.totalTickets.total);// Verifica se há mais resultados para definir hasMore\nsetHasMore(data.tickets.length===pageSize);setTickets(data.tickets);// Se for a primeira página, substitua os tickets\nsetPageNumber(pageNumber);// Atualiza o estado da página atual\n}catch(error){toastError(error);}finally{setLoading(false);// Define o estado de loading como false após o carregamento\n}};const handleSelectedUsers=selecteds=>{const users=selecteds.map(t=>t.id);setUserIds(users);};const handleSelectedWhatsapps=selecteds=>{const whatsapp=selecteds.map(t=>t.id);setSelectedWhatsapp(whatsapp);};const handleSelectedStatus=selecteds=>{const statusFilter=selecteds.map(t=>t.status);setSelectedStatus(statusFilter);};const IconChannel=channel=>{switch(channel){case\"facebook\":return/*#__PURE__*/React.createElement(Facebook,{style:{color:\"#3b5998\",verticalAlign:\"middle\"}});case\"instagram\":return/*#__PURE__*/React.createElement(Instagram,{style:{color:\"#e1306c\",verticalAlign:\"middle\"}});case\"whatsapp\":return/*#__PURE__*/React.createElement(WhatsApp,{style:{color:\"#25d366\",verticalAlign:\"middle\"}});default:return\"error\";}};const renderOption=option=>{if(option.number){return/*#__PURE__*/React.createElement(React.Fragment,null,IconChannel(option.channel),/*#__PURE__*/React.createElement(Typography,{component:\"span\",style:{fontSize:14,marginLeft:\"10px\",display:\"inline-flex\",alignItems:\"center\",lineHeight:\"2\"}},option.name,\" - \",option.number));}else{return\"\".concat(i18n.t(\"newTicketModal.add\"),\" \").concat(option.name);}};const handleSelectOption=(e,newValue)=>{setSelectedContactId(newValue.id);setSearchParam(\"\");};const renderOptionLabel=option=>{if(option.number){return\"\".concat(option.name,\" - \").concat(option.number);}else{return\"\".concat(option.name);}};const filter=createFilterOptions({trim:true});const createAddContactOption=(filterOptions,params)=>{const filtered=filter(filterOptions,params);if(params.inputValue!==\"\"&&!loading&&searchParam.length>=3){filtered.push({name:\"\".concat(params.inputValue)});}return filtered;};const renderContactAutocomplete=()=>{return/*#__PURE__*/React.createElement(Grid,{xs:12,item:true},/*#__PURE__*/React.createElement(Autocomplete,{fullWidth:true,options:options,loading:loading,clearOnBlur:true,autoHighlight:true,freeSolo:true,size:\"small\",clearOnEscape:true,getOptionLabel:renderOptionLabel,renderOption:renderOption,filterOptions:createAddContactOption,onChange:(e,newValue)=>handleSelectOption(e,newValue),renderInput:params=>/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{label:i18n.t(\"newTicketModal.fieldLabel\"),variant:\"outlined\",autoFocus:true,size:\"small\",onChange:e=>setSearchParam(e.target.value)// onKeyPress={(e, newValue) => handleSelectOption(e, newValue)}\n,InputProps:{...params.InputProps,endAdornment:/*#__PURE__*/React.createElement(React.Fragment,null,loading?/*#__PURE__*/React.createElement(CircularProgress,{color:\"inherit\",size:20}):null,params.InputProps.endAdornment)}}))}));};return/*#__PURE__*/React.createElement(MainContainer,{className:classes.mainContainer},openTicketMessageDialog&&/*#__PURE__*/React.createElement(ShowTicketLogModal,{isOpen:openTicketMessageDialog,handleClose:()=>setOpenTicketMessageDialog(false),ticketId:ticketOpen.id}),/*#__PURE__*/React.createElement(Title,null,i18n.t(\"reports.title\")),/*#__PURE__*/React.createElement(MainHeader,{className:classes.mainHeaderFilter,style:{display:'flex'}},/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaperFilter},/*#__PURE__*/React.createElement(\"div\",{style:{paddingTop:'15px'}}),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:3,xl:3},renderContactAutocomplete()),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:3,xl:3},/*#__PURE__*/React.createElement(WhatsappsFilter,{onFiltered:handleSelectedWhatsapps})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:3,xl:3},/*#__PURE__*/React.createElement(StatusFilter,{onFiltered:handleSelectedStatus})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:3,xl:3},/*#__PURE__*/React.createElement(UsersFilter,{onFiltered:handleSelectedUsers})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:3,xl:3,style:{marginTop:'-13px'}},/*#__PURE__*/React.createElement(QueueSelectCustom,{selectedQueueIds:queueIds,onChange:values=>setQueueIds(values)})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:3,md:3},/*#__PURE__*/React.createElement(TextField,{label:\"Data Inicial\",type:\"date\",value:dateFrom,variant:\"outlined\",fullWidth:true,size:\"small\",onChange:e=>setDateFrom(e.target.value),InputLabelProps:{shrink:true}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:3,md:3},/*#__PURE__*/React.createElement(TextField,{label:\"Data Final\",type:\"date\",value:dateTo,variant:\"outlined\",fullWidth:true,size:\"small\",onChange:e=>setDateTo(e.target.value),InputLabelProps:{shrink:true}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:3,md:3,style:{display:'flex',justifyContent:'center'}},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Switch,{color:\"primary\",checked:onlyRated,onChange:()=>setOnlyRated(!onlyRated)}),label:i18n.t(\"reports.buttons.onlyRated\")}),/*#__PURE__*/React.createElement(IconButton,{onClick:exportarGridParaExcel,\"aria-label\":\"Exportar para Excel\"},/*#__PURE__*/React.createElement(SaveAlt,null)),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:()=>handleFilter(pageNumber),size:\"small\"},i18n.t(\"reports.buttons.filter\")))))),/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaperTable,variant:\"outlined\"},/*#__PURE__*/React.createElement(Table,{size:\"small\",id:\"grid-attendants\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.id\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"reports.table.whatsapp\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"reports.table.contact\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"reports.table.user\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"reports.table.queue\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.status\")),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},i18n.t(\"reports.table.lastMessage\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.dateOpen\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.dateClose\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.supportTime\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.NPS\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"reports.table.actions\")))),/*#__PURE__*/React.createElement(TableBody,null,/*#__PURE__*/React.createElement(React.Fragment,null,tickets.map(ticket=>/*#__PURE__*/React.createElement(TableRow,{key:ticket.id},/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},ticket.id),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},ticket===null||ticket===void 0?void 0:ticket.whatsappName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},ticket===null||ticket===void 0?void 0:ticket.contactName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},ticket===null||ticket===void 0?void 0:ticket.userName),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},ticket===null||ticket===void 0?void 0:ticket.queueName),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},ticket===null||ticket===void 0?void 0:ticket.status),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},ticket===null||ticket===void 0?void 0:ticket.lastMessage),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},ticket===null||ticket===void 0?void 0:ticket.createdAt),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},ticket===null||ticket===void 0?void 0:ticket.closedAt),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},ticket===null||ticket===void 0?void 0:ticket.supportTime),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},ticket===null||ticket===void 0?void 0:ticket.NPS),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(Typography,{noWrap:true,component:\"span\",variant:\"body2\",color:\"textPrimary\"},/*#__PURE__*/React.createElement(Tooltip,{title:\"Logs do Ticket\"},/*#__PURE__*/React.createElement(History,{onClick:()=>{setOpenTicketMessageDialog(true);setTicketOpen(ticket);},fontSize:\"small\",style:{color:blue[700],cursor:\"pointer\",marginLeft:10,verticalAlign:\"middle\"}})),/*#__PURE__*/React.createElement(Tooltip,{title:\"Acessar Ticket\"},/*#__PURE__*/React.createElement(Forward,{onClick:()=>{history.push(\"/tickets/\".concat(ticket.uuid));},fontSize:\"small\",style:{color:green[700],cursor:\"pointer\",marginLeft:10,verticalAlign:\"middle\"}})))))),loading&&/*#__PURE__*/React.createElement(TableRowSkeleton,{avatar:true,columns:3}))))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:10,md:10},/*#__PURE__*/React.createElement(Pagination,{count:Math.ceil(totalTickets/pageSize)// Calcula o nmero total de páginas com base no nmero total de tickets e no tamanho da página\n,page:pageNumber// Define a página atual\n,onChange:(event,value)=>handleFilter(value)// Função de callback para mudanças de página\n})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:2,md:2},/*#__PURE__*/React.createElement(FormControl,{margin:\"dense\",variant:\"outlined\",fullWidth:true},/*#__PURE__*/React.createElement(InputLabel,null,i18n.t(\"tickets.search.ticketsPerPage\")),/*#__PURE__*/React.createElement(Select,{labelId:\"dialog-select-prompt-label\",id:\"dialog-select-prompt\",name:\"pageSize\",value:pageSize,onChange:e=>{setPageSize(e.target.value);},label:i18n.t(\"tickets.search.ticketsPerPage\"),fullWidth:true,MenuProps:{anchorOrigin:{vertical:\"center\",horizontal:\"left\"},transformOrigin:{vertical:\"center\",horizontal:\"left\"},getContentAnchorEl:null}},/*#__PURE__*/React.createElement(MenuItem,{value:5},\"5\"),/*#__PURE__*/React.createElement(MenuItem,{value:10},\"10\"),/*#__PURE__*/React.createElement(MenuItem,{value:20},\"20\"),/*#__PURE__*/React.createElement(MenuItem,{value:50},\"50\")))))));};export default Reports;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useContext","toast","useHistory","makeStyles","Table","TableBody","TableCell","TableHead","TableRow","Paper","Button","Pagination","XLSX","api","TableRowSkeleton","i18n","MainHeader","Title","MainHeaderButtonsWrapper","MainContainer","toastError","AuthContext","Can","CircularProgress","FormControl","FormControlLabel","Grid","IconButton","InputLabel","MenuItem","Select","Switch","TextField","Tooltip","Typography","UsersFilter","TagsFilter","WhatsappsFilter","StatusFilter","useDashboard","QueueSelectCustom","moment","ShowTicketLogModal","blue","green","Facebook","Forward","History","Instagram","SaveAlt","Visibility","WhatsApp","Autocomplete","createFilterOptions","Field","useStyles","theme","mainContainer","background","palette","fancyBackground","formControl","display","flexDirection","justifyContent","alignItems","mainPaper","flex","marginTop","borderRadius","border","marginBottom","overflow","mainPaperTable","height","scrollbarStylesSoftBig","mainPaperFilter","mainHeaderBlock","breakpoints","down","flexWrap","filterItem","width","Reports","classes","history","getReport","user","loading","setLoading","pageNumber","setPageNumber","pageSize","setPageSize","searchParam","setSearchParam","selectedContactId","setSelectedContactId","selectedWhatsapp","setSelectedWhatsapp","selectedStatus","setSelectedStatus","selectedContact","setSelectedContact","queueIds","setQueueIds","userIds","setUserIds","options","setOptions","dateFrom","setDateFrom","format","dateTo","setDateTo","onlyRated","setOnlyRated","totalTickets","setTotalTickets","tickets","setTickets","openTicketMessageDialog","setOpenTicketMessageDialog","ticketOpen","setTicketOpen","hasMore","setHasMore","delayDebounceFn","setTimeout","fetchContacts","data","get","params","contacts","err","clearTimeout","exportarGridParaExcel","contactId","whatsappId","JSON","stringify","users","status","page","ticketsData","map","ticket","createdAt","Date","closedAt","dataFechamento","toLocaleDateString","horaFechamento","toLocaleTimeString","dataCriacao","horaCriacao","id","Conexão","whatsappName","Contato","contactName","Usuário","userName","Fila","queueName","Status","ÚltimaMensagem","lastMessage","DataAbertura","HoraAbertura","DataFechamento","HoraFechamento","TempoDeAtendimento","supportTime","nps","NPS","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","error","handleFilter","total","length","handleSelectedUsers","selecteds","t","handleSelectedWhatsapps","whatsapp","handleSelectedStatus","statusFilter","IconChannel","channel","createElement","style","color","verticalAlign","renderOption","option","number","Fragment","component","fontSize","marginLeft","lineHeight","name","concat","handleSelectOption","e","newValue","renderOptionLabel","filter","trim","createAddContactOption","filterOptions","filtered","inputValue","push","renderContactAutocomplete","xs","item","fullWidth","clearOnBlur","autoHighlight","freeSolo","size","clearOnEscape","getOptionLabel","onChange","renderInput","Object","assign","label","variant","autoFocus","target","value","InputProps","endAdornment","className","isOpen","handleClose","ticketId","mainHeaderFilter","paddingTop","container","spacing","md","xl","onFiltered","selectedQueueIds","values","sm","type","InputLabelProps","shrink","control","checked","onClick","align","key","noWrap","title","cursor","uuid","avatar","columns","count","Math","ceil","event","margin","labelId","MenuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/Reports/index.js"],"sourcesContent":["import React, { useState, useEffect, useReducer, useContext } from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Pagination from \"@material-ui/lab/Pagination\";\r\nimport * as XLSX from 'xlsx';\r\n\r\nimport api from \"../../services/api\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\n\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport Title from \"../../components/Title\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport { Can } from \"../../components/Can\";\r\n\r\nimport { CircularProgress, FormControl, FormControlLabel, Grid, IconButton, InputLabel, MenuItem, Select, Switch, TextField, Tooltip, Typography } from \"@material-ui/core\";\r\nimport { UsersFilter } from \"../../components/UsersFilter\";\r\nimport { TagsFilter } from \"../../components/TagsFilter\";\r\nimport { WhatsappsFilter } from \"../../components/WhatsappsFilter\";\r\nimport { StatusFilter } from \"../../components/StatusFilter\";\r\nimport useDashboard from \"../../hooks/useDashboard\";\r\n\r\nimport QueueSelectCustom from \"../../components/QueueSelectCustom\";\r\nimport moment from \"moment\";\r\nimport ShowTicketLogModal from \"../../components/ShowTicketLogModal\";\r\n\r\nimport { blue, green } from \"@material-ui/core/colors\";\r\nimport { Facebook, Forward, History, Instagram, SaveAlt, Visibility, WhatsApp } from \"@material-ui/icons\";\r\nimport Autocomplete, { createFilterOptions } from \"@material-ui/lab/Autocomplete\";\r\nimport { Field } from \"formik\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainContainer: {\r\n    background: theme.palette.fancyBackground,\r\n\r\n  },\r\n  formControl: {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  mainPaper: {\r\n    flex: 1,\r\n    marginTop: 40,\r\n    borderRadius: 20,\r\n    border: '0px !important',\r\n    marginBottom: 40,\r\n    overflow: 'hidden'\r\n  },\r\n  mainPaperTable: {\r\n    flex: 1,\r\n    overflow: 'auto',\r\n    height: '68vh',\r\n    ...theme.scrollbarStylesSoftBig,\r\n  },\r\n  mainPaperFilter: {\r\n    flex: 1,\r\n    overflow: 'auto',\r\n    height: '20vh',\r\n    ...theme.scrollbarStylesSoftBig,\r\n  },\r\n  mainHeaderBlock: {\r\n    [theme.breakpoints.down('md')]: {\r\n      display: 'flex',\r\n      flexWrap: 'wrap'\r\n    },\r\n  },\r\n  filterItem: {\r\n    width: 200,\r\n    [theme.breakpoints.down('md')]: {\r\n      width: '45%'\r\n    },\r\n  },\r\n}));\r\n\r\nconst Reports = () => {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { getReport } = useDashboard();\r\n\r\n  const { user } = useContext(AuthContext);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [pageSize, setPageSize] = useState(10); // Defina o tamanho da página\r\n\r\n  const [searchParam, setSearchParam] = useState(\"\");\r\n  const [selectedContactId, setSelectedContactId] = useState(null);\r\n  const [selectedWhatsapp, setSelectedWhatsapp] = useState([]);\r\n  const [selectedStatus, setSelectedStatus] = useState([]);\r\n  const [selectedContact, setSelectedContact] = useState(null);\r\n\r\n  // const [tagIds, setTagIds] = useState([]);\r\n  const [queueIds, setQueueIds] = useState([]);\r\n  const [userIds, setUserIds] = useState([]);\r\n  const [options, setOptions] = useState([]);\r\n  const [dateFrom, setDateFrom] = useState(moment(\"1\", \"D\").format(\"YYYY-MM-DD\"));\r\n  const [dateTo, setDateTo] = useState(moment().format(\"YYYY-MM-DD\"));\r\n  const [onlyRated, setOnlyRated] = useState(false);\r\n  const [totalTickets, setTotalTickets] = useState(0);\r\n  const [tickets, setTickets] = useState([]);\r\n\r\n  const [openTicketMessageDialog, setOpenTicketMessageDialog] = useState(false);\r\n  const [ticketOpen, setTicketOpen] = useState(null);\r\n  const [hasMore, setHasMore] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const fetchContacts = async () => {\r\n        try {\r\n          const { data } = await api.get(\"contacts\", {\r\n            params: { searchParam },\r\n          });\r\n          setOptions(data.contacts);\r\n          setLoading(false);\r\n        } catch (err) {\r\n          setLoading(false);\r\n          toastError(err);\r\n        }\r\n      };\r\n      fetchContacts();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [searchParam]);\r\n\r\n  // const handleSelectedTags = (selecteds) => {\r\n  //   const tags = selecteds.map((t) => t.id);\r\n  //   setTagIds(tags);\r\n  // };\r\n\r\n  const exportarGridParaExcel = async () => {\r\n    setLoading(true); // Define o estado de loading como true durante o carregamento\r\n\r\n    try {\r\n      const data = await getReport({\r\n        searchParam,\r\n        contactId: selectedContactId,\r\n        whatsappId: JSON.stringify(selectedWhatsapp),\r\n        // tags: JSON.stringify(tagIds),\r\n        users: JSON.stringify(userIds),\r\n        queueIds: JSON.stringify(queueIds),\r\n        status: JSON.stringify(selectedStatus),\r\n        // tags: tagIds,\r\n        dateFrom,\r\n        dateTo,\r\n        page: 1, // Passa o número da página para a API\r\n        pageSize: 9999999, // Passa o tamanho da página para a API\r\n        onlyRated: onlyRated ? \"true\" : \"false\"\r\n      });\r\n\r\n\r\n      const ticketsData = data.tickets.map(ticket => {\r\n        // Convertendo o campo createdAt para um objeto Date\r\n        const createdAt = new Date(ticket.createdAt);\r\n        const closedAt = new Date(ticket.closedAt);\r\n\r\n        const dataFechamento = closedAt.toLocaleDateString();\r\n        const horaFechamento = closedAt.toLocaleTimeString();\r\n        // Obtendo a data e a hora separadamente\r\n        const dataCriacao = createdAt.toLocaleDateString(); // Obtém a data no formato 'dd/mm/aaaa'\r\n        const horaCriacao = createdAt.toLocaleTimeString(); // Obtém a hora no formato 'hh:mm:ss'\r\n\r\n        return {\r\n          id: ticket.id,\r\n          Conexão: ticket.whatsappName,\r\n          Contato: ticket.contactName,\r\n          Usuário: ticket.userName,\r\n          Fila: ticket.queueName,\r\n          Status: ticket.status,\r\n          ÚltimaMensagem: ticket.lastMessage,\r\n          DataAbertura: dataCriacao,\r\n          HoraAbertura: horaCriacao,\r\n          DataFechamento: ticket.closedAt === null ? \"\" : dataFechamento,\r\n          HoraFechamento: ticket.closedAt === null ? \"\" : horaFechamento,\r\n          TempoDeAtendimento: ticket.supportTime,\r\n          nps: ticket.NPS,\r\n        }\r\n      });\r\n      const ws = XLSX.utils.json_to_sheet(ticketsData);\r\n      const wb = XLSX.utils.book_new();\r\n\r\n      XLSX.utils.book_append_sheet(wb, ws, 'RelatorioDeAtendimentos');\r\n      XLSX.writeFile(wb, 'relatorio-de-atendimentos.xlsx');\r\n\r\n\r\n      setPageNumber(pageNumber); // Atualiza o estado da página atual\r\n    } catch (error) {\r\n      toastError(error);\r\n    } finally {\r\n      setLoading(false); // Define o estado de loading como false após o carregamento\r\n    }\r\n\r\n  };\r\n\r\n\r\n  const handleFilter = async (pageNumber) => {\r\n    setLoading(true); // Define o estado de loading como true durante o carregamento\r\n    try {\r\n      const data = await getReport({\r\n        searchParam,\r\n        contactId: selectedContactId,\r\n        whatsappId: JSON.stringify(selectedWhatsapp),\r\n        // tags: JSON.stringify(tagIds),\r\n        users: JSON.stringify(userIds),\r\n        queueIds: JSON.stringify(queueIds),\r\n        status: JSON.stringify(selectedStatus),\r\n        // tags: tagIds,\r\n        dateFrom,\r\n        dateTo,\r\n        page: pageNumber, // Passa o número da página para a API\r\n        pageSize: pageSize, // Passa o tamanho da página para a API\r\n        onlyRated: onlyRated ? \"true\" : \"false\"\r\n      });\r\n\r\n      setTotalTickets(data.totalTickets.total);\r\n\r\n      // Verifica se há mais resultados para definir hasMore\r\n      setHasMore(data.tickets.length === pageSize);\r\n\r\n      setTickets(data.tickets); // Se for a primeira página, substitua os tickets\r\n\r\n      setPageNumber(pageNumber); // Atualiza o estado da página atual\r\n    } catch (error) {\r\n      toastError(error);\r\n    } finally {\r\n      setLoading(false); // Define o estado de loading como false após o carregamento\r\n    }\r\n  }\r\n\r\n  const handleSelectedUsers = (selecteds) => {\r\n    const users = selecteds.map((t) => t.id);\r\n    setUserIds(users);\r\n  };\r\n\r\n  const handleSelectedWhatsapps = (selecteds) => {\r\n    const whatsapp = selecteds.map((t) => t.id);\r\n    setSelectedWhatsapp(whatsapp);\r\n  };\r\n\r\n  const handleSelectedStatus = (selecteds) => {\r\n    const statusFilter = selecteds.map((t) => t.status);\r\n\r\n    setSelectedStatus(statusFilter);\r\n  };\r\n  const IconChannel = (channel) => {\r\n    switch (channel) {\r\n      case \"facebook\":\r\n        return <Facebook style={{ color: \"#3b5998\", verticalAlign: \"middle\" }} />;\r\n      case \"instagram\":\r\n        return <Instagram style={{ color: \"#e1306c\", verticalAlign: \"middle\" }} />;\r\n      case \"whatsapp\":\r\n        return <WhatsApp style={{ color: \"#25d366\", verticalAlign: \"middle\" }} />\r\n      default:\r\n        return \"error\";\r\n    }\r\n  };\r\n\r\n  const renderOption = (option) => {\r\n    if (option.number) {\r\n      return <>\r\n        {IconChannel(option.channel)}\r\n        <Typography component=\"span\" style={{ fontSize: 14, marginLeft: \"10px\", display: \"inline-flex\", alignItems: \"center\", lineHeight: \"2\" }}>\r\n          {option.name} - {option.number}\r\n        </Typography>\r\n      </>\r\n    } else {\r\n      return `${i18n.t(\"newTicketModal.add\")} ${option.name}`;\r\n    }\r\n  };\r\n\r\n  const handleSelectOption = (e, newValue) => {\r\n    setSelectedContactId(newValue.id);\r\n    setSearchParam(\"\");\r\n  };\r\n\r\n  const renderOptionLabel = option => {\r\n    if (option.number) {\r\n      return `${option.name} - ${option.number}`;\r\n    } else {\r\n      return `${option.name}`;\r\n    }\r\n  };\r\n  const filter = createFilterOptions({\r\n    trim: true,\r\n  });\r\n\r\n  const createAddContactOption = (filterOptions, params) => {\r\n    const filtered = filter(filterOptions, params);\r\n    if (params.inputValue !== \"\" && !loading && searchParam.length >= 3) {\r\n      filtered.push({\r\n        name: `${params.inputValue}`,\r\n      });\r\n    }\r\n    return filtered;\r\n  };\r\n  const renderContactAutocomplete = () => {\r\n    return (\r\n      <Grid xs={12} item>\r\n        <Autocomplete\r\n          fullWidth\r\n          options={options}\r\n          loading={loading}\r\n          clearOnBlur\r\n          autoHighlight\r\n          freeSolo\r\n          size=\"small\"\r\n          clearOnEscape\r\n          getOptionLabel={renderOptionLabel}\r\n          renderOption={renderOption}\r\n          filterOptions={createAddContactOption}\r\n          onChange={(e, newValue) => handleSelectOption(e, newValue)}\r\n          renderInput={params => (\r\n            <TextField\r\n              {...params}\r\n              label={i18n.t(\"newTicketModal.fieldLabel\")}\r\n              variant=\"outlined\"\r\n              autoFocus\r\n              size=\"small\"\r\n              onChange={e => setSearchParam(e.target.value)}\r\n              // onKeyPress={(e, newValue) => handleSelectOption(e, newValue)}\r\n              InputProps={{\r\n                ...params.InputProps,\r\n                endAdornment: (\r\n                  <React.Fragment>\r\n                    {loading ? (\r\n                      <CircularProgress color=\"inherit\" size={20} />\r\n                    ) : null}\r\n                    {params.InputProps.endAdornment}\r\n                  </React.Fragment>\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n        />\r\n      </Grid>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <MainContainer className={classes.mainContainer}>\r\n      {openTicketMessageDialog && (\r\n        <ShowTicketLogModal\r\n          isOpen={openTicketMessageDialog}\r\n          handleClose={() => setOpenTicketMessageDialog(false)}\r\n          ticketId={ticketOpen.id}\r\n        />\r\n      )}\r\n      <Title>{i18n.t(\"reports.title\")}</Title>\r\n\r\n      <MainHeader className={classes.mainHeaderFilter} style={{ display: 'flex' }}>\r\n        <Paper className={classes.mainPaperFilter}>\r\n          <div style={{ paddingTop: '15px' }} />\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={12} md={3} xl={3}>\r\n              {renderContactAutocomplete()}\r\n            </Grid>\r\n            <Grid item xs={12} md={3} xl={3}>\r\n              <WhatsappsFilter onFiltered={handleSelectedWhatsapps} />\r\n            </Grid>\r\n            <Grid item xs={12} md={3} xl={3}>\r\n              <StatusFilter onFiltered={handleSelectedStatus} />\r\n            </Grid>\r\n            <Grid item xs={12} md={3} xl={3}>\r\n              <UsersFilter onFiltered={handleSelectedUsers} />\r\n            </Grid>\r\n            {/* <Grid item xs={12} md={4} xl={4}>\r\n              <TagsFilter onFiltered={handleSelectedTags} />\r\n            </Grid> */}\r\n            <Grid item xs={12} md={3} xl={3} style={{ marginTop: '-13px' }}>\r\n              <QueueSelectCustom\r\n                selectedQueueIds={queueIds}\r\n                onChange={values => setQueueIds(values)}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={12} sm={3} md={3}>\r\n              <TextField\r\n                label=\"Data Inicial\"\r\n                type=\"date\"\r\n                value={dateFrom}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                onChange={(e) => setDateFrom(e.target.value)}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={3} md={3}>\r\n              <TextField\r\n                label=\"Data Final\"\r\n                type=\"date\"\r\n                value={dateTo}\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                onChange={(e) => setDateTo(e.target.value)}\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={3} md={3} style={{ display: 'flex', justifyContent: 'center' }}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    color=\"primary\"\r\n                    checked={onlyRated}\r\n                    onChange={() => setOnlyRated(!onlyRated)}\r\n                  />\r\n                }\r\n\r\n                label={i18n.t(\"reports.buttons.onlyRated\")}\r\n              />\r\n              <IconButton onClick={exportarGridParaExcel} aria-label=\"Exportar para Excel\">\r\n\r\n                <SaveAlt />\r\n              </IconButton>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => handleFilter(pageNumber)}\r\n                size=\"small\"\r\n              >{i18n.t(\"reports.buttons.filter\")}</Button>\r\n            </Grid>\r\n          </Grid>\r\n\r\n        </Paper>\r\n\r\n      </MainHeader>\r\n      <Paper\r\n        className={classes.mainPaperTable}\r\n        variant=\"outlined\"\r\n      >\r\n        <Table size=\"small\" id=\"grid-attendants\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {/* <TableCell padding=\"checkbox\" /> */}\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.id\")}</TableCell>\r\n              <TableCell align=\"left\">{i18n.t(\"reports.table.whatsapp\")}</TableCell>\r\n              <TableCell align=\"left\">{i18n.t(\"reports.table.contact\")}</TableCell>\r\n              <TableCell align=\"left\">{i18n.t(\"reports.table.user\")}</TableCell>\r\n              <TableCell align=\"left\">{i18n.t(\"reports.table.queue\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.status\")}</TableCell>\r\n              <TableCell align=\"left\">{i18n.t(\"reports.table.lastMessage\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.dateOpen\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.dateClose\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.supportTime\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.NPS\")}</TableCell>\r\n              <TableCell align=\"center\">{i18n.t(\"reports.table.actions\")}</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <>\r\n              {tickets.map((ticket) => (\r\n                <TableRow key={ticket.id}>\r\n                  <TableCell align=\"center\">{ticket.id}</TableCell>\r\n                  <TableCell align=\"left\">{ticket?.whatsappName}</TableCell>\r\n                  <TableCell align=\"left\">{ticket?.contactName}</TableCell>\r\n                  <TableCell align=\"left\">{ticket?.userName}</TableCell>\r\n                  <TableCell align=\"left\">{ticket?.queueName}</TableCell>\r\n                  <TableCell align=\"center\">{ticket?.status}</TableCell>\r\n                  <TableCell align=\"left\">{ticket?.lastMessage}</TableCell>\r\n                  <TableCell align=\"center\">{ticket?.createdAt}</TableCell>\r\n                  <TableCell align=\"center\">{ticket?.closedAt}</TableCell>\r\n                  <TableCell align=\"center\">{ticket?.supportTime}</TableCell>\r\n                  <TableCell align=\"center\">{ticket?.NPS}</TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <Typography\r\n                      noWrap\r\n                      component=\"span\"\r\n                      variant=\"body2\"\r\n                      color=\"textPrimary\"\r\n                    >\r\n                      <Tooltip title=\"Logs do Ticket\">\r\n                        <History\r\n                          onClick={() => {\r\n                            setOpenTicketMessageDialog(true)\r\n                            setTicketOpen(ticket)\r\n                          }}\r\n                          fontSize=\"small\"\r\n                          style={{\r\n                            color: blue[700],\r\n                            cursor: \"pointer\",\r\n                            marginLeft: 10,\r\n                            verticalAlign: \"middle\"\r\n                          }}\r\n                        />\r\n                      </Tooltip>\r\n                      <Tooltip title=\"Acessar Ticket\">\r\n                        <Forward\r\n                          onClick={() => { history.push(`/tickets/${ticket.uuid}`) }}\r\n                          fontSize=\"small\"\r\n                          style={{\r\n                            color: green[700],\r\n                            cursor: \"pointer\",\r\n                            marginLeft: 10,\r\n                            verticalAlign: \"middle\"\r\n                          }}\r\n                        />\r\n                      </Tooltip>\r\n                    </Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {loading && <TableRowSkeleton avatar columns={3} />}\r\n            </>\r\n          </TableBody>\r\n        </Table>\r\n\r\n      </Paper>\r\n\r\n      <div>\r\n        <Grid container>\r\n          <Grid item xs={12} sm={10} md={10}>\r\n\r\n            <Pagination\r\n              count={Math.ceil(totalTickets / pageSize)} // Calcula o nmero total de páginas com base no nmero total de tickets e no tamanho da página\r\n              page={pageNumber} // Define a página atual\r\n              onChange={(event, value) => handleFilter(value)} // Função de callback para mudanças de página\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} sm={2} md={2}>\r\n\r\n            <FormControl\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n            >\r\n              <InputLabel>\r\n                {i18n.t(\"tickets.search.ticketsPerPage\")}\r\n              </InputLabel>\r\n              <Select\r\n                labelId=\"dialog-select-prompt-label\"\r\n                id=\"dialog-select-prompt\"\r\n                name=\"pageSize\"\r\n                value={pageSize}\r\n                onChange={(e) => {\r\n                  setPageSize(e.target.value)\r\n                }}\r\n                label={i18n.t(\"tickets.search.ticketsPerPage\")}\r\n                fullWidth\r\n                MenuProps={{\r\n                  anchorOrigin: {\r\n                    vertical: \"center\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  transformOrigin: {\r\n                    vertical: \"center\",\r\n                    horizontal: \"left\",\r\n                  },\r\n                  getContentAnchorEl: null,\r\n                }}\r\n              >\r\n                <MenuItem value={5} >{\"5\"}</MenuItem>\r\n                <MenuItem value={10} >{\"10\"}</MenuItem>\r\n                <MenuItem value={20} >{\"20\"}</MenuItem>\r\n                <MenuItem value={50} >{\"50\"}</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </MainContainer >\r\n  );\r\n};\r\n\r\nexport default Reports;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}