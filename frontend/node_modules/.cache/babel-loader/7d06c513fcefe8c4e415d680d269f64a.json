{"ast":null,"code":"import React,{useState,useCallback,useContext,useEffect,useRef}from\"react\";import{useParams,useHistory}from\"react-router-dom\";import Paper from\"@material-ui/core/Paper\";import Hidden from\"@material-ui/core/Hidden\";import{makeStyles}from\"@material-ui/core/styles\";import TicketsManager from\"../../components/TicketsManagerTabs\";import Ticket from\"../../components/Ticket\";import{QueueSelectedProvider}from\"../../context/QueuesSelected/QueuesSelectedContext\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";import{i18n}from\"../../translate/i18n\";import{AuthContext}from\"../../context/Auth/AuthContext\";import api from\"../../services/api\";import{CircularProgress}from\"@material-ui/core\";import{getBackendUrl}from\"../../config\";import logo from\"../../assets/logo.png\";import logoDark from\"../../assets/logo-black.png\";const defaultTicketsManagerWidth=550;const minTicketsManagerWidth=404;const maxTicketsManagerWidth=700;const useStyles=makeStyles(theme=>({chatContainer:{flex:1,padding:\"2px\",height:\"calc(100% - 48px)\",overflowY:\"hidden\"},chatPapper:{display:\"flex\",height:\"100%\"},contactsWrapper:{display:\"flex\",height:\"100%\",flexDirection:\"column\",overflowY:\"hidden\",position:\"relative\"},messagesWrapper:{display:\"flex\",height:\"100%\",flexDirection:\"column\",flexGrow:1},welcomeMsg:{background:theme.palette.tabHeaderBackground,display:\"flex\",justifyContent:\"space-evenly\",alignItems:\"center\",height:\"100%\",textAlign:\"center\"},dragger:{width:\"5px\",cursor:\"ew-resize\",padding:\"4px 0 0\",borderTop:\"1px solid #ddd\",position:\"absolute\",top:0,right:0,bottom:0,zIndex:100,backgroundColor:\"#f4f7f9\",userSelect:\"none\"// Evita a seleção de texto no elemento de redimensionamento\n},logo:{logo:theme.logo,content:\"url(\"+(theme.mode===\"light\"?theme.calculatedLogoLight():theme.calculatedLogoDark())+\")\"}}));const TicketsCustom=()=>{const{user}=useContext(AuthContext);const classes=useStyles({ticketsManagerWidth:user.defaultTicketsManagerWidth||defaultTicketsManagerWidth});const{ticketId}=useParams();const[ticketsManagerWidth,setTicketsManagerWidth]=useState(0);const ticketsManagerWidthRef=useRef(ticketsManagerWidth);useEffect(()=>{if(user&&user.defaultTicketsManagerWidth){setTicketsManagerWidth(user.defaultTicketsManagerWidth);}},[user]);// useEffect(() => {\n// \tif (ticketId && currentTicket.uuid === undefined) {\n// \t\thistory.push(\"/tickets\");\n// \t}\n// }, [ticketId, currentTicket.uuid, history]);\nconst handleMouseDown=e=>{document.addEventListener(\"mouseup\",handleMouseUp,true);document.addEventListener(\"mousemove\",handleMouseMove,true);};const handleSaveContact=async value=>{if(value<404)value=404;await api.put(\"/users/toggleChangeWidht/\".concat(user.id),{defaultTicketsManagerWidth:value});};const handleMouseMove=useCallback(e=>{const newWidth=e.clientX-document.body.offsetLeft;if(newWidth>minTicketsManagerWidth&&newWidth<maxTicketsManagerWidth){ticketsManagerWidthRef.current=newWidth;setTicketsManagerWidth(newWidth);}},[]);const handleMouseUp=async()=>{document.removeEventListener(\"mouseup\",handleMouseUp,true);document.removeEventListener(\"mousemove\",handleMouseMove,true);const newWidth=ticketsManagerWidthRef.current;if(newWidth!==ticketsManagerWidth){await handleSaveContact(newWidth);}};return/*#__PURE__*/React.createElement(QueueSelectedProvider,null,/*#__PURE__*/React.createElement(\"div\",{className:classes.chatContainer},/*#__PURE__*/React.createElement(\"div\",{className:classes.chatPapper},/*#__PURE__*/React.createElement(\"div\",{className:classes.contactsWrapper,style:{width:ticketsManagerWidth}},/*#__PURE__*/React.createElement(TicketsManager,null),/*#__PURE__*/React.createElement(\"div\",{onMouseDown:e=>handleMouseDown(e),className:classes.dragger})),/*#__PURE__*/React.createElement(\"div\",{className:classes.messagesWrapper},ticketId?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Ticket,null)):/*#__PURE__*/React.createElement(Hidden,{only:[\"sm\",\"xs\"]},/*#__PURE__*/React.createElement(Paper,{square:true,variant:\"outlined\",className:classes.welcomeMsg},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"img\",{className:classes.logo,width:\"50%\",alt:\"\"})),i18n.t(\"chat.noTicketMessage\")),\"        \"))))));};export default TicketsCustom;","map":{"version":3,"names":["React","useState","useCallback","useContext","useEffect","useRef","useParams","useHistory","Paper","Hidden","makeStyles","TicketsManager","Ticket","QueueSelectedProvider","TicketsContext","i18n","AuthContext","api","CircularProgress","getBackendUrl","logo","logoDark","defaultTicketsManagerWidth","minTicketsManagerWidth","maxTicketsManagerWidth","useStyles","theme","chatContainer","flex","padding","height","overflowY","chatPapper","display","contactsWrapper","flexDirection","position","messagesWrapper","flexGrow","welcomeMsg","background","palette","tabHeaderBackground","justifyContent","alignItems","textAlign","dragger","width","cursor","borderTop","top","right","bottom","zIndex","backgroundColor","userSelect","content","mode","calculatedLogoLight","calculatedLogoDark","TicketsCustom","user","classes","ticketsManagerWidth","ticketId","setTicketsManagerWidth","ticketsManagerWidthRef","handleMouseDown","e","document","addEventListener","handleMouseUp","handleMouseMove","handleSaveContact","value","put","concat","id","newWidth","clientX","body","offsetLeft","current","removeEventListener","createElement","className","style","onMouseDown","Fragment","only","square","variant","alt","t"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/TicketsCustom/index.js"],"sourcesContent":["import React, { useState, useCallback, useContext, useEffect, useRef } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TicketsManager from \"../../components/TicketsManagerTabs\";\nimport Ticket from \"../../components/Ticket\";\n\nimport { QueueSelectedProvider } from \"../../context/QueuesSelected/QueuesSelectedContext\";\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\nimport { i18n } from \"../../translate/i18n\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport api from \"../../services/api\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport { getBackendUrl } from \"../../config\";\nimport logo from \"../../assets/logo.png\";\nimport logoDark from \"../../assets/logo-black.png\";\n\nconst defaultTicketsManagerWidth = 550;\nconst minTicketsManagerWidth = 404;\nconst maxTicketsManagerWidth = 700;\n\nconst useStyles = makeStyles((theme) => ({\n\tchatContainer: {\n\t\tflex: 1,\n\t\tpadding: \"2px\",\n\t\theight: `calc(100% - 48px)`,\n\t\toverflowY: \"hidden\",\n\t},\n\tchatPapper: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t},\n\tcontactsWrapper: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t\tflexDirection: \"column\",\n\t\toverflowY: \"hidden\",\n\t\tposition: \"relative\",\n\t},\n\tmessagesWrapper: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t\tflexDirection: \"column\",\n\t\tflexGrow: 1,\n\t},\n\twelcomeMsg: {\n\t\tbackground: theme.palette.tabHeaderBackground,\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-evenly\",\n\t\talignItems: \"center\",\n\t\theight: \"100%\",\n\t\ttextAlign: \"center\",\n\t},\n\tdragger: {\n\t\twidth: \"5px\",\n\t\tcursor: \"ew-resize\",\n\t\tpadding: \"4px 0 0\",\n\t\tborderTop: \"1px solid #ddd\",\n\t\tposition: \"absolute\",\n\t\ttop: 0,\n\t\tright: 0,\n\t\tbottom: 0,\n\t\tzIndex: 100,\n\t\tbackgroundColor: \"#f4f7f9\",\n\t\tuserSelect: \"none\", // Evita a seleção de texto no elemento de redimensionamento\n\t},\n\tlogo: {\n\t\tlogo: theme.logo,\n\t\tcontent: \"url(\" + (theme.mode === \"light\" ? theme.calculatedLogoLight() : theme.calculatedLogoDark()) + \")\"\n\t},\n}));\n\nconst TicketsCustom = () => {\n\tconst { user } = useContext(AuthContext);\n\n\tconst classes = useStyles({ ticketsManagerWidth: user.defaultTicketsManagerWidth || defaultTicketsManagerWidth });\n\n\tconst { ticketId } = useParams();\n\n\tconst [ticketsManagerWidth, setTicketsManagerWidth] = useState(0);\n\tconst ticketsManagerWidthRef = useRef(ticketsManagerWidth);\n\n\tuseEffect(() => {\n\t\tif (user && user.defaultTicketsManagerWidth) {\n\t\t\tsetTicketsManagerWidth(user.defaultTicketsManagerWidth);\n\t\t}\n\t}, [user]);\n\n\t// useEffect(() => {\n\t// \tif (ticketId && currentTicket.uuid === undefined) {\n\t// \t\thistory.push(\"/tickets\");\n\t// \t}\n\t// }, [ticketId, currentTicket.uuid, history]);\n\n\tconst handleMouseDown = (e) => {\n\t\tdocument.addEventListener(\"mouseup\", handleMouseUp, true);\n\t\tdocument.addEventListener(\"mousemove\", handleMouseMove, true);\n\t};\n\tconst handleSaveContact = async value => {\n\t\tif (value < 404)\n\t\t\tvalue = 404\n\t\tawait api.put(`/users/toggleChangeWidht/${user.id}`, { defaultTicketsManagerWidth: value });\n\n\t}\n\tconst handleMouseMove = useCallback(\n\t\t(e) => {\n\t\t\tconst newWidth = e.clientX - document.body.offsetLeft;\n\t\t\tif (\n\t\t\t\tnewWidth > minTicketsManagerWidth &&\n\t\t\t\tnewWidth < maxTicketsManagerWidth\n\t\t\t) {\n\t\t\t\tticketsManagerWidthRef.current = newWidth;\n\t\t\t\tsetTicketsManagerWidth(newWidth);\n\t\t\t}\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleMouseUp = async () => {\n\t\tdocument.removeEventListener(\"mouseup\", handleMouseUp, true);\n\t\tdocument.removeEventListener(\"mousemove\", handleMouseMove, true);\n\n\t\tconst newWidth = ticketsManagerWidthRef.current;\n\n\t\tif (newWidth !== ticketsManagerWidth) {\n\t\t\tawait handleSaveContact(newWidth);\n\t\t}\n\t};\n\n\treturn (\n\t\t<QueueSelectedProvider>\n\t\t\t<div className={classes.chatContainer}>\n\t\t\t\t<div className={classes.chatPapper}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classes.contactsWrapper}\n\t\t\t\t\t\tstyle={{ width: ticketsManagerWidth }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TicketsManager />\n\t\t\t\t\t\t<div onMouseDown={e => handleMouseDown(e)} className={classes.dragger} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={classes.messagesWrapper}>\n\t\t\t\t\t\t{ticketId ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{/* <Suspense fallback={<CircularProgress />}> */}\n\t\t\t\t\t\t\t\t<Ticket />\n\t\t\t\t\t\t\t\t{/* </Suspense> */}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Hidden only={[\"sm\", \"xs\"]}>\n\t\t\t\t\t\t\t\t<Paper square variant=\"outlined\" className={classes.welcomeMsg}>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<center>\n\t\t\t\t\t\t\t\t\t\t\t<img className={classes.logo} width=\"50%\" alt=\"\" />\n\t\t\t\t\t\t\t\t\t\t</center>\n\t\t\t\t\t\t\t\t\t\t{i18n.t(\"chat.noTicketMessage\")}\n\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t</Hidden>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</QueueSelectedProvider>\n\t);\n};\n\nexport default TicketsCustom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}