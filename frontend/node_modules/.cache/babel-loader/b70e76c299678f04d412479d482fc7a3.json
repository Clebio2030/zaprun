{"ast":null,"code":"import React,{useEffect,useReducer,useState,useContext}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import toastError from\"../../errors/toastError\";import Popover from\"@material-ui/core/Popover\";import AnnouncementIcon from\"@material-ui/icons/Announcement\";import{i18n}from\"../../translate/i18n\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{Avatar,Badge,IconButton,List,ListItem,ListItemAvatar,ListItemText,Dialog,Paper,Typography,DialogTitle,DialogContent,DialogActions,Button,DialogContentText}from\"@material-ui/core\";import api from\"../../services/api\";import{isArray}from\"lodash\";import moment from\"moment\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nconst useStyles=makeStyles(theme=>({mainPaper:{flex:1,maxHeight:300,maxWidth:500,padding:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles}}));function AnnouncementDialog(_ref){let{announcement,open,handleClose}=_ref;// const getMediaPath = (filename) => {\n//   return path.join(`${process.env.REACT_APP_BACKEND_URL}`,\"public\", \"announcements\",`${filename}`);\n// };\nreturn/*#__PURE__*/React.createElement(Dialog,{open:open,onClose:()=>handleClose(),\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"alert-dialog-title\"},announcement.title),/*#__PURE__*/React.createElement(DialogContent,null,announcement.mediaPath&&/*#__PURE__*/React.createElement(\"div\",{style:{border:\"1px solid #f1f1f1\",margin:\"0 auto 20px\",textAlign:\"center\",width:\"95%\",height:300,backgroundRepeat:\"no-repeat\",backgroundSize:\"cover\",backgroundPosition:\"center\"}},/*#__PURE__*/React.createElement(\"img\",{alt:\"announcement image\",src:announcement.mediaPath,style:{width:\"95%\",height:\"100%\"}})),/*#__PURE__*/React.createElement(DialogContentText,{id:\"alert-dialog-description\",style:{whiteSpace:\"pre-line\"}},announcement.text)),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:()=>handleClose(),color:\"primary\",autoFocus:true},\"Fechar\")));}const reducer=(state,action)=>{if(action.type===\"LOAD_ANNOUNCEMENTS\"){const announcements=action.payload;const newAnnouncements=[];if(isArray(announcements)){announcements.forEach(announcement=>{const announcementIndex=state.findIndex(u=>u.id===announcement.id);if(announcementIndex!==-1){state[announcementIndex]=announcement;}else{newAnnouncements.push(announcement);}});}return[...state,...newAnnouncements];}if(action.type===\"UPDATE_ANNOUNCEMENTS\"){const announcement=action.payload;const announcementIndex=state.findIndex(u=>u.id===announcement.id);if(announcementIndex!==-1){state[announcementIndex]=announcement;return[...state];}else{return[announcement,...state];}}if(action.type===\"DELETE_ANNOUNCEMENT\"){const announcementId=action.payload;const announcementIndex=state.findIndex(u=>u.id===announcementId);if(announcementIndex!==-1){state.splice(announcementIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};export default function AnnouncementsPopover(){const classes=useStyles();const[loading,setLoading]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[searchParam]=useState(\"\");const[announcements,dispatch]=useReducer(reducer,[]);const[invisible,setInvisible]=useState(false);const[announcement,setAnnouncement]=useState({});const[showAnnouncementDialog,setShowAnnouncementDialog]=useState(false);//   const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{fetchAnnouncements();},500);return()=>clearTimeout(delayDebounceFn);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[searchParam,pageNumber]);useEffect(()=>{if(user.companyId){const companyId=user.companyId;//    const socket = socketManager.GetSocket();\nconst onCompanyAnnouncement=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_ANNOUNCEMENTS\",payload:data.record});setInvisible(false);}if(data.action===\"delete\"){dispatch({type:\"DELETE_ANNOUNCEMENT\",payload:+data.id});}};socket.on(\"company-announcement\",onCompanyAnnouncement);return()=>{socket.off(\"company-announcement\",onCompanyAnnouncement);};}},[user]);const fetchAnnouncements=async()=>{try{const{data}=await api.get(\"/announcements/\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_ANNOUNCEMENTS\",payload:data.records});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};const handleClick=event=>{setAnchorEl(event.currentTarget);setInvisible(true);};const handleClose=()=>{setAnchorEl(null);};const borderPriority=priority=>{if(priority===1){return\"4px solid #b81111\";}if(priority===2){return\"4px solid orange\";}if(priority===3){return\"4px solid grey\";}};const handleShowAnnouncementDialog=record=>{setAnnouncement(record);setShowAnnouncementDialog(true);setAnchorEl(null);};const open=Boolean(anchorEl);const id=open?\"simple-popover\":undefined;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(AnnouncementDialog,{announcement:announcement,open:showAnnouncementDialog,handleClose:()=>setShowAnnouncementDialog(false)}),/*#__PURE__*/React.createElement(IconButton,{variant:\"contained\",\"aria-describedby\":id,onClick:handleClick,style:{color:\"white\"}},/*#__PURE__*/React.createElement(Badge,{color:\"secondary\",variant:\"dot\",invisible:invisible||announcements.length<1},/*#__PURE__*/React.createElement(AnnouncementIcon,null))),/*#__PURE__*/React.createElement(Popover,{id:id,open:open,anchorEl:anchorEl,onClose:handleClose,anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},transformOrigin:{vertical:\"top\",horizontal:\"center\"}},/*#__PURE__*/React.createElement(Paper,{variant:\"outlined\",onScroll:handleScroll,className:classes.mainPaper},/*#__PURE__*/React.createElement(List,{component:\"nav\",\"aria-label\":\"main mailbox folders\",style:{minWidth:300}},isArray(announcements)&&announcements.map((item,key)=>/*#__PURE__*/React.createElement(ListItem,{key:key,style:{background:key%2===0?\"primary\":\"secondary\",border:\"1px solid #eee\",borderLeft:borderPriority(item.priority),cursor:\"pointer\"},onClick:()=>handleShowAnnouncementDialog(item)},item.mediaPath&&/*#__PURE__*/React.createElement(ListItemAvatar,null,/*#__PURE__*/React.createElement(Avatar,{src:item.mediaPath})),/*#__PURE__*/React.createElement(ListItemText,{primary:item.title,secondary:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Typography,{component:\"span\",style:{fontSize:12}},moment(item.createdAt).format(\"DD/MM/YYYY\")),/*#__PURE__*/React.createElement(\"span\",{style:{marginTop:5,display:\"block\"}}),/*#__PURE__*/React.createElement(Typography,{component:\"span\",variant:\"body2\"},item.text))}))),isArray(announcements)&&announcements.length===0&&/*#__PURE__*/React.createElement(ListItemText,{primary:i18n.t(\"mainDrawer.appBar.notRegister\")})))));}","map":{"version":3,"names":["React","useEffect","useReducer","useState","useContext","makeStyles","toastError","Popover","AnnouncementIcon","i18n","AuthContext","Avatar","Badge","IconButton","List","ListItem","ListItemAvatar","ListItemText","Dialog","Paper","Typography","DialogTitle","DialogContent","DialogActions","Button","DialogContentText","api","isArray","moment","useStyles","theme","mainPaper","flex","maxHeight","maxWidth","padding","spacing","overflowY","scrollbarStyles","AnnouncementDialog","_ref","announcement","open","handleClose","createElement","onClose","id","title","mediaPath","style","border","margin","textAlign","width","height","backgroundRepeat","backgroundSize","backgroundPosition","alt","src","whiteSpace","text","onClick","color","autoFocus","reducer","state","action","type","announcements","payload","newAnnouncements","forEach","announcementIndex","findIndex","u","push","announcementId","splice","AnnouncementsPopover","classes","loading","setLoading","anchorEl","setAnchorEl","pageNumber","setPageNumber","hasMore","setHasMore","searchParam","dispatch","invisible","setInvisible","setAnnouncement","showAnnouncementDialog","setShowAnnouncementDialog","user","socket","delayDebounceFn","setTimeout","fetchAnnouncements","clearTimeout","companyId","onCompanyAnnouncement","data","record","on","off","get","params","records","err","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","handleClick","event","borderPriority","priority","handleShowAnnouncementDialog","Boolean","undefined","variant","length","anchorOrigin","vertical","horizontal","transformOrigin","onScroll","className","component","minWidth","map","item","key","background","borderLeft","cursor","primary","secondary","Fragment","fontSize","createdAt","format","marginTop","display","t"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/AnnouncementsPopover/index.js"],"sourcesContent":["import React, { useEffect, useReducer, useState, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport toastError from \"../../errors/toastError\";\r\nimport Popover from \"@material-ui/core/Popover\";\r\nimport AnnouncementIcon from \"@material-ui/icons/Announcement\";\r\n\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\n\r\nimport {\r\n  Avatar,\r\n  Badge,\r\n  IconButton,\r\n  List,\r\n  ListItem,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Dialog,\r\n  Paper,\r\n  Typography,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  DialogContentText,\r\n} from \"@material-ui/core\";\r\nimport api from \"../../services/api\";\r\nimport { isArray } from \"lodash\";\r\nimport moment from \"moment\";\r\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  mainPaper: {\r\n    flex: 1,\r\n    maxHeight: 300,\r\n    maxWidth: 500,\r\n    padding: theme.spacing(1),\r\n    overflowY: \"scroll\",\r\n    ...theme.scrollbarStyles,\r\n  },\r\n}));\r\n\r\nfunction AnnouncementDialog({ announcement, open, handleClose }) {\r\n  // const getMediaPath = (filename) => {\r\n  //   return path.join(`${process.env.REACT_APP_BACKEND_URL}`,\"public\", \"announcements\",`${filename}`);\r\n  // };\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={() => handleClose()}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">{announcement.title}</DialogTitle>\r\n      <DialogContent>\r\n        {announcement.mediaPath && (\r\n          <div\r\n            style={{\r\n              border: \"1px solid #f1f1f1\",\r\n              margin: \"0 auto 20px\",\r\n              textAlign: \"center\",\r\n              width: \"95%\",\r\n              height: 300,\r\n              backgroundRepeat: \"no-repeat\",\r\n              backgroundSize: \"cover\",\r\n              backgroundPosition: \"center\",\r\n            }}\r\n          >\r\n            <img\r\n              alt={`announcement image`}\r\n              src={announcement.mediaPath}\r\n              style={{\r\n                width: \"95%\",\r\n                height: \"100%\",\r\n              }}\r\n            />\r\n          </div>\r\n        )}\r\n        <DialogContentText id=\"alert-dialog-description\" style={{ whiteSpace: \"pre-line\" }}>\r\n          {announcement.text}\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => handleClose()} color=\"primary\" autoFocus>\r\n          Fechar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  if (action.type === \"LOAD_ANNOUNCEMENTS\") {\r\n    const announcements = action.payload;\r\n    const newAnnouncements = [];\r\n\r\n    if (isArray(announcements)) {\r\n      announcements.forEach((announcement) => {\r\n        const announcementIndex = state.findIndex(\r\n          (u) => u.id === announcement.id\r\n        );\r\n        if (announcementIndex !== -1) {\r\n          state[announcementIndex] = announcement;\r\n        } else {\r\n          newAnnouncements.push(announcement);\r\n        }\r\n      });\r\n    }\r\n\r\n    return [...state, ...newAnnouncements];\r\n  }\r\n\r\n  if (action.type === \"UPDATE_ANNOUNCEMENTS\") {\r\n    const announcement = action.payload;\r\n    const announcementIndex = state.findIndex((u) => u.id === announcement.id);\r\n\r\n    if (announcementIndex !== -1) {\r\n      state[announcementIndex] = announcement;\r\n      return [...state];\r\n    } else {\r\n      return [announcement, ...state];\r\n    }\r\n  }\r\n\r\n  if (action.type === \"DELETE_ANNOUNCEMENT\") {\r\n    const announcementId = action.payload;\r\n\r\n    const announcementIndex = state.findIndex((u) => u.id === announcementId);\r\n    if (announcementIndex !== -1) {\r\n      state.splice(announcementIndex, 1);\r\n    }\r\n    return [...state];\r\n  }\r\n\r\n  if (action.type === \"RESET\") {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default function AnnouncementsPopover() {\r\n  const classes = useStyles();\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [pageNumber, setPageNumber] = useState(1);\r\n  const [hasMore, setHasMore] = useState(false);\r\n  const [searchParam] = useState(\"\");\r\n  const [announcements, dispatch] = useReducer(reducer, []);\r\n  const [invisible, setInvisible] = useState(false);\r\n  const [announcement, setAnnouncement] = useState({});\r\n  const [showAnnouncementDialog, setShowAnnouncementDialog] = useState(false);\r\n//   const socketManager = useContext(SocketContext);\r\n  const { user, socket } = useContext(AuthContext);\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: \"RESET\" });\r\n    setPageNumber(1);\r\n  }, [searchParam]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    const delayDebounceFn = setTimeout(() => {\r\n      fetchAnnouncements();\r\n    }, 500);\r\n    return () => clearTimeout(delayDebounceFn);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [searchParam, pageNumber]);\r\n\r\n  useEffect(() => {\r\n    if (user.companyId) {\r\n      const companyId = user.companyId;\r\n//    const socket = socketManager.GetSocket();\r\n\r\n      const onCompanyAnnouncement = (data) => {\r\n        if (data.action === \"update\" || data.action === \"create\") {\r\n          dispatch({ type: \"UPDATE_ANNOUNCEMENTS\", payload: data.record });\r\n          setInvisible(false);\r\n        }\r\n        if (data.action === \"delete\") {\r\n          dispatch({ type: \"DELETE_ANNOUNCEMENT\", payload: +data.id });\r\n        }\r\n      };\r\n      socket.on(`company-announcement`, onCompanyAnnouncement);\r\n\r\n      return () => {\r\n        socket.off(`company-announcement`, onCompanyAnnouncement);\r\n      };\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchAnnouncements = async () => {\r\n    try {\r\n      const { data } = await api.get(\"/announcements/\", {\r\n        params: { searchParam, pageNumber },\r\n      });\r\n      dispatch({ type: \"LOAD_ANNOUNCEMENTS\", payload: data.records });\r\n      setHasMore(data.hasMore);\r\n      setLoading(false);\r\n    } catch (err) {\r\n      toastError(err);\r\n    }\r\n  };\r\n\r\n  const loadMore = () => {\r\n    setPageNumber((prevState) => prevState + 1);\r\n  };\r\n\r\n  const handleScroll = (e) => {\r\n    if (!hasMore || loading) return;\r\n    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n    if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n      loadMore();\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    setInvisible(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const borderPriority = (priority) => {\r\n    if (priority === 1) {\r\n      return \"4px solid #b81111\";\r\n    }\r\n    if (priority === 2) {\r\n      return \"4px solid orange\";\r\n    }\r\n    if (priority === 3) {\r\n      return \"4px solid grey\";\r\n    }\r\n  };\r\n\r\n\r\n  const handleShowAnnouncementDialog = (record) => {\r\n    setAnnouncement(record);\r\n    setShowAnnouncementDialog(true);\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? \"simple-popover\" : undefined;\r\n\r\n  return (\r\n    <div>\r\n      <AnnouncementDialog\r\n        announcement={announcement}\r\n        open={showAnnouncementDialog}\r\n        handleClose={() => setShowAnnouncementDialog(false)}\r\n      />\r\n      <IconButton\r\n        variant=\"contained\"\r\n        aria-describedby={id}\r\n        onClick={handleClick}\r\n        style={{ color: \"white\" }}\r\n      >\r\n        <Badge\r\n          color=\"secondary\"\r\n          variant=\"dot\"\r\n          invisible={invisible || announcements.length < 1}\r\n        >\r\n          <AnnouncementIcon />\r\n        </Badge>\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"center\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n      >\r\n        <Paper\r\n          variant=\"outlined\"\r\n          onScroll={handleScroll}\r\n          className={classes.mainPaper}\r\n        >\r\n          <List\r\n            component=\"nav\"\r\n            aria-label=\"main mailbox folders\"\r\n            style={{ minWidth: 300 }}\r\n          >\r\n            {isArray(announcements) &&\r\n              announcements.map((item, key) => (\r\n                <ListItem\r\n                  key={key}\r\n                  style={{\r\n                    background: key % 2 === 0 ? \"primary\" : \"secondary\",\r\n                    border: \"1px solid #eee\",\r\n                    borderLeft: borderPriority(item.priority),\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  onClick={() => handleShowAnnouncementDialog(item)}\r\n                >\r\n                  {item.mediaPath && (\r\n                    <ListItemAvatar>\r\n                      <Avatar\r\n                        src={item.mediaPath}\r\n                      />\r\n                    </ListItemAvatar>\r\n                  )}\r\n                  <ListItemText\r\n                    primary={item.title}\r\n                    secondary={\r\n                      <>\r\n                        <Typography component=\"span\" style={{ fontSize: 12 }}>\r\n                          {moment(item.createdAt).format(\"DD/MM/YYYY\")}\r\n                        </Typography>\r\n                        <span style={{ marginTop: 5, display: \"block\" }}></span>\r\n                        <Typography component=\"span\" variant=\"body2\">\r\n                          {item.text}\r\n                        </Typography>\r\n                      </>\r\n                    }\r\n                  />\r\n                </ListItem>\r\n              ))}\r\n            {isArray(announcements) && announcements.length === 0 && (\r\n              <ListItemText primary={i18n.t(\"mainDrawer.appBar.notRegister\")} />\r\n            )}\r\n          </List>\r\n        </Paper>\r\n      </Popover>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}