{"ast":null,"code":"import React,{useState,useEffect,useReducer,useCallback,useContext}from\"react\";import{toast}from\"react-toastify\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Button from\"@material-ui/core/Button\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import IconButton from\"@material-ui/core/IconButton\";import SearchIcon from\"@material-ui/icons/Search\";import TextField from\"@material-ui/core/TextField\";import InputAdornment from\"@material-ui/core/InputAdornment\";import DeleteOutlineIcon from\"@material-ui/icons/DeleteOutline\";import EditIcon from\"@material-ui/icons/Edit\";import MainContainer from\"../../components/MainContainer\";import MainHeader from\"../../components/MainHeader\";import MainHeaderButtonsWrapper from\"../../components/MainHeaderButtonsWrapper\";import Title from\"../../components/Title\";import api from\"../../services/api\";import{i18n}from\"../../translate/i18n\";import TableRowSkeleton from\"../../components/TableRowSkeleton\";import FileModal from\"../../components/FileModal\";import ConfirmationModal from\"../../components/ConfirmationModal\";import toastError from\"../../errors/toastError\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport{AuthContext}from\"../../context/Auth/AuthContext\";import ForbiddenPage from\"../../components/ForbiddenPage\";const reducer=(state,action)=>{if(action.type===\"LOAD_FILES\"){const files=action.payload;const newFiles=[];files.forEach(fileList=>{const fileListIndex=state.findIndex(s=>s.id===fileList.id);if(fileListIndex!==-1){state[fileListIndex]=fileList;}else{newFiles.push(fileList);}});return[...state,...newFiles];}if(action.type===\"UPDATE_FILES\"){const fileList=action.payload;const fileListIndex=state.findIndex(s=>s.id===fileList.id);if(fileListIndex!==-1){state[fileListIndex]=fileList;return[...state];}else{return[fileList,...state];}}if(action.type===\"DELETE_FILE\"){const fileListId=action.payload;const fileListIndex=state.findIndex(s=>s.id===fileListId);if(fileListIndex!==-1){state.splice(fileListIndex,1);}return[...state];}if(action.type===\"RESET\"){return[];}};const useStyles=makeStyles(theme=>({mainPaper:{flex:1,padding:theme.spacing(1),overflowY:\"scroll\",...theme.scrollbarStyles}}));const FileLists=()=>{const classes=useStyles();//   const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);const[loading,setLoading]=useState(false);const[pageNumber,setPageNumber]=useState(1);const[hasMore,setHasMore]=useState(false);const[selectedFileList,setSelectedFileList]=useState(null);const[deletingFileList,setDeletingFileList]=useState(null);const[confirmModalOpen,setConfirmModalOpen]=useState(false);const[searchParam,setSearchParam]=useState(\"\");const[files,dispatch]=useReducer(reducer,[]);const[fileListModalOpen,setFileListModalOpen]=useState(false);const fetchFileLists=useCallback(async()=>{try{const{data}=await api.get(\"/files/\",{params:{searchParam,pageNumber}});dispatch({type:\"LOAD_FILES\",payload:data.files});setHasMore(data.hasMore);setLoading(false);}catch(err){toastError(err);}},[searchParam,pageNumber]);useEffect(()=>{dispatch({type:\"RESET\"});setPageNumber(1);},[searchParam]);useEffect(()=>{setLoading(true);const delayDebounceFn=setTimeout(()=>{fetchFileLists();},500);return()=>clearTimeout(delayDebounceFn);},[searchParam,pageNumber,fetchFileLists]);useEffect(()=>{// const socket = socketManager.GetSocket(user.companyId, user.id);\nconst onFileEvent=data=>{if(data.action===\"update\"||data.action===\"create\"){dispatch({type:\"UPDATE_FILES\",payload:data.files});}if(data.action===\"delete\"){dispatch({type:\"DELETE_FILE\",payload:+data.fileId});}};socket.on(\"company-\".concat(user.companyId,\"-file\"),onFileEvent);return()=>{socket.off(\"company-\".concat(user.companyId,\"-file\"),onFileEvent);};},[socket]);const handleOpenFileListModal=()=>{setSelectedFileList(null);setFileListModalOpen(true);};const handleCloseFileListModal=()=>{setSelectedFileList(null);setFileListModalOpen(false);};const handleSearch=event=>{setSearchParam(event.target.value.toLowerCase());};const handleEditFileList=fileList=>{setSelectedFileList(fileList);setFileListModalOpen(true);};const handleDeleteFileList=async fileListId=>{try{await api.delete(\"/files/\".concat(fileListId));toast.success(i18n.t(\"files.toasts.deleted\"));}catch(err){toastError(err);}setDeletingFileList(null);setSearchParam(\"\");setPageNumber(1);dispatch({type:\"RESET\"});setPageNumber(1);await fetchFileLists();};const loadMore=()=>{setPageNumber(prevState=>prevState+1);};const handleScroll=e=>{if(!hasMore||loading)return;const{scrollTop,scrollHeight,clientHeight}=e.currentTarget;if(scrollHeight-(scrollTop+100)<clientHeight){loadMore();}};return/*#__PURE__*/React.createElement(MainContainer,null,/*#__PURE__*/React.createElement(ConfirmationModal,{title:deletingFileList&&\"\".concat(i18n.t(\"files.confirmationModal.deleteTitle\")),open:confirmModalOpen,onClose:setConfirmModalOpen,onConfirm:()=>handleDeleteFileList(deletingFileList.id)},i18n.t(\"files.confirmationModal.deleteMessage\")),/*#__PURE__*/React.createElement(FileModal,{open:fileListModalOpen,onClose:handleCloseFileListModal,reload:fetchFileLists,\"aria-labelledby\":\"form-dialog-title\",fileListId:selectedFileList&&selectedFileList.id}),user.profile===\"user\"?/*#__PURE__*/React.createElement(ForbiddenPage,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(MainHeader,null,/*#__PURE__*/React.createElement(Title,null,i18n.t(\"files.title\"),\" (\",files.length,\")\"),/*#__PURE__*/React.createElement(MainHeaderButtonsWrapper,null,/*#__PURE__*/React.createElement(TextField,{placeholder:i18n.t(\"contacts.searchPlaceholder\"),type:\"search\",value:searchParam,onChange:handleSearch,InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(SearchIcon,{style:{color:\"gray\"}}))}}),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",onClick:handleOpenFileListModal},i18n.t(\"files.buttons.add\")))),/*#__PURE__*/React.createElement(Paper,{className:classes.mainPaper,variant:\"outlined\",onScroll:handleScroll},/*#__PURE__*/React.createElement(Table,{size:\"small\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"files.table.name\")),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},i18n.t(\"files.table.actions\")))),/*#__PURE__*/React.createElement(TableBody,null,/*#__PURE__*/React.createElement(React.Fragment,null,files.map(fileList=>/*#__PURE__*/React.createElement(TableRow,{key:fileList.id},/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},fileList.name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:()=>handleEditFileList(fileList)},/*#__PURE__*/React.createElement(EditIcon,null)),/*#__PURE__*/React.createElement(IconButton,{size:\"small\",onClick:e=>{setConfirmModalOpen(true);setDeletingFileList(fileList);}},/*#__PURE__*/React.createElement(DeleteOutlineIcon,null))))),loading&&/*#__PURE__*/React.createElement(TableRowSkeleton,{columns:4})))))));};export default FileLists;","map":{"version":3,"names":["React","useState","useEffect","useReducer","useCallback","useContext","toast","makeStyles","Paper","Button","Table","TableBody","TableCell","TableHead","TableRow","IconButton","SearchIcon","TextField","InputAdornment","DeleteOutlineIcon","EditIcon","MainContainer","MainHeader","MainHeaderButtonsWrapper","Title","api","i18n","TableRowSkeleton","FileModal","ConfirmationModal","toastError","AuthContext","ForbiddenPage","reducer","state","action","type","files","payload","newFiles","forEach","fileList","fileListIndex","findIndex","s","id","push","fileListId","splice","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","FileLists","classes","user","socket","loading","setLoading","pageNumber","setPageNumber","hasMore","setHasMore","selectedFileList","setSelectedFileList","deletingFileList","setDeletingFileList","confirmModalOpen","setConfirmModalOpen","searchParam","setSearchParam","dispatch","fileListModalOpen","setFileListModalOpen","fetchFileLists","data","get","params","err","delayDebounceFn","setTimeout","clearTimeout","onFileEvent","fileId","on","concat","companyId","off","handleOpenFileListModal","handleCloseFileListModal","handleSearch","event","target","value","toLowerCase","handleEditFileList","handleDeleteFileList","delete","success","t","loadMore","prevState","handleScroll","e","scrollTop","scrollHeight","clientHeight","currentTarget","createElement","title","open","onClose","onConfirm","reload","profile","Fragment","length","placeholder","onChange","InputProps","startAdornment","position","style","color","variant","onClick","className","onScroll","size","align","map","key","name","columns"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/pages/Files/index.js"],"sourcesContent":["import React, {\r\n    useState,\r\n    useEffect,\r\n    useReducer,\r\n    useCallback,\r\n    useContext,\r\n} from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\n\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport MainContainer from \"../../components/MainContainer\";\r\nimport MainHeader from \"../../components/MainHeader\";\r\nimport MainHeaderButtonsWrapper from \"../../components/MainHeaderButtonsWrapper\";\r\nimport Title from \"../../components/Title\";\r\n\r\nimport api from \"../../services/api\";\r\nimport { i18n } from \"../../translate/i18n\";\r\nimport TableRowSkeleton from \"../../components/TableRowSkeleton\";\r\nimport FileModal from \"../../components/FileModal\";\r\nimport ConfirmationModal from \"../../components/ConfirmationModal\";\r\nimport toastError from \"../../errors/toastError\";\r\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\r\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\r\nimport ForbiddenPage from \"../../components/ForbiddenPage\";\r\n\r\nconst reducer = (state, action) => {\r\n    if (action.type === \"LOAD_FILES\") {\r\n        const files = action.payload;\r\n        const newFiles = [];\r\n\r\n        files.forEach((fileList) => {\r\n            const fileListIndex = state.findIndex((s) => s.id === fileList.id);\r\n            if (fileListIndex !== -1) {\r\n                state[fileListIndex] = fileList;\r\n            } else {\r\n                newFiles.push(fileList);\r\n            }\r\n        });\r\n\r\n        return [...state, ...newFiles];\r\n    }\r\n\r\n    if (action.type === \"UPDATE_FILES\") {\r\n        const fileList = action.payload;\r\n        const fileListIndex = state.findIndex((s) => s.id === fileList.id);\r\n\r\n        if (fileListIndex !== -1) {\r\n            state[fileListIndex] = fileList;\r\n            return [...state];\r\n        } else {\r\n            return [fileList, ...state];\r\n        }\r\n    }\r\n\r\n    if (action.type === \"DELETE_FILE\") {\r\n        const fileListId = action.payload;\r\n\r\n        const fileListIndex = state.findIndex((s) => s.id === fileListId);\r\n        if (fileListIndex !== -1) {\r\n            state.splice(fileListIndex, 1);\r\n        }\r\n        return [...state];\r\n    }\r\n\r\n    if (action.type === \"RESET\") {\r\n        return [];\r\n    }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    mainPaper: {\r\n        flex: 1,\r\n        padding: theme.spacing(1),\r\n        overflowY: \"scroll\",\r\n        ...theme.scrollbarStyles,\r\n    },\r\n}));\r\n\r\nconst FileLists = () => {\r\n    const classes = useStyles();\r\n\r\n    //   const socketManager = useContext(SocketContext);\r\n    const { user, socket } = useContext(AuthContext);\r\n\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n    const [hasMore, setHasMore] = useState(false);\r\n    const [selectedFileList, setSelectedFileList] = useState(null);\r\n    const [deletingFileList, setDeletingFileList] = useState(null);\r\n    const [confirmModalOpen, setConfirmModalOpen] = useState(false);\r\n    const [searchParam, setSearchParam] = useState(\"\");\r\n    const [files, dispatch] = useReducer(reducer, []);\r\n    const [fileListModalOpen, setFileListModalOpen] = useState(false);\r\n\r\n    const fetchFileLists = useCallback(async () => {\r\n        try {\r\n            const { data } = await api.get(\"/files/\", {\r\n                params: { searchParam, pageNumber },\r\n            });\r\n            dispatch({ type: \"LOAD_FILES\", payload: data.files });\r\n            setHasMore(data.hasMore);\r\n            setLoading(false);\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n    }, [searchParam, pageNumber]);\r\n\r\n    useEffect(() => {\r\n        dispatch({ type: \"RESET\" });\r\n        setPageNumber(1);\r\n    }, [searchParam]);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        const delayDebounceFn = setTimeout(() => {\r\n            fetchFileLists();\r\n        }, 500);\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchParam, pageNumber, fetchFileLists]);\r\n\r\n    useEffect(() => {\r\n        // const socket = socketManager.GetSocket(user.companyId, user.id);\r\n\r\n        const onFileEvent = (data) => {\r\n            if (data.action === \"update\" || data.action === \"create\") {\r\n                dispatch({ type: \"UPDATE_FILES\", payload: data.files });\r\n            }\r\n\r\n            if (data.action === \"delete\") {\r\n                dispatch({ type: \"DELETE_FILE\", payload: +data.fileId });\r\n            }\r\n        };\r\n\r\n        socket.on(`company-${user.companyId}-file`, onFileEvent);\r\n        return () => {\r\n            socket.off(`company-${user.companyId}-file`, onFileEvent);\r\n        };\r\n    }, [socket]);\r\n\r\n    const handleOpenFileListModal = () => {\r\n        setSelectedFileList(null);\r\n        setFileListModalOpen(true);\r\n    };\r\n\r\n    const handleCloseFileListModal = () => {\r\n        setSelectedFileList(null);\r\n        setFileListModalOpen(false);\r\n    };\r\n\r\n    const handleSearch = (event) => {\r\n        setSearchParam(event.target.value.toLowerCase());\r\n    };\r\n\r\n    const handleEditFileList = (fileList) => {\r\n        setSelectedFileList(fileList);\r\n        setFileListModalOpen(true);\r\n    };\r\n\r\n    const handleDeleteFileList = async (fileListId) => {\r\n        try {\r\n            await api.delete(`/files/${fileListId}`);\r\n            toast.success(i18n.t(\"files.toasts.deleted\"));\r\n        } catch (err) {\r\n            toastError(err);\r\n        }\r\n        setDeletingFileList(null);\r\n        setSearchParam(\"\");\r\n        setPageNumber(1);\r\n\r\n        dispatch({ type: \"RESET\" });\r\n        setPageNumber(1);\r\n        await fetchFileLists();\r\n    };\r\n\r\n    const loadMore = () => {\r\n        setPageNumber((prevState) => prevState + 1);\r\n    };\r\n\r\n    const handleScroll = (e) => {\r\n        if (!hasMore || loading) return;\r\n        const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;\r\n        if (scrollHeight - (scrollTop + 100) < clientHeight) {\r\n            loadMore();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <MainContainer>\r\n            <ConfirmationModal\r\n                title={deletingFileList && `${i18n.t(\"files.confirmationModal.deleteTitle\")}`}\r\n                open={confirmModalOpen}\r\n                onClose={setConfirmModalOpen}\r\n                onConfirm={() => handleDeleteFileList(deletingFileList.id)}\r\n            >\r\n                {i18n.t(\"files.confirmationModal.deleteMessage\")}\r\n            </ConfirmationModal>\r\n            <FileModal\r\n                open={fileListModalOpen}\r\n                onClose={handleCloseFileListModal}\r\n                reload={fetchFileLists}\r\n                aria-labelledby=\"form-dialog-title\"\r\n                fileListId={selectedFileList && selectedFileList.id}\r\n            />\r\n            {user.profile === \"user\" ?\r\n                <ForbiddenPage />\r\n                :\r\n                <>\r\n                    <MainHeader>\r\n                        <Title>{i18n.t(\"files.title\")} ({files.length})</Title>\r\n                        <MainHeaderButtonsWrapper>\r\n                            <TextField\r\n                                placeholder={i18n.t(\"contacts.searchPlaceholder\")}\r\n                                type=\"search\"\r\n                                value={searchParam}\r\n                                onChange={handleSearch}\r\n                                InputProps={{\r\n                                    startAdornment: (\r\n                                        <InputAdornment position=\"start\">\r\n                                            <SearchIcon style={{ color: \"gray\" }} />\r\n                                        </InputAdornment>\r\n                                    ),\r\n                                }}\r\n                            />\r\n                            <Button\r\n                                variant=\"contained\"\r\n                                color=\"primary\"\r\n                                onClick={handleOpenFileListModal}\r\n                            >\r\n                                {i18n.t(\"files.buttons.add\")}\r\n                            </Button>\r\n                        </MainHeaderButtonsWrapper>\r\n                    </MainHeader>\r\n                    <Paper\r\n                        className={classes.mainPaper}\r\n                        variant=\"outlined\"\r\n                        onScroll={handleScroll}\r\n                    >\r\n                        <Table size=\"small\">\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell align=\"center\">{i18n.t(\"files.table.name\")}</TableCell>\r\n                                    <TableCell align=\"center\">\r\n                                        {i18n.t(\"files.table.actions\")}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                <>\r\n                                    {files.map((fileList) => (\r\n                                        <TableRow key={fileList.id}>\r\n                                            <TableCell align=\"center\">\r\n                                                {fileList.name}\r\n                                            </TableCell>\r\n                                            <TableCell align=\"center\">\r\n                                                <IconButton size=\"small\" onClick={() => handleEditFileList(fileList)}>\r\n                                                    <EditIcon />\r\n                                                </IconButton>\r\n\r\n                                                <IconButton\r\n                                                    size=\"small\"\r\n                                                    onClick={(e) => {\r\n                                                        setConfirmModalOpen(true);\r\n                                                        setDeletingFileList(fileList);\r\n                                                    }}\r\n                                                >\r\n                                                    <DeleteOutlineIcon />\r\n                                                </IconButton>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                    {loading && <TableRowSkeleton columns={4} />}\r\n                                </>\r\n                            </TableBody>\r\n                        </Table>\r\n                    </Paper>\r\n                </>}\r\n        </MainContainer>\r\n    );\r\n};\r\n\r\nexport default FileLists;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}