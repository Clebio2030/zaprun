{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import api from\"../../services/api\";import Button from\"@material-ui/core/Button\";const packageVersion=require(\"../../../package.json\").version;const VersionControl=()=>{const[storedVersion]=useState(window.localStorage.getItem(\"version\")||\"0.0.0\");const handleUpdateVersion=async()=>{window.localStorage.setItem(\"version\",packageVersion);// Mantive apenas para salvar no banco a versao atual\nconst{data}=await api.post(\"/version\",{version:packageVersion});// Limpar o cache do navegador\ncaches.keys().then(function(names){for(let name of names)caches.delete(name);});// Atraso para garantir que o cache foi limpo\nsetTimeout(()=>{window.location.reload(true);// Recarregar a página\n},1000);};return/*#__PURE__*/React.createElement(\"div\",null,storedVersion!==packageVersion&&/*#__PURE__*/React.createElement(Button,{variant:\"contained\",size:\"small\",style:{backgroundColor:\"red\",color:\"white\",fontWeight:\"bold\",right:\"15px\"},onClick:handleUpdateVersion},\"Nova vers\\xE3o dispon\\xEDvel! Clique aqui para atualizar\"));};export default VersionControl;","map":{"version":3,"names":["React","useState","useEffect","api","Button","packageVersion","require","version","VersionControl","storedVersion","window","localStorage","getItem","handleUpdateVersion","setItem","data","post","caches","keys","then","names","name","delete","setTimeout","location","reload","createElement","variant","size","style","backgroundColor","color","fontWeight","right","onClick"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/VersionControl/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport api from \"../../services/api\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst packageVersion = require(\"../../../package.json\").version;\r\n\r\nconst VersionControl = () => {\r\n  const [storedVersion] = useState(window.localStorage.getItem(\"version\") || \"0.0.0\");\r\n\r\n  const handleUpdateVersion = async () => {\r\n    window.localStorage.setItem(\"version\", packageVersion);\r\n\r\n    // Mantive apenas para salvar no banco a versao atual\r\n    const { data } = await api.post(\"/version\", {\r\n      version: packageVersion,\r\n    });\r\n\r\n    // Limpar o cache do navegador\r\n    caches.keys().then(function (names) {\r\n      for (let name of names) caches.delete(name);\r\n    });\r\n\r\n    // Atraso para garantir que o cache foi limpo\r\n    setTimeout(() => {\r\n      window.location.reload(true); // Recarregar a página\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {storedVersion !== packageVersion && (\r\n        <Button\r\n          variant=\"contained\"\r\n          size=\"small\"\r\n          style={{\r\n            backgroundColor: \"red\",\r\n            color: \"white\",\r\n            fontWeight: \"bold\",\r\n            right: \"15px\",\r\n          }}\r\n          onClick={handleUpdateVersion}\r\n        >\r\n          Nova versão disponível! Clique aqui para atualizar\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VersionControl;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,oBAAoB,CACpC,MAAO,CAAAC,MAAM,KAAM,0BAA0B,CAE7C,KAAM,CAAAC,cAAc,CAAGC,OAAO,CAAC,uBAAuB,CAAC,CAACC,OAAO,CAE/D,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAACC,aAAa,CAAC,CAAGR,QAAQ,CAACS,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,EAAI,OAAO,CAAC,CAEnF,KAAM,CAAAC,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtCH,MAAM,CAACC,YAAY,CAACG,OAAO,CAAC,SAAS,CAAET,cAAc,CAAC,CAEtD;AACA,KAAM,CAAEU,IAAK,CAAC,CAAG,KAAM,CAAAZ,GAAG,CAACa,IAAI,CAAC,UAAU,CAAE,CAC1CT,OAAO,CAAEF,cACX,CAAC,CAAC,CAEF;AACAY,MAAM,CAACC,IAAI,CAAC,CAAC,CAACC,IAAI,CAAC,SAAUC,KAAK,CAAE,CAClC,IAAK,GAAI,CAAAC,IAAI,GAAI,CAAAD,KAAK,CAAEH,MAAM,CAACK,MAAM,CAACD,IAAI,CAAC,CAC7C,CAAC,CAAC,CAEF;AACAE,UAAU,CAAC,IAAM,CACfb,MAAM,CAACc,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC,CAAE;AAChC,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAED,mBACEzB,KAAA,CAAA0B,aAAA,YACGjB,aAAa,GAAKJ,cAAc,eAC/BL,KAAA,CAAA0B,aAAA,CAACtB,MAAM,EACLuB,OAAO,CAAC,WAAW,CACnBC,IAAI,CAAC,OAAO,CACZC,KAAK,CAAE,CACLC,eAAe,CAAE,KAAK,CACtBC,KAAK,CAAE,OAAO,CACdC,UAAU,CAAE,MAAM,CAClBC,KAAK,CAAE,MACT,CAAE,CACFC,OAAO,CAAErB,mBAAoB,EAC9B,0DAEO,CAEP,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}