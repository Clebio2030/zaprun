{"ast":null,"code":"import React,{useState,useRef,useEffect,useContext}from\"react\";import{useTheme}from\"@material-ui/core/styles\";import{useHistory}from\"react-router-dom\";import{format}from\"date-fns\";// import { SocketContext } from \"../../context/Socket/SocketContext\";\nimport useSound from\"use-sound\";import Popover from\"@material-ui/core/Popover\";import IconButton from\"@material-ui/core/IconButton\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemText from\"@material-ui/core/ListItemText\";import{makeStyles}from\"@material-ui/core/styles\";import Badge from\"@material-ui/core/Badge\";import ChatIcon from\"@material-ui/icons/Chat\";import TicketListItem from\"../TicketListItem\";import useTickets from\"../../hooks/useTickets\";import alertSound from\"../../assets/sound.mp3\";import{AuthContext}from\"../../context/Auth/AuthContext\";import{i18n}from\"../../translate/i18n\";import toastError from\"../../errors/toastError\";import useCompanySettings from\"../../hooks/useSettings/companySettings\";import Favicon from\"react-favicon\";import{getBackendUrl}from\"../../config\";import defaultLogoFavicon from\"../../assets/favicon.ico\";import{TicketsContext}from\"../../context/Tickets/TicketsContext\";const useStyles=makeStyles(theme=>({tabContainer:{overflowY:\"auto\",maxHeight:350,...theme.scrollbarStyles},popoverPaper:{width:\"100%\",maxWidth:350,marginLeft:theme.spacing(2),marginRight:theme.spacing(1),[theme.breakpoints.down(\"sm\")]:{maxWidth:270}},noShadow:{boxShadow:\"none !important\"}}));const NotificationsPopOver=volume=>{const classes=useStyles();const theme=useTheme();const history=useHistory();// const socketManager = useContext(SocketContext);\nconst{user,socket}=useContext(AuthContext);const{profile,queues}=user;const ticketIdUrl=+history.location.pathname.split(\"/\")[2];const ticketIdRef=useRef(ticketIdUrl);const anchorEl=useRef();const[isOpen,setIsOpen]=useState(false);const[notifications,setNotifications]=useState([]);const queueIds=queues.map(q=>q.id);const{get:getSetting}=useCompanySettings();const{setCurrentTicket,setTabOpen}=useContext(TicketsContext);const[showTicketWithoutQueue,setShowTicketWithoutQueue]=useState(false);const[showNotificationPending,setShowNotificationPending]=useState(false);const[showGroupNotification,setShowGroupNotification]=useState(false);const[,setDesktopNotifications]=useState([]);const{tickets}=useTickets({withUnreadMessages:\"true\"// showAll: showTicketWithoutQueue ? \"true\" : \"false\"\n});const[play]=useSound(alertSound,volume);const soundAlertRef=useRef();const historyRef=useRef(history);useEffect(()=>{const fetchSettings=async()=>{try{const setting=await getSetting({\"column\":\"showNotificationPending\"});if(setting.showNotificationPending===true){setShowNotificationPending(true);}if(user.allTicket===\"enable\"){setShowTicketWithoutQueue(true);}if(user.allowGroup===true){setShowGroupNotification(true);}}catch(err){toastError(err);}};fetchSettings();},[setShowTicketWithoutQueue,setShowNotificationPending]);useEffect(()=>{soundAlertRef.current=play;if(!(\"Notification\"in window)){}else{Notification.requestPermission();}},[play]);useEffect(()=>{const processNotifications=()=>{// if (showTicketWithoutQueue) {\nsetNotifications(tickets);// } else {\n// \tconst newNotifications = tickets.filter(ticket => ticket.status !== \"pending\");\n// \tsetNotifications(newNotifications);\n// }\n};processNotifications();},[tickets]);useEffect(()=>{ticketIdRef.current=ticketIdUrl;},[ticketIdUrl]);useEffect(()=>{const companyId=user.companyId;// const socket = socketManager.GetSocket();\nif(user.id){const queueIds=queues.map(q=>q.id);const onConnectNotificationsPopover=()=>{socket.emit(\"joinNotification\");};const onCompanyTicketNotificationsPopover=data=>{if(data.action===\"updateUnread\"||data.action===\"delete\"){setNotifications(prevState=>{const ticketIndex=prevState.findIndex(t=>t.id===data.ticketId);if(ticketIndex!==-1){prevState.splice(ticketIndex,1);return[...prevState];}return prevState;});setDesktopNotifications(prevState=>{const notfiticationIndex=prevState.findIndex(n=>n.tag===String(data.ticketId));if(notfiticationIndex!==-1){prevState[notfiticationIndex].close();prevState.splice(notfiticationIndex,1);return[...prevState];}return prevState;});}};const onCompanyAppMessageNotificationsPopover=data=>{var _data$ticket,_data$ticket2,_user$queues,_data$ticket3,_data$ticket4,_data$ticket5,_data$ticket6,_data$ticket6$whatsap;// if (\n// \tdata.action === \"create\" && !data.message.fromMe &&\n// \t(\n// \t\tdata.ticket.status !== 'pending' &&\n// \t\tdata.ticket.status !== \"lgpd\" &&\n// \t\tdata.ticket.status !== \"nps\"\t\t\t\t\t\t\n// \t) &&\n// \t(!data.message.read || (data.ticket.status === \"pending\" && showTicketWithoutQueue && data.ticket.queueId === null) || (data.ticket.status === \"pending\" && !showTicketWithoutQueue && user?.queues?.some(queue => (queue.id === data.ticket.queueId)))) &&\n// \t(data.ticket.userId === user?.id || !data.ticket.userId)\n// ) {\n// \nif(data.action===\"create\"&&!data.message.fromMe&&!data.message.read&&(((_data$ticket=data.ticket)===null||_data$ticket===void 0?void 0:_data$ticket.userId)===(user===null||user===void 0?void 0:user.id)||!((_data$ticket2=data.ticket)===null||_data$ticket2===void 0?void 0:_data$ticket2.userId))&&((user===null||user===void 0?void 0:(_user$queues=user.queues)===null||_user$queues===void 0?void 0:_user$queues.some(queue=>queue.id===data.ticket.queueId))||!data.ticket.queueId&&showTicketWithoutQueue===true)&&(![\"pending\",\"lgpd\",\"nps\",\"group\"].includes((_data$ticket3=data.ticket)===null||_data$ticket3===void 0?void 0:_data$ticket3.status)||((_data$ticket4=data.ticket)===null||_data$ticket4===void 0?void 0:_data$ticket4.status)===\"pending\"&&showNotificationPending===true||((_data$ticket5=data.ticket)===null||_data$ticket5===void 0?void 0:_data$ticket5.status)===\"group\"&&((_data$ticket6=data.ticket)===null||_data$ticket6===void 0?void 0:(_data$ticket6$whatsap=_data$ticket6.whatsapp)===null||_data$ticket6$whatsap===void 0?void 0:_data$ticket6$whatsap.groupAsTicket)===\"enabled\"&&showGroupNotification===true)){var _data$ticket7,_data$ticket7$whatsap;setNotifications(prevState=>{const ticketIndex=prevState.findIndex(t=>t.id===data.ticket.id);if(ticketIndex!==-1){prevState[ticketIndex]=data.ticket;return[...prevState];}return[data.ticket,...prevState];});const shouldNotNotificate=data.message.ticketId===ticketIdRef.current&&document.visibilityState===\"visible\"||data.ticket.userId&&data.ticket.userId!==(user===null||user===void 0?void 0:user.id)||data.ticket.isGroup&&((_data$ticket7=data.ticket)===null||_data$ticket7===void 0?void 0:(_data$ticket7$whatsap=_data$ticket7.whatsapp)===null||_data$ticket7$whatsap===void 0?void 0:_data$ticket7$whatsap.groupAsTicket)===\"disabled\"&&showGroupNotification===false;if(shouldNotNotificate===true)return;handleNotifications(data);}};socket.on(\"connect\",onConnectNotificationsPopover);socket.on(\"company-\".concat(companyId,\"-ticket\"),onCompanyTicketNotificationsPopover);socket.on(\"company-\".concat(companyId,\"-appMessage\"),onCompanyAppMessageNotificationsPopover);return()=>{socket.off(\"connect\",onConnectNotificationsPopover);socket.off(\"company-\".concat(companyId,\"-ticket\"),onCompanyTicketNotificationsPopover);socket.off(\"company-\".concat(companyId,\"-appMessage\"),onCompanyAppMessageNotificationsPopover);};}},[user,profile,queues,showTicketWithoutQueue,socket,showNotificationPending,showGroupNotification]);const handleNotifications=data=>{const{message,contact,ticket}=data;const options={body:\"\".concat(message.body,\" - \").concat(format(new Date(),\"HH:mm\")),icon:contact.urlPicture,tag:ticket.id,renotify:true};const notification=new Notification(\"\".concat(i18n.t(\"tickets.notification.message\"),\" \").concat(contact.name),options);notification.onclick=e=>{e.preventDefault();window.focus();setTabOpen(ticket.status);historyRef.current.push(\"/tickets/\".concat(ticket.uuid));// handleChangeTab(null, ticket.isGroup? \"group\" : \"open\");\n};setDesktopNotifications(prevState=>{const notfiticationIndex=prevState.findIndex(n=>n.tag===notification.tag);if(notfiticationIndex!==-1){prevState[notfiticationIndex]=notification;return[...prevState];}return[notification,...prevState];});soundAlertRef.current();};const handleClick=()=>{setIsOpen(prevState=>!prevState);};const handleClickAway=()=>{setIsOpen(false);};const NotificationTicket=_ref=>{let{children}=_ref;return/*#__PURE__*/React.createElement(\"div\",{onClick:handleClickAway},children);};const browserNotification=()=>{const numbers=\"⓿➊➋➌➍➎➏➐➑➒➓⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴\";if(notifications.length>0){if(notifications.length<21){document.title=numbers.substring(notifications.length,notifications.length+1)+\" - \"+(theme.appName||\"...\");}else{document.title=\"(\"+notifications.length+\")\"+(theme.appName||\"...\");}}else{document.title=theme.appName||\"...\";}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Favicon,{animated:true,url:(theme===null||theme===void 0?void 0:theme.appLogoFavicon)?theme.appLogoFavicon:defaultLogoFavicon,alertCount:notifications.length,iconSize:195}));};return/*#__PURE__*/React.createElement(React.Fragment,null,browserNotification(),/*#__PURE__*/React.createElement(IconButton,{onClick:handleClick,ref:anchorEl,\"aria-label\":\"Open Notifications\",color:\"inherit\",style:{color:\"white\"}},/*#__PURE__*/React.createElement(Badge,{overlap:\"rectangular\",badgeContent:notifications.length,color:\"secondary\"},/*#__PURE__*/React.createElement(ChatIcon,null))),/*#__PURE__*/React.createElement(Popover,{disableScrollLock:true,open:isOpen,anchorEl:anchorEl.current,anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},transformOrigin:{vertical:\"top\",horizontal:\"right\"},classes:{paper:classes.popoverPaper},onClose:handleClickAway},/*#__PURE__*/React.createElement(List,{dense:true,className:classes.tabContainer},notifications.length===0?/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(ListItemText,null,i18n.t(\"notifications.noTickets\"))):notifications.map(ticket=>/*#__PURE__*/React.createElement(NotificationTicket,{key:ticket.id},/*#__PURE__*/React.createElement(TicketListItem,{ticket:ticket}))))));};export default NotificationsPopOver;","map":{"version":3,"names":["React","useState","useRef","useEffect","useContext","useTheme","useHistory","format","useSound","Popover","IconButton","List","ListItem","ListItemText","makeStyles","Badge","ChatIcon","TicketListItem","useTickets","alertSound","AuthContext","i18n","toastError","useCompanySettings","Favicon","getBackendUrl","defaultLogoFavicon","TicketsContext","useStyles","theme","tabContainer","overflowY","maxHeight","scrollbarStyles","popoverPaper","width","maxWidth","marginLeft","spacing","marginRight","breakpoints","down","noShadow","boxShadow","NotificationsPopOver","volume","classes","history","user","socket","profile","queues","ticketIdUrl","location","pathname","split","ticketIdRef","anchorEl","isOpen","setIsOpen","notifications","setNotifications","queueIds","map","q","id","get","getSetting","setCurrentTicket","setTabOpen","showTicketWithoutQueue","setShowTicketWithoutQueue","showNotificationPending","setShowNotificationPending","showGroupNotification","setShowGroupNotification","setDesktopNotifications","tickets","withUnreadMessages","play","soundAlertRef","historyRef","fetchSettings","setting","allTicket","allowGroup","err","current","window","Notification","requestPermission","processNotifications","companyId","onConnectNotificationsPopover","emit","onCompanyTicketNotificationsPopover","data","action","prevState","ticketIndex","findIndex","t","ticketId","splice","notfiticationIndex","n","tag","String","close","onCompanyAppMessageNotificationsPopover","_data$ticket","_data$ticket2","_user$queues","_data$ticket3","_data$ticket4","_data$ticket5","_data$ticket6","_data$ticket6$whatsap","message","fromMe","read","ticket","userId","some","queue","queueId","includes","status","whatsapp","groupAsTicket","_data$ticket7","_data$ticket7$whatsap","shouldNotNotificate","document","visibilityState","isGroup","handleNotifications","on","concat","off","contact","options","body","Date","icon","urlPicture","renotify","notification","name","onclick","e","preventDefault","focus","push","uuid","handleClick","handleClickAway","NotificationTicket","_ref","children","createElement","onClick","browserNotification","numbers","length","title","substring","appName","Fragment","animated","url","appLogoFavicon","alertCount","iconSize","ref","color","style","overlap","badgeContent","disableScrollLock","open","anchorOrigin","vertical","horizontal","transformOrigin","paper","onClose","dense","className","key"],"sources":["C:/ProjectsCode/ZapRun/ZapRun/frontend/src/components/NotificationsPopOver/index.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport { useTheme } from \"@material-ui/core/styles\";\n\nimport { useHistory } from \"react-router-dom\";\nimport { format } from \"date-fns\";\n// import { SocketContext } from \"../../context/Socket/SocketContext\";\n\nimport useSound from \"use-sound\";\n\nimport Popover from \"@material-ui/core/Popover\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Badge from \"@material-ui/core/Badge\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\n\nimport TicketListItem from \"../TicketListItem\";\nimport useTickets from \"../../hooks/useTickets\";\nimport alertSound from \"../../assets/sound.mp3\";\nimport { AuthContext } from \"../../context/Auth/AuthContext\";\nimport { i18n } from \"../../translate/i18n\";\nimport toastError from \"../../errors/toastError\";\nimport useCompanySettings from \"../../hooks/useSettings/companySettings\";\nimport Favicon from \"react-favicon\";\nimport { getBackendUrl } from \"../../config\";\nimport defaultLogoFavicon from \"../../assets/favicon.ico\";\nimport { TicketsContext } from \"../../context/Tickets/TicketsContext\";\n\nconst useStyles = makeStyles(theme => ({\n\ttabContainer: {\n\t\toverflowY: \"auto\",\n\t\tmaxHeight: 350,\n\t\t...theme.scrollbarStyles,\n\t},\n\tpopoverPaper: {\n\t\twidth: \"100%\",\n\t\tmaxWidth: 350,\n\t\tmarginLeft: theme.spacing(2),\n\t\tmarginRight: theme.spacing(1),\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\tmaxWidth: 270,\n\t\t},\n\t},\n\tnoShadow: {\n\t\tboxShadow: \"none !important\",\n\t},\n}));\n\nconst NotificationsPopOver = (volume) => {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\n\tconst history = useHistory();\n\t// const socketManager = useContext(SocketContext);\n\tconst { user, socket } = useContext(AuthContext);\n\tconst { profile, queues } = user;\n\n\tconst ticketIdUrl = +history.location.pathname.split(\"/\")[2];\n\tconst ticketIdRef = useRef(ticketIdUrl);\n\tconst anchorEl = useRef();\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [notifications, setNotifications] = useState([]);\n\tconst queueIds = queues.map((q) => q.id);\n\tconst { get: getSetting } = useCompanySettings();\n    const { setCurrentTicket, setTabOpen } = useContext(TicketsContext);\n\n\tconst [showTicketWithoutQueue, setShowTicketWithoutQueue] = useState(false);\n\tconst [showNotificationPending, setShowNotificationPending] = useState(false);\n\tconst [showGroupNotification, setShowGroupNotification] = useState(false);\n\n\tconst [, setDesktopNotifications] = useState([]);\n\n\tconst { tickets } = useTickets({\n\t\twithUnreadMessages: \"true\"\n\t\t// showAll: showTicketWithoutQueue ? \"true\" : \"false\"\n\t});\n\n\tconst [play] = useSound(alertSound, volume);\n\tconst soundAlertRef = useRef();\n\n\tconst historyRef = useRef(history);\n\n\tuseEffect(() => {\n\t\tconst fetchSettings = async () => {\n\t\t\ttry {\n\t\t\t\tconst setting = await getSetting(\n\t\t\t\t\t{\n\t\t\t\t\t\t\"column\": \"showNotificationPending\"\n\t\t\t\t\t}\n\t\t\t\t);\n\n\n\n\t\t\t\tif (setting.showNotificationPending === true) {\n\t\t\t\t\tsetShowNotificationPending(true);\n\t\t\t\t}\n\n\t\t\t\tif (user.allTicket === \"enable\") {\n\t\t\t\t\tsetShowTicketWithoutQueue(true);\n\t\t\t\t}\n\t\t\t\tif (user.allowGroup === true) {\n\t\t\t\t\tsetShowGroupNotification(true);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\ttoastError(err);\n\t\t\t}\n\t\t}\n\n\t\tfetchSettings();\n\t}, [setShowTicketWithoutQueue, setShowNotificationPending]);\n\n\tuseEffect(() => {\n\t\tsoundAlertRef.current = play;\n\n\t\tif (!(\"Notification\" in window)) {\n\t\t} else {\n\t\t\tNotification.requestPermission();\n\t\t}\n\t}, [play]);\n\n\tuseEffect(() => {\n\t\tconst processNotifications = () => {\n\t\t\t// if (showTicketWithoutQueue) {\n\t\t\tsetNotifications(tickets);\n\t\t\t// } else {\n\t\t\t// \tconst newNotifications = tickets.filter(ticket => ticket.status !== \"pending\");\n\n\t\t\t// \tsetNotifications(newNotifications);\n\t\t\t// }\n\t\t}\n\n\t\tprocessNotifications();\n\t}, [tickets]);\n\n\tuseEffect(() => {\n\t\tticketIdRef.current = ticketIdUrl;\n\t}, [ticketIdUrl]);\n\n\tuseEffect(() => {\n\t\tconst companyId = user.companyId;\n\t\t// const socket = socketManager.GetSocket();\n\t\tif (user.id) {\n\t\t\tconst queueIds = queues.map((q) => q.id);\n\n\t\t\tconst onConnectNotificationsPopover = () => {\n\t\t\t\tsocket.emit(\"joinNotification\");\n\t\t\t}\n\n\t\t\tconst onCompanyTicketNotificationsPopover = (data) => {\n\t\t\t\tif (data.action === \"updateUnread\" || data.action === \"delete\") {\n\t\t\t\t\tsetNotifications(prevState => {\n\t\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticketId);\n\t\t\t\t\t\tif (ticketIndex !== -1) {\n\t\t\t\t\t\t\tprevState.splice(ticketIndex, 1);\n\t\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prevState;\n\t\t\t\t\t});\n\n\t\t\t\t\tsetDesktopNotifications(prevState => {\n\t\t\t\t\t\tconst notfiticationIndex = prevState.findIndex(\n\t\t\t\t\t\t\tn => n.tag === String(data.ticketId)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (notfiticationIndex !== -1) {\n\t\t\t\t\t\t\tprevState[notfiticationIndex].close();\n\t\t\t\t\t\t\tprevState.splice(notfiticationIndex, 1);\n\t\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prevState;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onCompanyAppMessageNotificationsPopover = (data) => {\n\t\t\t\t// if (\n\t\t\t\t// \tdata.action === \"create\" && !data.message.fromMe &&\n\t\t\t\t// \t(\n\t\t\t\t// \t\tdata.ticket.status !== 'pending' &&\n\t\t\t\t// \t\tdata.ticket.status !== \"lgpd\" &&\n\t\t\t\t// \t\tdata.ticket.status !== \"nps\"\t\t\t\t\t\t\n\t\t\t\t// \t) &&\n\t\t\t\t// \t(!data.message.read || (data.ticket.status === \"pending\" && showTicketWithoutQueue && data.ticket.queueId === null) || (data.ticket.status === \"pending\" && !showTicketWithoutQueue && user?.queues?.some(queue => (queue.id === data.ticket.queueId)))) &&\n\t\t\t\t// \t(data.ticket.userId === user?.id || !data.ticket.userId)\n\t\t\t\t// ) {\n\t\t\t\t// \n\t\t\t\t\n\t\t\t\tif (\n\t\t\t\t\tdata.action === \"create\" && !data.message.fromMe &&\n\t\t\t\t\t!data.message.read &&\n\t\t\t\t\t(data.ticket?.userId === user?.id || !data.ticket?.userId) &&\n\t\t\t\t\t(user?.queues?.some(queue => (queue.id === data.ticket.queueId)) ||\n\t\t\t\t\t\t!data.ticket.queueId && showTicketWithoutQueue === true) &&\n\t\t\t\t\t(![\"pending\", \"lgpd\", \"nps\", \"group\"].includes(data.ticket?.status) ||\n\t\t\t\t\t\t(data.ticket?.status === \"pending\" && showNotificationPending === true) ||\n\t\t\t\t\t\t(data.ticket?.status === \"group\" && data.ticket?.whatsapp?.groupAsTicket === \"enabled\" && showGroupNotification === true))\n\t\t\t\t) {\n\t\t\t\t\tsetNotifications(prevState => {\n\t\t\t\t\t\tconst ticketIndex = prevState.findIndex(t => t.id === data.ticket.id);\n\t\t\t\t\t\tif (ticketIndex !== -1) {\n\t\t\t\t\t\t\tprevState[ticketIndex] = data.ticket;\n\t\t\t\t\t\t\treturn [...prevState];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [data.ticket, ...prevState];\n\t\t\t\t\t});\n\n\t\t\t\t\tconst shouldNotNotificate =\n\t\t\t\t\t\t(data.message.ticketId === ticketIdRef.current &&\n\t\t\t\t\t\t\tdocument.visibilityState === \"visible\") ||\n\t\t\t\t\t\t(data.ticket.userId && data.ticket.userId !== user?.id) ||\n\t\t\t\t\t\t(data.ticket.isGroup && data.ticket?.whatsapp?.groupAsTicket === \"disabled\" && showGroupNotification === false);\n\n\n\t\t\t\t\tif (shouldNotNotificate === true) return;\n\n\t\t\t\t\thandleNotifications(data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsocket.on(\"connect\", onConnectNotificationsPopover);\n\t\t\tsocket.on(`company-${companyId}-ticket`, onCompanyTicketNotificationsPopover);\n\t\t\tsocket.on(`company-${companyId}-appMessage`, onCompanyAppMessageNotificationsPopover);\n\n\t\t\treturn () => {\n\t\t\t\tsocket.off(\"connect\", onConnectNotificationsPopover);\n\t\t\t\tsocket.off(`company-${companyId}-ticket`, onCompanyTicketNotificationsPopover);\n\t\t\t\tsocket.off(`company-${companyId}-appMessage`, onCompanyAppMessageNotificationsPopover);\n\t\t\t};\n\t\t}\n\t}, [user, profile, queues, showTicketWithoutQueue, socket, showNotificationPending, showGroupNotification]);\n\n\tconst handleNotifications = data => {\n\t\tconst { message, contact, ticket } = data;\n\n\t\tconst options = {\n\t\t\tbody: `${message.body} - ${format(new Date(), \"HH:mm\")}`,\n\t\t\ticon: contact.urlPicture,\n\t\t\ttag: ticket.id,\n\t\t\trenotify: true,\n\t\t};\n\t\tconst notification = new Notification(\n\t\t\t`${i18n.t(\"tickets.notification.message\")} ${contact.name}`,\n\t\t\toptions\n\t\t);\n\n\t\tnotification.onclick = e => {\n\t\t\te.preventDefault();\n\t\t\twindow.focus();\n\t\t\tsetTabOpen(ticket.status)\n\t\t\thistoryRef.current.push(`/tickets/${ticket.uuid}`);\n\t\t\t// handleChangeTab(null, ticket.isGroup? \"group\" : \"open\");\n\t\t};\n\n\t\tsetDesktopNotifications(prevState => {\n\t\t\tconst notfiticationIndex = prevState.findIndex(\n\t\t\t\tn => n.tag === notification.tag\n\t\t\t);\n\t\t\tif (notfiticationIndex !== -1) {\n\t\t\t\tprevState[notfiticationIndex] = notification;\n\t\t\t\treturn [...prevState];\n\t\t\t}\n\t\t\treturn [notification, ...prevState];\n\t\t});\n\t\tsoundAlertRef.current();\n\t};\n\n\tconst handleClick = () => {\n\t\tsetIsOpen(prevState => !prevState);\n\t};\n\n\tconst handleClickAway = () => {\n\t\tsetIsOpen(false);\n\t};\n\n\tconst NotificationTicket = ({ children }) => {\n\t\treturn <div onClick={handleClickAway}>{children}</div>;\n\t};\n\n\tconst browserNotification = () => {\n\t\tconst numbers = \"⓿➊➋➌➍➎➏➐➑➒➓⓫⓬⓭⓮⓯⓰⓱⓲⓳⓴\";\n\t\tif (notifications.length > 0) {\n\t\t\tif (notifications.length < 21) {\n\t\t\t\tdocument.title = numbers.substring(notifications.length, notifications.length + 1) + \" - \" + (theme.appName || \"...\");\n\t\t\t} else {\n\t\t\t\tdocument.title = \"(\" + notifications.length + \")\" + (theme.appName || \"...\");\n\t\t\t}\n\t\t} else {\n\t\t\tdocument.title = theme.appName || \"...\";\n\t\t}\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Favicon\n\t\t\t\t\tanimated={true}\n\t\t\t\t\turl={(theme?.appLogoFavicon) ? theme.appLogoFavicon : defaultLogoFavicon}\n\t\t\t\t\talertCount={notifications.length}\n\t\t\t\t\ticonSize={195}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{browserNotification()}\n\n\t\t\t<IconButton\n\t\t\t\tonClick={handleClick}\n\t\t\t\tref={anchorEl}\n\t\t\t\taria-label=\"Open Notifications\"\n\t\t\t\tcolor=\"inherit\"\n\t\t\t\tstyle={{ color: \"white\" }}\n\t\t\t>\n\t\t\t\t<Badge overlap=\"rectangular\" badgeContent={notifications.length} color=\"secondary\">\n\t\t\t\t\t<ChatIcon />\n\t\t\t\t</Badge>\n\t\t\t</IconButton>\n\t\t\t<Popover\n\t\t\t\tdisableScrollLock\n\t\t\t\topen={isOpen}\n\t\t\t\tanchorEl={anchorEl.current}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: \"bottom\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: \"top\",\n\t\t\t\t\thorizontal: \"right\",\n\t\t\t\t}}\n\t\t\t\tclasses={{ paper: classes.popoverPaper }}\n\t\t\t\tonClose={handleClickAway}\n\t\t\t>\n\t\t\t\t<List dense className={classes.tabContainer}>\n\t\t\t\t\t{notifications.length === 0 ? (\n\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t<ListItemText>{i18n.t(\"notifications.noTickets\")}</ListItemText>\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tnotifications.map(ticket => (\n\t\t\t\t\t\t\t<NotificationTicket key={ticket.id}>\n\t\t\t\t\t\t\t\t<TicketListItem ticket={ticket} />\n\t\t\t\t\t\t\t</NotificationTicket>\n\t\t\t\t\t\t))\n\t\t\t\t\t)}\n\t\t\t\t</List>\n\t\t\t</Popover>\n\t\t</>\n\t);\n};\n\nexport default NotificationsPopOver;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}